import{r as o,j as a,a as e,Q as Z,f as x,g,F as ee,h as l,c as ae,S as P}from"./app-DDhVNfvV.js";import{A as te}from"./App-CULBC9Jb.js";import{m as c}from"./GlassCard-B8deHOrc.js";import{F as u}from"./CreditCardIcon-nnu7lg95.js";import{F as re}from"./CheckIcon-ZJwAGxKl.js";import{b as E}from"./DocumentTextIcon-QwzC9WoH.js";import{F as le}from"./ExclamationTriangleIcon-3tpAB86s.js";import{c as w}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import{s as de}from"./XMarkIcon-CRGrHH6E.js";import{m as $,a as L,b as O,c as T,d as V}from"./chunk-3BLMMOBU-CpY4Bk7j.js";import"./app-CYwLuuRk.js";import"./logo-DoLGM3I0.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./UserIcon-BZDmR83e.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./ClockIcon-UBQM4q2z.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./BuildingOfficeIcon-BXNAJj1w.js";import"./KeyIcon-CAZJdP6I.js";import"./CheckCircleIcon-BkPxWqsz.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-6MDMHKHV-DNEscIMF.js";import"./useFormReset-Dv_1w4_q.js";import"./useLabel-C1JBDqVQ.js";import"./useLabels-Blg_QI1U.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./create-visual-element-DIA5r6xh.js";function Ye({auth:ne,tenant:ce,subscription:t,availablePlans:m,paymentMethods:_,invoices:C,usage:y,upcomingInvoice:ie}){var A,I;const[b,f]=o.useState(!1),[k,F]=o.useState(null),[B,N]=o.useState(!1),[d,Y]=o.useState(((A=t==null?void 0:t.plan)==null?void 0:A.billing_cycle)||"monthly"),[S,i]=o.useState(!1),Q={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6,staggerChildren:.1}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}},K=r=>{switch(r){case"active":return"success";case"trialing":return"primary";case"past_due":return"warning";case"canceled":return"danger";case"incomplete":return"warning";default:return"default"}},q=r=>{switch(r){case"active":return"Active";case"trialing":return"Trial";case"past_due":return"Past Due";case"canceled":return"Canceled";case"incomplete":return"Incomplete";default:return r}},G=r=>{F(r),f(!0)},H=()=>{i(!0),P.post(route("subscription.change-plan"),{plan_id:k,billing_cycle:d},{onFinish:()=>{i(!1),f(!1),F(null)}})},J=()=>{i(!0),P.post(route("subscription.cancel"),{},{onFinish:()=>{i(!1),N(!1)}})},W=()=>{i(!0),P.post(route("subscription.resume"),{},{onFinish:()=>i(!1)})},p=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),h=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r/100);return a(te,{children:[e(Z,{title:"Subscription Management"}),a(c.div,{variants:Q,initial:"hidden",animate:"visible",className:"space-y-6",children:[e(c.div,{variants:s,children:e("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:a("div",{children:[e("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Subscription Management"}),e("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage your plan, billing, and payment methods"})]})})}),e(c.div,{variants:s,children:e(x,{className:"border-l-4 border-l-blue-500",children:a(g,{className:"p-6",children:[a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center space-x-4",children:[e("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e(u,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),a("div",{children:[e("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((I=t==null?void 0:t.plan)==null?void 0:I.name)||"No Active Plan"}),a("div",{className:"flex items-center space-x-3 mt-1",children:[e(w,{color:K(t==null?void 0:t.status),size:"sm",children:q(t==null?void 0:t.status)}),(t==null?void 0:t.trial_ends_at)&&a("span",{className:"text-sm text-gray-500",children:["Trial ends ",p(t.trial_ends_at)]})]})]})]}),e("div",{className:"text-right",children:(t==null?void 0:t.plan)&&a(ee,{children:[e("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:h(t.plan.price)}),a("p",{className:"text-sm text-gray-500",children:["per ",t.plan.billing_cycle]})]})})]}),(t==null?void 0:t.current_period_end)&&e("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:a("div",{className:"grid md:grid-cols-3 gap-4",children:[a("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Current Period"}),a("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Ends ",p(t.current_period_end)]})]}),t.status==="active"&&a("div",{children:[e("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Auto Renewal"}),e("p",{className:"font-semibold text-green-600",children:"Enabled"})]}),e("div",{className:"md:text-right",children:t.status==="canceled"?e(l,{color:"primary",onPress:W,isLoading:S,startContent:e(ae,{className:"w-4 h-4"}),children:"Resume Subscription"}):e(l,{color:"danger",variant:"bordered",onPress:()=>N(!0),children:"Cancel Subscription"})})]})})]})})}),a(c.div,{variants:s,children:[a("div",{className:"flex items-center justify-between mb-6",children:[e("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Available Plans"}),a("div",{className:"flex items-center space-x-2",children:[e("span",{className:"text-sm text-gray-600",children:"Monthly"}),e(de,{isSelected:d==="yearly",onValueChange:r=>Y(r?"yearly":"monthly")}),e("span",{className:"text-sm text-gray-600",children:"Yearly (Save 20%)"})]})]}),e("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:m==null?void 0:m.map(r=>{var n,M,R,j,D,z,U;return a(x,{className:`relative hover:shadow-lg transition-shadow ${r.id===((n=t==null?void 0:t.plan)==null?void 0:n.id)?"ring-2 ring-blue-500":""}`,children:[r.id===((M=t==null?void 0:t.plan)==null?void 0:M.id)&&e("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e(w,{color:"primary",size:"sm",children:"Current Plan"})}),a(g,{className:"p-6",children:[a("div",{className:"text-center mb-6",children:[e("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:r.name}),e("div",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:h(d==="yearly"?r.yearly_price:r.monthly_price)}),a("p",{className:"text-gray-500 text-sm",children:["per ",d==="yearly"?"year":"month"]}),d==="yearly"&&r.yearly_price<r.monthly_price*12&&a("p",{className:"text-green-600 text-xs mt-1",children:["Save ",h(r.monthly_price*12-r.yearly_price)," per year!"]})]}),e("ul",{className:"space-y-3 mb-6",children:(R=r.features)==null?void 0:R.map((v,X)=>a("li",{className:"flex items-center space-x-3",children:[e(re,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:v})]},X))}),e(l,{className:"w-full",color:r.id===((j=t==null?void 0:t.plan)==null?void 0:j.id)?"default":"primary",variant:r.id===((D=t==null?void 0:t.plan)==null?void 0:D.id)?"bordered":"solid",onPress:()=>{var v;return r.id!==((v=t==null?void 0:t.plan)==null?void 0:v.id)&&G(r.id)},isDisabled:r.id===((z=t==null?void 0:t.plan)==null?void 0:z.id),children:r.id===((U=t==null?void 0:t.plan)==null?void 0:U.id)?"Current Plan":"Upgrade to "+r.name})]})]},r.id)})})]}),a("div",{className:"grid lg:grid-cols-2 gap-6",children:[e(c.div,{variants:s,children:e(x,{children:a(g,{className:"p-6",children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Payment Methods"}),_&&_.length>0?e("div",{className:"space-y-3",children:_.map((r,n)=>a("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a("div",{className:"flex items-center space-x-3",children:[e(u,{className:"w-6 h-6 text-gray-400"}),a("div",{children:[a("p",{className:"font-medium text-gray-900 dark:text-white",children:["•••• •••• •••• ",r.last4]}),a("p",{className:"text-sm text-gray-500",children:[r.brand," • Expires ",r.exp_month,"/",r.exp_year]})]})]}),r.is_default&&e(w,{color:"primary",size:"sm",children:"Default"})]},n))}):a("div",{className:"text-center py-8",children:[e(u,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e("p",{className:"text-gray-500 text-sm",children:"No payment methods added"})]}),e(l,{className:"w-full mt-4",variant:"bordered",startContent:e(u,{className:"w-4 h-4"}),children:"Add Payment Method"})]})})}),e(c.div,{variants:s,children:e(x,{children:a(g,{className:"p-6",children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Invoices"}),C&&C.length>0?e("div",{className:"space-y-3",children:C.slice(0,5).map((r,n)=>a("div",{className:"flex items-center justify-between",children:[a("div",{children:[e("p",{className:"font-medium text-gray-900 dark:text-white",children:h(r.amount)}),e("p",{className:"text-sm text-gray-500",children:p(r.created_at)})]}),a("div",{className:"text-right",children:[e(w,{color:r.status==="paid"?"success":"warning",size:"sm",children:r.status}),e(l,{size:"sm",variant:"light",className:"ml-2",startContent:e(E,{className:"w-4 h-4"}),children:"View"})]})]},n))}):a("div",{className:"text-center py-8",children:[e(E,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e("p",{className:"text-gray-500 text-sm",children:"No invoices yet"})]})]})})})]}),y&&e(c.div,{variants:s,children:e(x,{children:a(g,{className:"p-6",children:[e("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Usage"}),a("div",{className:"grid md:grid-cols-3 gap-6",children:[a("div",{className:"text-center",children:[e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.employees||0}),e("p",{className:"text-sm text-gray-500",children:"Active Employees"})]}),a("div",{className:"text-center",children:[a("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.round((y.storage_used||0)/(1024*1024))," MB"]}),e("p",{className:"text-sm text-gray-500",children:"Storage Used"})]}),a("div",{className:"text-center",children:[e("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.api_calls||0}),e("p",{className:"text-sm text-gray-500",children:"API Calls This Month"})]})]})]})})})]}),e(V,{isOpen:b,onClose:()=>f(!1),size:"lg",children:a($,{children:[e(L,{children:"Confirm Plan Change"}),a(O,{children:[e("p",{className:"text-gray-600 dark:text-gray-300",children:"Are you sure you want to change your plan? Your billing will be prorated for the remaining time in your current billing cycle."}),k&&m&&a("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e("h4",{className:"font-semibold mb-2",children:"New Plan Details:"}),(()=>{const r=m.find(n=>n.id===k);return r?a("div",{children:[a("p",{children:[e("strong",{children:"Plan:"})," ",r.name]}),a("p",{children:[e("strong",{children:"Price:"})," ",h(d==="yearly"?r.yearly_price:r.monthly_price)," per ",d==="yearly"?"year":"month"]}),a("p",{children:[e("strong",{children:"Billing Cycle:"})," ",d]})]}):null})()]})]}),a(T,{children:[e(l,{variant:"light",onPress:()=>f(!1),children:"Cancel"}),e(l,{color:"primary",onPress:H,isLoading:S,children:"Confirm Change"})]})]})}),e(V,{isOpen:B,onClose:()=>N(!1),children:a($,{children:[e(L,{className:"text-red-600",children:"Cancel Subscription"}),e(O,{children:a("div",{className:"flex items-start space-x-3",children:[e(le,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-1"}),a("div",{children:[e("p",{className:"text-gray-900 dark:text-white font-medium mb-2",children:"Are you sure you want to cancel your subscription?"}),a("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["You'll continue to have access until the end of your current billing period (",t!=null&&t.current_period_end?p(t.current_period_end):"end of period","). After that, your account will be downgraded to the free plan."]})]})]})}),a(T,{children:[e(l,{variant:"light",onPress:()=>N(!1),children:"Keep Subscription"}),e(l,{color:"danger",onPress:J,isLoading:S,children:"Cancel Subscription"})]})]})})]})}export{Ye as default};
