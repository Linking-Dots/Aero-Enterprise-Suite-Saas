import{i as U,r as o,j as t,a as e,Q as W,F as z,c as J}from"./app-DDhVNfvV.js";import{g as B,u as Y,G as Z,T as ee,I as re,y as te,C as p,A as ae}from"./App-CULBC9Jb.js";import{u as le,G as se,F as m}from"./GlassCard-B8deHOrc.js";import{C as $}from"./CircularProgress-ukpRde3Q.js";import{F as ie}from"./ChartBarIcon-CzsPYg0y.js";import{B as n}from"./Button-PH-Yt16S.js";import{D as oe}from"./Download-CTJhusQE.js";import{C as E}from"./CheckCircle-BYOcYQg8.js";import{F as ne}from"./DocumentArrowDownIcon-C7bxjW28.js";import{A as de}from"./Alert-CzNvw6o_.js";import{W as ce}from"./Warning-CzF71MAw.js";import"./app-CYwLuuRk.js";import"./logo-DoLGM3I0.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./UserIcon-BZDmR83e.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./ClockIcon-UBQM4q2z.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./BuildingOfficeIcon-BXNAJj1w.js";import"./KeyIcon-CAZJdP6I.js";import"./CheckCircleIcon-BkPxWqsz.js";import"./ExclamationTriangleIcon-3tpAB86s.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-6MDMHKHV-DNEscIMF.js";import"./useFormReset-Dv_1w4_q.js";import"./useLabel-C1JBDqVQ.js";import"./useLabels-Blg_QI1U.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./XMarkIcon-CRGrHH6E.js";import"./chunk-J7I6W5JF-Dj4B-Czi.js";import"./create-visual-element-DIA5r6xh.js";import"./useSlot-vNKPmkVG.js";const G=B(U.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),me=B(U.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),pe=({auth:h,title:g="Performance Dashboard"})=>{var v,f,N,w,y,k,C,F,S,T,P,j,I,R;const M=le();Y(M.breakpoints.down("md"));const[O,V]=o.useState(!0),[Q,u]=o.useState(!1),[l,_]=o.useState(null),[D,b]=o.useState([]),[he,ge]=o.useState("24h"),d=async()=>{try{u(!0);const a=await fetch("/storage/app/performance/baseline.json");let s=null;a.ok&&(s=await a.json());const r=await fetch("/storage/app/performance/comparison.json");let i=null;r.ok&&(i=await r.json());const L=await fetch("/storage/app/reports/performance-export.json");let A=null;L.ok&&(A=await L.json()),_({baseline:s,comparison:i,report:A,lastUpdated:new Date});const c=[];s&&(s.overall.performanceScore<70&&c.push({type:"error",message:`Performance score is below threshold: ${s.overall.performanceScore}/100`}),s.overall.totalIssues>0&&c.push({type:"warning",message:`${s.overall.totalIssues} performance issues detected`})),i&&i.summary.regressions.length>0&&c.push({type:"error",message:`${i.summary.regressions.length} performance regressions detected`}),b(c)}catch(a){console.error("Failed to fetch performance data:",a),b([{type:"error",message:"Failed to load performance data. Please check if performance monitoring is running."}])}finally{u(!1),V(!1)}};o.useEffect(()=>{d();const a=setInterval(d,5*60*1e3);return()=>clearInterval(a)},[]);const q=async()=>{var a;try{(await fetch("/api/performance/generate-report",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content")}})).ok&&await d()}catch(s){console.error("Failed to generate report:",s)}},x=()=>{const a=document.createElement("a");a.href="/storage/app/reports/performance-export.json",a.download=`glass-erp-performance-${new Date().toISOString().split("T")[0]}.json`,a.click()},H=({score:a,size:s=120})=>{const r=i=>i>=90?"#10b981":i>=70?"#f59e0b":"#ef4444";return t("div",{className:"relative inline-flex",children:[e($,{variant:"determinate",value:a,size:s,thickness:4,sx:{color:r(a)}}),t("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[e("div",{className:"text-3xl font-bold",style:{color:r(a)},children:a}),e("div",{className:"text-xs text-gray-400",children:"/100"})]})]})},K=({vitals:a})=>{if(!a)return null;const s=[{name:"FCP",value:a.FCP,unit:"ms",threshold:1800,label:"First Contentful Paint"},{name:"LCP",value:a.LCP,unit:"ms",threshold:2500,label:"Largest Contentful Paint"},{name:"FID",value:a.FID,unit:"ms",threshold:100,label:"First Input Delay"},{name:"INP",value:a.INP||0,unit:"ms",threshold:200,label:"Interaction to Next Paint"},{name:"CLS",value:a.CLS,unit:"",threshold:.1,label:"Cumulative Layout Shift"},{name:"TTFB",value:a.TTFB,unit:"ms",threshold:800,label:"Time to First Byte"}];return e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.map(r=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 text-center",children:[e("div",{className:"text-sm font-medium text-gray-400 mb-2",children:r.name}),t("div",{className:`text-2xl font-bold mb-1 ${r.value<=r.threshold?"text-green-400":"text-red-400"}`,children:[r.name==="CLS"?r.value.toFixed(3):Math.round(r.value),e("span",{className:"text-xs ml-1",children:r.unit})]}),e("div",{className:"text-xs text-gray-400 mb-2",children:r.label}),e(p,{size:"small",label:r.value<=r.threshold?"Good":"Needs Work",color:r.value<=r.threshold?"success":"error"})]},r.name))})},X=({features:a})=>a?e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a).map(([s,r])=>t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",children:[t("div",{className:"flex justify-between items-center mb-3",children:[e("div",{className:"text-lg font-semibold text-white",children:s}),e(p,{size:"small",label:r.priority,color:r.priority==="high"?"error":r.priority==="medium"?"warning":"default"})]}),t("div",{className:`text-3xl font-bold mb-2 ${r.averageLoadTime<=r.target?"text-green-400":"text-orange-400"}`,children:[Math.round(r.averageLoadTime),"ms"]}),t("div",{className:"text-sm text-gray-400 mb-3",children:["Target: ",r.target,"ms | Routes: ",Object.keys(r.routes).length]}),e(p,{size:"small",icon:r.averageLoadTime<=r.target?e(E,{}):e(ce,{}),label:r.averageLoadTime<=r.target?"Meeting Target":"Exceeds Target",color:r.averageLoadTime<=r.target?"success":"warning"})]},s))}):null;return O?t(z,{children:[e(W,{title:g}),e("div",{className:"min-h-screen flex items-center justify-center",children:e($,{size:60})})]}):t(z,{children:[e(W,{title:g}),e("div",{className:"min-h-screen p-2 sm:p-4 md:p-6",children:e("div",{className:"mx-auto max-w-7xl",children:e(Z,{in:!0,timeout:800,children:e("div",{children:t(se,{children:[t("div",{className:"relative overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),e("div",{className:"relative px-6 py-8",children:t("div",{className:"flex flex-col gap-6",children:[t("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t("div",{className:"flex items-center gap-4",children:[e("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl backdrop-blur-sm border border-white/10",children:e(ie,{className:"w-8 h-8 text-blue-400"})}),t("div",{children:[e("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"ðŸš€ Performance Monitor"}),e("p",{className:"text-gray-400 mt-1 text-sm md:text-base",children:"Real-time performance monitoring and optimization insights"})]})]}),t("div",{className:"flex gap-2 flex-wrap",children:[e(ee,{title:"Refresh Data",children:e(re,{onClick:d,disabled:Q,className:"text-blue-400 hover:bg-blue-500/10",children:e(J,{className:"w-5 h-5"})})}),e(n,{variant:"outlined",startIcon:e(me,{}),onClick:q,size:"small",className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"Generate Report"}),e(n,{variant:"outlined",startIcon:e(oe,{}),onClick:x,size:"small",className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Export"})]})]}),e(m,{in:!0,timeout:1e3,children:t("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg group-hover:bg-blue-500/30 transition-colors",children:e(G,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-blue-400",children:((f=(v=l==null?void 0:l.baseline)==null?void 0:v.overall)==null?void 0:f.performanceScore)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Performance Score"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg group-hover:bg-green-500/30 transition-colors",children:e(E,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-green-400",children:((w=(N=l==null?void 0:l.baseline)==null?void 0:N.overall)==null?void 0:w.totalIssues)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Issues Detected"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg group-hover:bg-purple-500/30 transition-colors",children:e(te,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e("div",{className:"text-xl font-bold text-purple-400",children:((C=(k=(y=l==null?void 0:l.comparison)==null?void 0:y.summary)==null?void 0:k.regressions)==null?void 0:C.length)||0}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Regressions"})]})]})}),e("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/15 transition-all duration-300 group",children:t("div",{className:"flex items-center gap-3",children:[e("div",{className:"p-2 bg-orange-500/20 rounded-lg group-hover:bg-orange-500/30 transition-colors",children:e(ne,{className:"w-5 h-5 text-orange-400"})}),t("div",{children:[e("div",{className:"text-lg font-bold text-orange-400",children:((F=l==null?void 0:l.lastUpdated)==null?void 0:F.toLocaleTimeString())||"Never"}),e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Last Updated"})]})]})})]})})]})})]}),t("div",{className:"px-6 pb-6",children:[D.map((a,s)=>e(de,{severity:a.type,className:"mb-4",children:a.message},s)),e(m,{in:!0,timeout:1200,children:t("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[e("div",{className:"lg:col-span-1",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-center",children:[e("div",{className:"text-lg font-semibold text-white mb-4",children:"Overall Performance"}),e(H,{score:((T=(S=l==null?void 0:l.baseline)==null?void 0:S.overall)==null?void 0:T.performanceScore)||0}),t("div",{className:"text-xs text-gray-400 mt-4",children:["Last Updated: ",(P=l==null?void 0:l.lastUpdated)==null?void 0:P.toLocaleTimeString()]})]})}),e("div",{className:"lg:col-span-3",children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“Š Core Web Vitals"}),e(K,{vitals:(I=(j=l==null?void 0:l.baseline)==null?void 0:j.overall)==null?void 0:I.coreWebVitals})]})})]})}),e(m,{in:!0,timeout:1400,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 mb-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ“¦ Feature Module Performance"}),e(X,{features:(R=l==null?void 0:l.baseline)==null?void 0:R.features})]})}),e(m,{in:!0,timeout:1600,children:t("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6",children:[e("div",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:"ðŸ”§ Quick Actions"}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e(n,{fullWidth:!0,variant:"outlined",startIcon:e(G,{}),onClick:()=>window.open("/storage/app/reports/performance-dashboard.html","_blank"),className:"border-blue-400/50 text-blue-400 hover:bg-blue-500/10",children:"View Full Dashboard"}),e(n,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/technical-report.md","_blank"),className:"border-green-400/50 text-green-400 hover:bg-green-500/10",children:"Technical Report"}),e(n,{fullWidth:!0,variant:"outlined",onClick:()=>window.open("/storage/app/reports/executive-summary.md","_blank"),className:"border-purple-400/50 text-purple-400 hover:bg-purple-500/10",children:"Executive Summary"}),e(n,{fullWidth:!0,variant:"outlined",onClick:x,className:"border-orange-400/50 text-orange-400 hover:bg-orange-500/10",children:"Download Data"})]})]})})]})]})})})})})]})};pe.layout=h=>e(ae,{children:h});export{pe as default};
