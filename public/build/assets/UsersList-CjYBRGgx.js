import{r as d,j as t,a as e,M as ue,h as Y,t as It,Y as ge,V as fe,F as wt,b as at,Q as jt,f as Q,g as K,S as st}from"./app-DDhVNfvV.js";import{n as lt,o as it,p as he,q as nt,B as U,x as xe,I as pe,i as _,j as F,u as ot,b as be,a as dt,ag as ct,G as At,ah as Ut,d as Tt,v as $t,h as Dt,A as Lt}from"./App-CULBC9Jb.js";import{u as ve,o as we,G as Et,F as Ot}from"./GlassCard-B8deHOrc.js";import{P as zt}from"./PageHeader-qfMvUU9K.js";import{S as Mt}from"./StatsCards-CaEaffu4.js";import{F as qt}from"./EllipsisVerticalIcon-0SYcdA89.js";import{F as me}from"./UserIcon-BZDmR83e.js";import{F as yt}from"./PencilIcon-BtapQh-d.js";import{F as de}from"./BuildingOfficeIcon-BXNAJj1w.js";import{a as Nt}from"./QuestionMarkCircleIcon-ClI4UiU9.js";import{F as Vt}from"./EnvelopeIcon-jGHS91X9.js";import{t as Wt,a as Bt,b as Ht,c as Gt,d as Jt,e as Qt}from"./chunk-F3UDT23P-Bon0qFEG.js";import{p as _t}from"./chunk-O5I3QTYU-BlPqa12Y.js";import{s as Kt}from"./XMarkIcon-CRGrHH6E.js";import{u as Pt}from"./chunk-R6AK6OQ4-DKmNo5vD.js";import{C as Yt}from"./Clear-Brrz3geX.js";import{G as Xt}from"./GlassDialog-BbPdd5-L.js";import{B as ce,T as y}from"./logo-DoLGM3I0.js";import{D as Zt}from"./DialogTitle-DVsFppiK.js";import{A as er}from"./Avatar-pF7eTFjT.js";import{P as tr}from"./PhotoCamera-B6CN_jSg.js";import{T as $,I as ne,F as oe}from"./TextField-DHyBbceL.js";import{M as D}from"./Select-G4UAMmZq.js";import{D as rr,a as ar}from"./DialogContent-DzqEob6e.js";import{L as sr}from"./LoadingButton-CPf4VyNc.js";import{s as X,l as ee}from"./chunk-2GIFKCNQ-B1Kwyu4F.js";import{F as mt}from"./CheckCircleIcon-BkPxWqsz.js";import{F as ut}from"./ShieldCheckIcon-B8pnYfIx.js";import{F as lr,a as ir}from"./UserPlusIcon-BpzyyKkk.js";import{F as nr}from"./ClockIcon-UBQM4q2z.js";import{F as ht}from"./ChartBarIcon-CzsPYg0y.js";import{F as or}from"./ExclamationTriangleIcon-3tpAB86s.js";import{F as dr}from"./TableCellsIcon-Dy_hxx65.js";import{C as cr}from"./CircularProgress-ukpRde3Q.js";import{i as mr}from"./chunk-6MDMHKHV-DNEscIMF.js";import{b as ur}from"./chunk-57V4RE7B-SGFU28YJ.js";import{c as te}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import"./app-CYwLuuRk.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./UserGroupIcon-CFQYzcyB.js";import"./CreditCardIcon-nnu7lg95.js";import"./KeyIcon-CAZJdP6I.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./create-visual-element-DIA5r6xh.js";import"./chunk-D5XJWRAV-BEd1Mod5.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./useHasTabbableChild-BMncZCCk.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./index-CokAva9Y.js";import"./useFormReset-Dv_1w4_q.js";import"./Dialog-B0tTkTVF.js";import"./useSlot-vNKPmkVG.js";import"./Popover-DGnHN2Gx.js";import"./Button-PH-Yt16S.js";import"./useListState-D8r1zUCw.js";import"./useLabel-C1JBDqVQ.js";import"./chunk-M3MASYO7-DaLySJZS.js";const hr=({allUsers:i,roles:C,isMobile:v,isTablet:g,setUsers:L,pagination:f,onPageChange:N,onRowsPerPageChange:k,totalUsers:I=0,onEdit:B,loading:m=!1,updateUserOptimized:Z,deleteUserOptimized:o,toggleUserStatusOptimized:z,updateUserRolesOptimized:M})=>{const[A,H]=d.useState({});ve();const u=(r,a,w)=>{H(c=>({...c,[`${r}-${a}`]:w}))},E=(r,a)=>A[`${r}-${a}`]||!1;async function q(r,a){u(r,"role",!0);const w=new Promise(async(c,p)=>{var O;try{const l=await axios.post(route("user.updateRole",{id:r}),{roles:a});l.status===200&&(M&&M(r,a),c([l.data.message||"Role updated successfully"]))}catch(l){((O=l.response)==null?void 0:O.status)===422?p(l.response.data.errors||["Failed to update user role."]):p(["An unexpected error occurred. Please try again later."])}finally{u(r,"role",!1)}});return U.promise(w,{pending:"Updating employee role...",success:{render({data:c}){return c.join(", ")}},error:{render({data:c}){return Array.isArray(c)?c.join(", "):c}}}),w}const G=d.useMemo(()=>{const r=[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"DEPARTMENT",uid:"department"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}];return!v&&!g?r.splice(3,0,{name:"PHONE",uid:"phone"}):v&&r.splice(r.findIndex(a=>a.uid==="department"),1),r},[v,g]),T=async(r,a)=>{if(!E(r,"status")){u(r,"status",!0);try{z?(z(r,!a),U.success(`User status ${a?"deactivated":"activated"} successfully`)):L&&(L(w=>w.map(c=>c.id===r?{...c,active:!a}:c)),U.success(`User status ${a?"deactivated":"activated"} successfully`))}catch(w){console.error("Error toggling user status:",w),U.error("Failed to update user status")}finally{u(r,"status",!1)}}},V=(r,a,w)=>{var p;const c=r[a];switch(a){case"sl":const P=(f!=null&&f.currentPage&&(f!=null&&f.perPage)?Number((f.currentPage-1)*f.perPage):0)+(typeof w=="number"?w:0)+1;return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:P})})});case"user":return e(Pt,{avatarProps:{radius:"lg",src:r==null?void 0:r.profile_image,size:"sm",fallback:e(me,{className:"w-4 h-4"})},name:(r==null?void 0:r.name)||"",classNames:{name:"font-semibold text-foreground",description:"text-default-500"}});case"email":return t("div",{className:"flex items-center",children:[e(Vt,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:r.email})]});case"phone":return t("div",{className:"flex items-center",children:[e(Nt,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:r.phone||"N/A"})]});case"department":return t("div",{className:"flex items-center",children:[e(de,{className:"w-4 h-4 text-default-400 mr-2"}),e("span",{className:"text-sm",children:(r==null?void 0:r.department)||"N/A"})]});case"status":return t("div",{className:"flex items-center justify-center",children:[e(Kt,{size:"sm",color:r.active?"success":"danger",isSelected:r.active,isDisabled:E(r.id,"status"),startContent:E(r.id,"status")?e(ue,{size:"sm"}):null,onChange:()=>T(r.id,r.active),classNames:{wrapper:"group-data-[selected=true]:bg-success-500 group-data-[selected=false]:bg-danger-500"}}),e("span",{className:"ml-2 text-xs",children:r.active?"Active":"Inactive"})]});case"roles":const j=((p=r.roles)==null?void 0:p.map(h=>typeof h=="object"&&h!==null?h.name:h))||[],b=new Set(j),W=Array.from(b).join(", ")||"No Roles";return e("div",{className:"flex items-center",children:t(nt,{isDisabled:E(r.id,"role"),className:"max-w-[220px]",children:[e(lt,{children:e(Y,{className:"capitalize",variant:"bordered",size:"sm",startContent:E(r.id,"role")?e(ue,{size:"sm"}):null,children:W})}),e(it,{disallowEmptySelection:!1,"aria-label":"Multiple selection example",closeOnSelect:!1,selectedKeys:b,selectionMode:"multiple",variant:"flat",onSelectionChange:h=>{const J=Array.from(h);q(r.id,J)},children:(C||[]).map(h=>e(he,{children:typeof h=="object"&&h!==null?h.name:h},typeof h=="object"&&h!==null?h.name:h))})]})});case"actions":return e("div",{className:"flex justify-center items-center",children:t(nt,{children:[e(lt,{children:e(Y,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",children:e(qt,{className:"w-4 h-4"})})}),t(it,{"aria-label":"User Actions",children:[e(he,{textValue:"View Profile",href:route("profile",{user:r.id}),as:It,className:"text-blue-500",startContent:e(me,{className:"w-4 h-4"}),children:"View Profile"}),e(he,{textValue:"Edit User",onPress:h=>{h.preventDefault(),B&&B(r)},className:"text-amber-500",startContent:e(yt,{className:"w-4 h-4"}),children:"Edit"})]})]})});default:return c}};return t("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg",style:{maxHeight:"calc(100vh - 200px)"},children:[e("div",{className:"overflow-auto flex-grow",children:t(Wt,{"aria-label":"Users table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},children:[e(Bt,{columns:G,children:r=>e(Ht,{align:r.uid==="actions"||r.uid==="sl"?"center":"start",width:r.uid==="sl"?60:void 0,children:r.name},r.uid)}),e(Gt,{items:i||[],emptyContent:"No users found",loadingContent:e(ue,{}),isLoading:m,children:(r,a)=>{const w=i?i.findIndex(c=>c.id===r.id):a;return e(Jt,{children:c=>e(Qt,{children:V(r,c,w)})},r.id)}})]})}),!i||!I||m?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,I)," of ",I," users"]}),e(_t,{total:Math.ceil(I/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:N,size:v?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]})]})};var re={},pt;function pr(){if(pt)return re;pt=1;var i=we();Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var C=i(xe()),v=ge();return re.default=(0,C.default)((0,v.jsx)("path",{d:"M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H5.3l.85-1.47L4.85 7 4 8.47 3.15 7l-1.3.75.85 1.47H1v1.5h1.7l-.85 1.48zm6.7-.75 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H15v-1.5h-1.7l.85-1.47-1.3-.75L12 8.47 11.15 7l-1.3.75.85 1.47H9v1.5h1.7zM23 9.22h-1.7l.85-1.47-1.3-.75L20 8.47 19.15 7l-1.3.75.85 1.47H17v1.5h1.7l-.85 1.48 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H23z"}),"Password"),re}var br=pr();const gr=fe(br);var ae={},bt;function fr(){if(bt)return ae;bt=1;var i=we();Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0;var C=i(xe()),v=ge();return ae.default=(0,C.default)((0,v.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),ae}var xr=fr();const gt=fe(xr);var se={},ft;function vr(){if(ft)return se;ft=1;var i=we();Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0;var C=i(xe()),v=ge();return se.default=(0,C.default)((0,v.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),se}var wr=vr();const xt=fe(wr),vt=({user:i,allUsers:C,departments:v,designations:g,setUsers:L,open:f,closeModal:N,editMode:k=!1})=>{const[I,B]=d.useState(!1),[m,Z]=d.useState({id:(i==null?void 0:i.id)||"",name:(i==null?void 0:i.name)||"",user_name:(i==null?void 0:i.user_name)||"",gender:(i==null?void 0:i.gender)||"",birthday:(i==null?void 0:i.birthday)||"",date_of_joining:(i==null?void 0:i.date_of_joining)||"",address:(i==null?void 0:i.address)||"",employee_id:(i==null?void 0:i.employee_id)||"",phone:(i==null?void 0:i.phone)||"",email:(i==null?void 0:i.email)||"",department_id:(i==null?void 0:i.department_id)||"",designation_id:(i==null?void 0:i.designation_id)||"",report_to:(i==null?void 0:i.report_to)||"",password:"",confirmPassword:"",roles:(i==null?void 0:i.roles)||[]}),[o,z]=d.useState({}),[M,A]=d.useState(!1),[H,u]=d.useState(!1),[E,q]=d.useState((i==null?void 0:i.profile_image)||null),[G,T]=d.useState(null),[V,R]=d.useState(C),r=ve();d.useEffect(()=>{i!=null&&i.profile_image&&q(i.profile_image)},[i]);const a=async l=>{var j;l.preventDefault(),A(!0);const P=new FormData;if(Object.keys(m).forEach(b=>{b==="roles"&&Array.isArray(m[b])?m[b].forEach((W,h)=>{P.append(`roles[${h}]`,W)}):m[b]!==null&&m[b]!==void 0&&P.append(b,m[b])}),G){const b=G.type;if(["image/jpeg","image/jpg","image/png"].includes(b))P.append("profile_image",G);else{U.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}),A(!1);return}}try{const b=k?route("updateUser",{id:i.id}):route("addUser"),W=k?"put":"post",h=await axios[W](b,P);h.status===200&&(L&&L(k?J=>J.map(le=>le.id===h.data.user.id?h.data.user:le):J=>[...J,h.data.user]),U.success(((j=h.data.messages)==null?void 0:j.length)>0?h.data.messages.join(" "):`User ${k?"updated":"added"} successfully`,{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}),N())}catch(b){A(!1),w(b)}finally{A(!1)}},w=l=>{l.response?l.response.status===422?(z(l.response.data.errors||{}),U.error(l.response.data.error||`Failed to ${k?"update":"add"} user.`,{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}})):U.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}):l.request?U.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}):U.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}})},c=l=>{const P=l.target.files[0];if(P){const j=URL.createObjectURL(P);q(j),T(P)}},p=(l,P)=>{Z(j=>({...j,[l]:P})),o[l]&&z(j=>{const b={...j};return delete b[l],b})},O=()=>{B(!I)};return t(Xt,{open:f,onClose:N,fullWidth:!0,maxWidth:"md",sx:{"& .MuiPaper-root":{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:r.glassCard.background,border:r.glassCard.border,borderRadius:"16px",color:r.palette.text.primary,boxShadow:r.glassCard.boxShadow}},children:[e(Zt,{sx:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",pb:2},children:t(ce,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e(y,{variant:"h6",component:"div",sx:{fontWeight:600},children:k?"Edit User":"Add New User"}),e(pe,{"aria-label":"close",onClick:N,sx:{color:r.palette.grey[500],"&:hover":{color:r.palette.primary.main}},children:e(Yt,{})})]})}),e(rr,{sx:{pt:3},children:e("form",{onSubmit:a,children:t(_,{container:!0,spacing:3,children:[e(_,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mb:2},children:t(ce,{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),sx:{position:"relative"},children:[e(er,{src:E,alt:"Profile",sx:{width:120,height:120,border:"4px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",filter:H?"brightness(70%)":"brightness(100%)",transition:"all 0.3s ease"}}),t(ce,{component:"label",htmlFor:"icon-button-file",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:H?1:0,transition:"opacity 0.3s ease",cursor:"pointer"},children:[e("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:c}),e(tr,{sx:{color:"white",fontSize:32}})]})]})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Full Name",value:m.name,onChange:l=>p("name",l.target.value),error:!!o.name,helperText:o.name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Username",value:m.user_name,onChange:l=>p("user_name",l.target.value),error:!!o.user_name,helperText:o.user_name,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Email",type:"email",value:m.email,onChange:l=>p("email",l.target.value),error:!!o.email,helperText:o.email,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}},required:!0})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Phone",value:m.phone,onChange:l=>p("phone",l.target.value),error:!!o.phone,helperText:o.phone,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(_,{item:!0,xs:12,md:6,children:t(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(ne,{id:"department-label",sx:{color:r.palette.text.secondary},children:"Department"}),t(X,{labelId:"department-label",value:m.department_id,onChange:l=>p("department_id",l.target.value),label:"Department",error:!!o.department_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(D,{value:"",children:e("em",{children:"None"})}),v==null?void 0:v.map(l=>e(D,{value:l.id,children:l.name},l.id))]}),o.department_id&&e(oe,{error:!0,children:o.department_id})]})}),e(_,{item:!0,xs:12,md:6,children:t(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(ne,{id:"designation-label",sx:{color:r.palette.text.secondary},children:"Designation"}),t(X,{labelId:"designation-label",value:m.designation_id,onChange:l=>p("designation_id",l.target.value),label:"Designation",error:!!o.designation_id,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(D,{value:"",children:e("em",{children:"None"})}),g==null?void 0:g.map(l=>e(D,{value:l.id,children:l.name},l.id))]}),o.designation_id&&e(oe,{error:!0,children:o.designation_id})]})}),e(_,{item:!0,xs:12,md:6,children:t(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(ne,{id:"gender-label",sx:{color:r.palette.text.secondary},children:"Gender"}),t(X,{labelId:"gender-label",value:m.gender,onChange:l=>p("gender",l.target.value),label:"Gender",error:!!o.gender,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(D,{value:"",children:e("em",{children:"Select Gender"})}),e(D,{value:"male",children:"Male"}),e(D,{value:"female",children:"Female"}),e(D,{value:"other",children:"Other"})]}),o.gender&&e(oe,{error:!0,children:o.gender})]})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Employee ID",value:m.employee_id,onChange:l=>p("employee_id",l.target.value),error:!!o.employee_id,helperText:o.employee_id,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Date of Birth",type:"date",value:m.birthday,onChange:l=>p("birthday",l.target.value),error:!!o.birthday,helperText:o.birthday,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:r.palette.text.secondary}}})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Date of Joining",type:"date",value:m.date_of_joining,onChange:l=>p("date_of_joining",l.target.value),error:!!o.date_of_joining,helperText:o.date_of_joining,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{shrink:!0,sx:{color:r.palette.text.secondary}}})})}),e(_,{item:!0,xs:12,md:6,children:t(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(ne,{id:"report-to-label",sx:{color:r.palette.text.secondary},children:"Reports To"}),t(X,{labelId:"report-to-label",value:m.report_to,onChange:l=>p("report_to",l.target.value),label:"Reports To",error:!!o.report_to,sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[e(D,{value:"",children:e("em",{children:"None"})}),V==null?void 0:V.filter(l=>l.id!==m.id).map(l=>e(D,{value:l.id,children:l.name},l.id))]}),o.report_to&&e(oe,{error:!0,children:o.report_to})]})}),e(_,{item:!0,xs:12,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Address",multiline:!0,rows:3,value:m.address,onChange:l=>p("address",l.target.value),error:!!o.address,helperText:o.address,InputProps:{sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),!k&&t(wt,{children:[e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Password",type:I?"text":"password",value:m.password,onChange:l=>p("password",l.target.value),error:!!o.password,helperText:o.password,required:!k,InputProps:{endAdornment:e(pe,{"aria-label":"toggle password visibility",onClick:O,edge:"end",children:I?e(gt,{}):e(xt,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})}),e(_,{item:!0,xs:12,md:6,children:e(F,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:e($,{label:"Confirm Password",type:I?"text":"password",value:m.confirmPassword,onChange:l=>p("confirmPassword",l.target.value),error:!!o.confirmPassword,helperText:o.confirmPassword||(m.password!==m.confirmPassword&&m.confirmPassword?"Passwords do not match":""),required:!k,InputProps:{endAdornment:e(pe,{"aria-label":"toggle password visibility",onClick:O,edge:"end",children:I?e(gt,{}):e(xt,{})}),sx:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"}},InputLabelProps:{sx:{color:r.palette.text.secondary}}})})})]})]})})}),t(ar,{sx:{justifyContent:"space-between",p:3,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(Button,{onClick:N,variant:"bordered",color:"default",size:"lg",className:"bg-white/5 hover:bg-white/10 border border-white/10",children:"Cancel"}),e(sr,{onClick:a,loading:M,loadingPosition:"start",startIcon:e(gr,{}),variant:"contained",sx:{background:"linear-gradient(45deg, #3a7bd5 0%, #2456bd 100%)",boxShadow:"0 4px 20px 0 rgba(58, 123, 213, 0.4)","&:hover":{background:"linear-gradient(45deg, #2456bd 0%, #1a3c8a 100%)"}},children:k?"Update User":"Add User"})]})]})},yr=({title:i,roles:C})=>{var ye,Ne,_e,Pe,Ce,ke,Re,Se,Fe,Ie,je,Ae,Ue,Te,$e,De,Le,Ee,Oe,ze,Me,qe,Ve,We,Be,He,Ge;const v=ve(),g=ot(v.breakpoints.down("sm")),L=ot(v.breakpoints.down("md")),[f,N]=d.useState([]),[k,I]=d.useState(!0),[B,m]=d.useState(null),[Z,o]=d.useState(0),[z,M]=d.useState(1),[A,H]=d.useState(null),[u,E]=d.useState({search:"",role:"all",status:"all",department:"all"}),[q,G]=d.useState(!1),[T,V]=d.useState("table"),[R,r]=d.useState({currentPage:1,perPage:10,total:f.length}),[a,w]=d.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),c=d.useMemo(()=>({data:f,total:Z,current_page:R.currentPage,per_page:R.perPage,last_page:z}),[f,Z,R.currentPage,R.perPage,z]),p=d.useCallback(async()=>{try{const{data:s}=await at.get(route("users.stats"));s.stats&&w(s.stats)}catch(s){console.error("Error fetching user stats:",s)}},[]),O=d.useCallback(async()=>{I(!0);try{const s=await at.get(route("users.paginate"),{params:{page:R.currentPage,perPage:R.perPage,search:u.search||void 0,role:u.role!=="all"?u.role:void 0,status:u.status!=="all"?u.status:void 0,department:u.department!=="all"?u.department:void 0}});if(s.status===200){const{users:n}=s.data;n.data&&Array.isArray(n.data)?(N(n.data),o(n.total||n.data.length),M(n.last_page||1)):Array.isArray(n)?(N(n),o(n.length),M(1)):(console.error("Unexpected users data format:",n),N([]),o(0),M(1))}}catch(s){console.error("Error fetching users:",s),U.error("Failed to load users data"),N([])}finally{I(!1)}},[u,R.currentPage,R.perPage]);d.useEffect(()=>{O()},[O]),d.useEffect(()=>{p();const s=setInterval(p,6e4);return()=>clearInterval(s)},[p]);const l=(s,n)=>{E(x=>({...x,[s]:n})),r(x=>({...x,currentPage:1}))},P=s=>{r(n=>({...n,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},j=s=>{r(n=>({...n,currentPage:1,perPage:s}))},b=d.useCallback((s,n=null)=>{H(s),m(n)},[]),W=d.useCallback(()=>{H(null),m(null)},[]),h=d.useCallback(s=>{N(s)},[]),J=d.useCallback(s=>{N(n=>n.map(x=>x.id===s.id?{...x,...s}:x))},[]),le=d.useCallback(s=>{N(n=>n.filter(x=>x.id!==s)),p()},[p]),Ct=d.useCallback((s,n)=>{N(x=>x.map(S=>S.id===s?{...S,active:n}:S)),p()},[p]),kt=d.useCallback((s,n)=>{N(x=>x.map(S=>S.id===s?{...S,roles:n}:S))},[]),Rt=({user:s,index:n})=>{var x;return e(Q,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>st.visit(route("profile",{user:s.id})),children:t(K,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e(Pt,{avatarProps:{radius:"lg",src:s==null?void 0:s.profile_image,size:"md",fallback:e(me,{className:"w-5 h-5"})},classNames:{name:"font-semibold text-foreground text-sm",description:"text-default-500 text-xs"}}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e("p",{className:"text-default-500 text-xs",children:s.email})]}),e(Y,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:S=>{S.stopPropagation(),st.visit(route("profile",{user:s.id}))},children:e(yt,{className:"w-4 h-4"})})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[s.phone&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Nt,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:s.phone})]}),(s.department||s.department_id)&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(de,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:typeof s.department=="string"?s.department:"N/A"})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(te,{size:"sm",variant:s.active?"solid":"bordered",color:s.active?"success":"danger",className:"text-xs",startContent:s.active?e(mt,{className:"w-3 h-3"}):e(dt,{className:"w-3 h-3"}),children:s.active?"Active":"Inactive"}),(x=s.roles)==null?void 0:x.map((S,ie)=>e(te,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(me,{className:"w-3 h-3"}),children:S},ie))]})]})})},St=d.useMemo(()=>{var s,n,x,S,ie,Je,Qe,Ke,Ye,Xe,Ze,et,tt,rt;return[{title:"Total Users",value:((s=a==null?void 0:a.overview)==null?void 0:s.total_users)||0,icon:e(be,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:((n=a==null?void 0:a.overview)==null?void 0:n.active_users)||0,icon:e(mt,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((S=(x=a==null?void 0:a.health)==null?void 0:x.status_ratio)==null?void 0:S.active_percentage)||0}% Active`},{title:"Inactive Users",value:((ie=a==null?void 0:a.overview)==null?void 0:ie.inactive_users)||0,icon:e(dt,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${((Qe=(Je=a==null?void 0:a.health)==null?void 0:Je.status_ratio)==null?void 0:Qe.inactive_percentage)||0}% Inactive`},{title:"Total Roles",value:((Ke=a==null?void 0:a.overview)==null?void 0:Ke.total_roles)||0,icon:e(ut,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${((Xe=(Ye=a==null?void 0:a.health)==null?void 0:Ye.system_metrics)==null?void 0:Xe.role_coverage)||0}%`,icon:e(lr,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:((et=(Ze=a==null?void 0:a.activity)==null?void 0:Ze.recent_registrations)==null?void 0:et.recently_active)||0,icon:e(nr,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${((tt=a==null?void 0:a.quick_metrics)==null?void 0:tt.system_health_score)||0}%`,icon:e(ct,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:"Departments",value:((rt=a==null?void 0:a.overview)==null?void 0:rt.total_departments)||0,icon:e(de,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Department diversity"}]},[a]),Ft=d.useMemo(()=>{const s=[];return s.push({label:g?"Add":"Add User",icon:e(ir,{className:"w-4 h-4"}),onPress:()=>b("add"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),s.push({label:g?"":"Export",isIconOnly:g,icon:e(ht,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),s},[g,b]);return t(wt,{children:[e(jt,{title:i}),A==="add"&&e(vt,{user:null,open:A==="add",setUsers:h,closeModal:W,editMode:!1}),A==="edit"&&B&&e(vt,{user:B,open:A==="edit",setUsers:h,closeModal:W,editMode:!0}),e(ce,{sx:{display:"flex",justifyContent:"center",p:2},children:e(At,{in:!0,children:e(Et,{children:e(zt,{title:"Users Management",subtitle:"Manage users accounts and roles",icon:e(be,{className:"w-8 h-8"}),actionButtons:Ft,children:t("div",{className:"p-4 sm:p-6",children:[e(Mt,{stats:St,className:"mb-6"}),t("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6",children:[e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e(Ut,{className:"w-5 h-5 text-purple-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"Role Distribution"}),e(y,{variant:"caption",className:"text-default-500",children:"User roles breakdown"})]})]}),e("div",{className:"space-y-3",children:(Ne=(ye=a==null?void 0:a.distribution)==null?void 0:ye.by_role)==null?void 0:Ne.slice(0,5).map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"}),e("span",{className:"text-sm text-foreground truncate",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})}),e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e(de,{className:"w-5 h-5 text-blue-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"Department Distribution"}),e(y,{variant:"caption",className:"text-default-500",children:"Users by department"})]})]}),e("div",{className:"space-y-3",children:(Pe=(_e=a==null?void 0:a.distribution)==null?void 0:_e.by_department)==null?void 0:Pe.slice(0,5).map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-blue-400 to-cyan-400"}),e("span",{className:"text-sm text-foreground truncate",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})}),e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-red-500/20 rounded-lg",children:e(ut,{className:"w-5 h-5 text-red-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"Security Metrics"}),e(y,{variant:"caption",className:"text-default-500",children:"Access control overview"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users with Roles"}),e("span",{className:"text-sm font-medium text-green-400",children:((ke=(Ce=a==null?void 0:a.security)==null?void 0:Ce.access_metrics)==null?void 0:ke.users_with_roles)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Users without Roles"}),e("span",{className:"text-sm font-medium text-red-400",children:((Se=(Re=a==null?void 0:a.security)==null?void 0:Re.access_metrics)==null?void 0:Se.users_without_roles)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Admin Users"}),e("span",{className:"text-sm font-medium text-orange-400",children:((Ie=(Fe=a==null?void 0:a.security)==null?void 0:Fe.access_metrics)==null?void 0:Ie.admin_users)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Role Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[((Ae=(je=a==null?void 0:a.health)==null?void 0:je.system_metrics)==null?void 0:Ae.role_coverage)||0,"%"]})]})]})]})}),e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e(ht,{className:"w-5 h-5 text-green-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"Activity Trends"}),e(y,{variant:"caption",className:"text-default-500",children:"Recent user activity"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Recently Active"}),e("span",{className:"text-sm font-medium text-green-400",children:((Te=(Ue=a==null?void 0:a.activity)==null?void 0:Ue.recent_registrations)==null?void 0:Te.recently_active)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (30 days)"}),e("span",{className:"text-sm font-medium text-blue-400",children:((De=($e=a==null?void 0:a.activity)==null?void 0:$e.recent_registrations)==null?void 0:De.new_users_30_days)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"New (90 days)"}),e("span",{className:"text-sm font-medium text-cyan-400",children:((Ee=(Le=a==null?void 0:a.activity)==null?void 0:Le.recent_registrations)==null?void 0:Ee.new_users_90_days)||0})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Growth Rate"}),t("span",{className:"text-sm font-medium text-purple-400",children:[((Oe=a==null?void 0:a.activity)==null?void 0:Oe.user_growth_rate)||0,"%"]})]})]})]})}),e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e(ct,{className:"w-5 h-5 text-teal-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"System Health"}),e(y,{variant:"caption",className:"text-default-500",children:"Overall system metrics"})]})]}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Health Score"}),t("span",{className:"text-sm font-medium text-teal-400",children:[((ze=a==null?void 0:a.quick_metrics)==null?void 0:ze.system_health_score)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Activation Rate"}),t("span",{className:"text-sm font-medium text-green-400",children:[((qe=(Me=a==null?void 0:a.health)==null?void 0:Me.system_metrics)==null?void 0:qe.user_activation_rate)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Dept. Coverage"}),t("span",{className:"text-sm font-medium text-blue-400",children:[((We=(Ve=a==null?void 0:a.health)==null?void 0:Ve.system_metrics)==null?void 0:We.department_coverage)||0,"%"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-foreground",children:"Total Departments"}),e("span",{className:"text-sm font-medium text-purple-400",children:((Be=a==null?void 0:a.overview)==null?void 0:Be.total_departments)||0})]})]})]})}),e(Q,{className:"bg-white/5 backdrop-blur-md border-white/10",children:t(K,{className:"p-4",children:[t("div",{className:"flex items-center gap-3 mb-4",children:[e("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e(or,{className:"w-5 h-5 text-yellow-400"})}),t("div",{children:[e(y,{variant:"h6",className:"font-semibold text-foreground",children:"Status Breakdown"}),e(y,{variant:"caption",className:"text-default-500",children:"User status distribution"})]})]}),e("div",{className:"space-y-3",children:(Ge=(He=a==null?void 0:a.distribution)==null?void 0:He.by_status)==null?void 0:Ge.map((s,n)=>t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-3 h-3 rounded-full ${s.name==="Active"?"bg-green-400":s.name==="Inactive"?"bg-red-400":"bg-gray-400"}`}),e("span",{className:"text-sm text-foreground",children:s.name})]}),t("div",{className:"text-right",children:[e("span",{className:"text-sm font-medium text-foreground",children:s.count}),t("span",{className:"text-xs text-default-500 ml-1",children:["(",s.percentage,"%)"]})]})]},n))})]})})]}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(mr,{label:"Search Users",variant:"bordered",placeholder:"Search by name, email or phone...",value:u.search,onValueChange:s=>l("search",s),startContent:e(Tt,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:g?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(ur,{variant:"bordered",className:"bg-white/5",children:[t(Y,{isIconOnly:g,color:T==="table"?"primary":"default",onPress:()=>V("table"),className:T==="table"?"bg-blue-500/20":"",children:[e(dr,{className:"w-4 h-4"}),!g&&e("span",{className:"ml-1",children:"Table"})]}),t(Y,{isIconOnly:g,color:T==="grid"?"primary":"default",onPress:()=>V("grid"),className:T==="grid"?"bg-blue-500/20":"",children:[e($t,{className:"w-4 h-4"}),!g&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(Y,{isIconOnly:g,variant:"bordered",onPress:()=>G(!q),className:q?"bg-purple-500/20":"bg-white/5",children:[e(Dt,{className:"w-4 h-4"}),!g&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),q&&e(Ot,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(X,{label:"Status",variant:"bordered",selectedKeys:u.status!=="all"?[u.status]:[],onSelectionChange:s=>{const n=Array.from(s)[0]||"all";l("status",n)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(ee,{value:"all",children:"All Statuses"},"all"),e(ee,{value:"active",children:"Active Only"},"active"),e(ee,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(X,{label:"Role",variant:"bordered",selectedKeys:u.role!=="all"?[u.role]:[],onSelectionChange:s=>{const n=Array.from(s)[0]||"all";l("role",n)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(ee,{value:"all",children:"All Roles"},"all"),C==null?void 0:C.map(s=>e(ee,{value:s.toLowerCase(),children:s},s.toLowerCase()))]})]}),(u.search||u.status!=="all"||u.role!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[u.search&&t(te,{variant:"flat",color:"primary",size:"sm",onClose:()=>l("search",""),children:["Search: ",u.search]}),u.status!=="all"&&t(te,{variant:"flat",color:"secondary",size:"sm",onClose:()=>l("status","all"),children:["Status: ",u.status==="active"?"Active":"Inactive"]}),u.role!=="all"&&t(te,{variant:"flat",color:"warning",size:"sm",onClose:()=>l("role","all"),children:["Role: ",u.role]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(y,{variant:"h6",className:"font-semibold text-foreground",children:[T==="table"?"User Table":"User Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",c.total||0," ",c.total===1?"user":"users",")"]})]})}),k?t("div",{className:"text-center py-8",children:[e(cr,{size:40}),e(y,{className:"mt-4",color:"textSecondary",children:"Loading users data..."})]}):T==="table"?e(hr,{allUsers:c.data,roles:C,setUsers:h,isMobile:g,isTablet:L,pagination:R,onPageChange:P,onRowsPerPageChange:j,totalUsers:c.total,loading:k,onEdit:s=>b("edit",s),updateUserOptimized:J,deleteUserOptimized:le,toggleUserStatusOptimized:Ct,updateUserRolesOptimized:kt}):t("div",{className:"p-4",children:[c.data&&c.data.length>0?e("div",{className:`grid gap-4 ${g?"grid-cols-1":L?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:c.data.map((s,n)=>e(Rt,{user:s,index:n},s.id))}):t("div",{className:"text-center py-8",children:[e(be,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(y,{variant:"body1",color:"textSecondary",children:"No users found"}),e(y,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),c.data&&c.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(_t,{total:Math.ceil(c.total/R.perPage),initialPage:R.currentPage,page:R.currentPage,onChange:P,size:g?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};yr.layout=i=>e(Lt,{children:i});export{yr as default};
