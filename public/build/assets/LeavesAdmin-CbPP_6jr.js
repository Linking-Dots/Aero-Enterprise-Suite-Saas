import{V as J,j as m,a as e,M as K,F as N}from"./app-DvzcsS5J.js";import{r as t,e as Q,h as X,f as Z,a as b,G as v,T as D,B as $}from"./vendor-DrHmFQFl.js";import{d as U}from"./Search-33oOjOzR.js";import{A as ee,G as te}from"./App-BhpBsmfq.js";import{L as ae,D as oe,a as se}from"./DeleteLeaveForm-DPpadXo5.js";import{d as re}from"./dayjs.min-DVDxNhg-.js";import{A as ne}from"./Add-id6j6Uy5.js";import{i as E}from"./chunk-IR2E3HZF-B_9GN64u.js";import"./Edit-CtMoSlB4.js";import"./chunk-QEQ4EHOG-Cnv3QZd2.js";import"./DOMLayoutDelegate-Be0YFCgH.js";import"./useLabel-NnqZEut0.js";import"./chunk-NCVCYSZZ-DOsrEWVx.js";import"./chunk-YRZGWF2W-wyJ6pehp.js";import"./chunk-KBN3H6OQ-CflUwqGK.js";import"./useFormValidationState-HbQXXc6L.js";import"./chunk-MRXO6UUP-Dq6wPGLS.js";import"./chunk-KQ7OR4H5-Dz8xZID-.js";import"./chunk-TLBGAR4N-z-9EDjwd.js";import"./GlassDialog-DpQAAim6.js";import"./LoadingButton-CUeR6bzk.js";const le=({title:c,allUsers:h})=>{const{auth:de,props:T}=J(),[p,n]=t.useState(null),[_,g]=t.useState(T.leavesData),[f,u]=t.useState(),[A,L]=t.useState(0),[P,y]=t.useState(0),[j,C]=t.useState(null),[s,w]=t.useState(""),[o,G]=t.useState(re().format("YYYY-MM")),[l,k]=t.useState(30),[d,F]=t.useState(1),[Y,B]=t.useState(),[S,I]=t.useState(""),x=a=>n(a),O=t.useCallback((a,i)=>{C(a),n(i)},[]),R=t.useCallback(()=>{n(null),C(null)},[]),H=a=>w(a.target.value.toLowerCase()),M=a=>{console.log(a.target.value),G(a.target.value)},V=async()=>{var a,i;try{const r=await axios.get(route("leaves.paginate"),{params:{page:d,perPage:l,employee:s,month:o}});if(console.log(o),r.status===200){const{data:W,total:q,last_page:z}=r.data.leaves;u(W),L(q),y(z)}}catch(r){console.error("Error fetching leaves data:",r),I(((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)||"Error retrieving data.")}};return t.useEffect(()=>{V()},[o,d,l,s]),m(N,{children:[e(K,{title:c}),["add_leave","edit_leave"].includes(p)&&e(ae,{setTotalRows:L,setLastPage:y,setLeaves:u,perPage:l,employee:s,currentPage:d,selectedMonth:o,allUsers:h,open:!0,setLeavesData:g,closeModal:()=>n(null),leavesData:_,currentLeave:p==="edit_leave"?Y:null,handleMonthChange:M}),p==="delete_leave"&&e(oe,{open:!0,handleClose:R,leaveIdToDelete:j,setLeavesData:g}),e($,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Q,{in:!0,children:m(te,{children:[e(X,{title:"Leaves",sx:{padding:"24px"},action:e(Z,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(ne,{}),onClick:()=>x("add_leave"),children:"Add Leave"})}),e(b,{children:m(v,{container:!0,spacing:2,children:[e(v,{item:!0,xs:12,sm:6,md:4,children:e(E,{label:"Search",fullWidth:!0,variant:"bordered",placeholder:"Employee...",value:s,onChange:H,endContent:e(U,{})})}),e(v,{item:!0,xs:12,sm:6,md:4,children:e(E,{label:"Select Month",type:"month",variant:"bordered",onChange:M,value:o})})]})}),e(b,{children:f?e(se,{totalRows:A,lastPage:P,setCurrentPage:F,setPerPage:k,perPage:l,currentPage:d,handleClickOpen:O,setCurrentLeave:B,openModal:x,leaves:f,allUsers:h,setLeaves:u,employee:s,selectedMonth:o}):S?e(D,{variant:"body1",align:"center",children:S}):e(D,{variant:"body1",align:"center",children:"Loading leaves data..."})})]})})})]})};le.layout=c=>e(ee,{children:c});export{le as default};
