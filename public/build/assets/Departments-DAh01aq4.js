import{J as Pe,r as u,j as e,b as t,s as Ge,h as E,F as ge,a as W,Q as He,e as Qe,c as Ve}from"./app-BcmgNF0y.js";import{aA as Y,ap as qe,aq as Ue,ar as X,as as Je,p as Se,m as k,h as ae,au as Fe,u as Ie,a as te,T as S,aB as Te,I as Ae,f as D,Q as ve,aC as Ke,aD as Xe,n as A,B as re,am as Ze,G as ea,e as aa,i as ta,ai as ra,ax as sa,o as la,A as na}from"./App-n7nN2ISI.js";import{P as oa}from"./PageHeader-DJyhKpwe.js";import{S as ia}from"./StatsCards-C1eSWpeI.js";import{d as oe}from"./dayjs.min-CUgcbVFT.js";import{N as da}from"./NoDataMessage-DtzjFcJl.js";import{F as xe}from"./EyeIcon-BP6UhiaP.js";import{a as se,F as ca}from"./PencilIcon-DtevNsBb.js";import{F as we}from"./TrashIcon-gsQmfKYX.js";import{F as le}from"./CheckCircleIcon-CJ750GqA.js";import{F as ne}from"./XCircleIcon-CVnYhC4a.js";import{F as ke}from"./MapPinIcon-BjYPZA0H.js";import{a as ma,b as ha,c as ua,d as pa,e as fa,t as ba}from"./chunk-F3UDT23P-B95P-WTm.js";import{p as Ee}from"./chunk-O5I3QTYU-D4iSu0fv.js";import{t as Z}from"./chunk-7ZZXWEXF-Dxx-g6qx.js";import{u as ga}from"./chunk-R6AK6OQ4-DjVKCF-C.js";import{G as va}from"./GlassDialog-Cyqucp6s.js";import{D as Re}from"./DialogTitle-O1kA4poy.js";import{D as Q}from"./Divider-DqNgO4aj.js";import{T as L,F as ee}from"./TextField-D6XLYh9C.js";import{I as Ne}from"./InputLabel-CBH9I2AA.js";import{S as ye}from"./Select-Ctbfs3z7.js";import{M as H}from"./MenuItem-Dfzpa8iu.js";import{b as Me,c as Be,a as xa}from"./DialogContent-DKiN3tZb.js";import{B as V}from"./Button-CSU9JmaR.js";import{F as wa}from"./ExclamationTriangleIcon-4Pzcr95K.js";import{A as _e}from"./Alert-DUeTSmem.js";import{C as $e}from"./CircularProgress-CbI9q9-Q.js";import{F as Na}from"./PlusIcon-BTjcAEfu.js";import{F as ya}from"./DocumentArrowDownIcon-DmWKHgSv.js";import{b as _a,F as Da}from"./AdjustmentsHorizontalIcon-DkiXkfP3.js";import{F as Ca}from"./TableCellsIcon-i6cyVz45.js";import{s as De,l as j}from"./chunk-2GIFKCNQ-BtCDsqqu.js";import"./app-CA3O2NZp.js";import"./chunk-D5XJWRAV-C8SNqqSe.js";import"./chunk-MZRCPRP2-DPVm9c79.js";import"./LiveAnnouncer-CLFakR0q.js";import"./useHasTabbableChild-BeACiGdW.js";import"./chunk-7F3ZLNJ6-C0BxFFvh.js";import"./index-CokAva9Y.js";import"./dividerClasses-hlmcFD_x.js";import"./Popover-CT5iVJTH.js";import"./List-CbVyooDd.js";import"./listItemTextClasses-BMndB1IC.js";import"./useSlot-HkoI0zIO.js";import"./chunk-2PG5BJX6-qpghpY4c.js";const Pa=({departments:b,onEdit:h,onDelete:F,onView:s,loading:g,isMobile:i,isTablet:x,pagination:f,onPageChange:n,onRowsPerPageChange:I,canEditDepartment:l=!1,canDeleteDepartment:y=!1})=>{var T,R;const{auth:_}=Pe().props,d=l||((T=_.permissions)==null?void 0:T.includes("departments.update"))||!1,p=y||((R=_.permissions)==null?void 0:R.includes("departments.delete"))||!1,w=u.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:i},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:i},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:i||x},{name:"ACTIONS",uid:"actions"}].filter(N=>!N.hide),[i,x]),o=(r,N)=>{switch(N){case"name":return e(ga,{avatarProps:{radius:"lg",fallback:e(Fe,{className:"w-4 h-4"}),size:i?"sm":"md"},name:r.name,description:r.parent?r.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e("div",{children:r.code?e(k,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:r.code}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e("div",{children:r.manager?t("div",{className:"flex flex-col",children:[e("span",{className:"text-sm",children:r.manager.name}),!i&&r.manager.email&&e("span",{className:"text-xs text-default-400",children:r.manager.email})]}):e("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return t("div",{className:"flex items-center gap-2",children:[e(ae,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.employee_count||0})]});case"location":return e("div",{className:"flex items-center gap-2",children:r.location?t(ge,{children:[e(ke,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.location})]}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e(k,{size:"sm",variant:r.is_active?"solid":"bordered",color:r.is_active?"success":"danger",startContent:r.is_active?e(le,{className:"w-3 h-3"}):e(ne,{className:"w-3 h-3"}),children:r.is_active?"Active":"Inactive"});case"established":return t("div",{className:"flex items-center gap-2",children:[e(Se,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:r.established_date?oe(r.established_date).format("MMM D, YYYY"):e("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e("div",{className:"flex justify-end items-center",children:i?t(Je,{children:[e(qe,{children:e(E,{isIconOnly:!0,size:"sm",variant:"light",children:e(ca,{className:"w-4 h-4"})})}),t(Ue,{"aria-label":"Department actions",children:[e(X,{startContent:e(xe,{className:"w-4 h-4"}),onPress:()=>s(r),children:"View Details"},"view"),d&&e(X,{startContent:e(se,{className:"w-4 h-4"}),onPress:()=>h(r),children:"Edit Department"},"edit"),p&&e(X,{className:"text-danger",color:"danger",startContent:e(we,{className:"w-4 h-4"}),isDisabled:r.employee_count>0,onPress:()=>F(r),children:"Delete Department"},"delete")]})]}):t(ge,{children:[e(Z,{content:"View Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>s(r),children:e(xe,{className:"w-4 h-4"})})}),d&&e(Z,{content:"Edit Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>h(r),children:e(se,{className:"w-4 h-4"})})}),p&&e(Z,{content:r.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:r.employee_count>0,onPress:()=>F(r),children:e(we,{className:"w-4 h-4"})})})]})});default:return e("span",{children:r[N]})}},B=()=>!b||!b.data||g?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,b.total)," of ",b.total," departments"]}),e(Ee,{total:Math.ceil(b.total/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:n,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!g&&(!b||!b.data||b.data.length===0)?e("div",{className:"w-full",children:e(da,{message:"No departments found",icon:e(Y,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e("div",{className:"w-full",children:t(ba,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:B(),children:[e(ma,{columns:w,children:r=>e(ha,{children:r.name},r.uid)}),e(ua,{items:b.data||[],emptyContent:!g&&"No departments found",loadingContent:e(Ge,{}),isLoading:g,children:r=>e(pa,{children:N=>e(fa,{children:o(r,N)})},r.id)})]})})},Ce=({open:b,onClose:h,onSuccess:F,department:s=null,managers:g=[],parentDepartments:i=[]})=>{var B,T,R,r,N;const x=Ie(),f=te(x.breakpoints.down("md")),[n,I]=u.useState(!1),[l,y]=u.useState({}),_={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[d,p]=u.useState(_);u.useEffect(()=>{p(s?{name:s.name||"",code:s.code||"",description:s.description||"",parent_id:s.parent_id||null,manager_id:s.manager_id||null,location:s.location||"",is_active:s.is_active??!0,established_date:s.established_date?oe(s.established_date).format("YYYY-MM-DD"):""}:_),y({})},[s,b]);const w=m=>{const{name:C,value:c,type:P,checked:G}=m.target;p(M=>({...M,[C]:P==="checkbox"?G:c})),l[C]&&y(M=>({...M,[C]:null}))},o=async()=>{var m,C;I(!0),y({});try{const c={...d,established_date:d.established_date||null};let P;s!=null&&s.id?(P=await W.put(`/departments/${s.id}`,c),A.success("Department updated successfully")):(P=await W.post("/departments",c),A.success("Department created successfully")),F(P.data.department),h()}catch(c){if(console.error("Error saving department:",c),(C=(m=c.response)==null?void 0:m.data)!=null&&C.errors){y(c.response.data.errors);const P=Object.values(c.response.data.errors)[0];P&&A.error(P[0])}else A.error("An error occurred while saving the department")}finally{I(!1)}};return t(va,{open:b,onClose:n?void 0:h,maxWidth:"md",fullWidth:!0,fullScreen:f,"aria-labelledby":"department-form-dialog",children:[t(Re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e(S,{variant:"h6",component:"div",children:s?"Edit Department":"Create New Department"}),e(Ae,{edge:"end",color:"inherit",onClick:h,disabled:n,"aria-label":"close",children:e(Te,{className:"w-5 h-5"})})]}),e(Q,{}),e(Me,{sx:{pt:2},children:t(D,{container:!0,spacing:3,children:[e(D,{item:!0,xs:12,children:e(S,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:d.name,onChange:w,error:!!l.name,helperText:((B=l.name)==null?void 0:B[0])||"",disabled:n})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"code",label:"Department Code",fullWidth:!0,value:d.code||"",onChange:w,error:!!l.code,helperText:((T=l.code)==null?void 0:T[0])||"Unique identifier (e.g., HR001, FIN002)",disabled:n})}),e(D,{item:!0,xs:12,children:e(L,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:d.description||"",onChange:w,error:!!l.description,helperText:((R=l.description)==null?void 0:R[0])||"",disabled:n})}),e(D,{item:!0,xs:12,sx:{mt:2},children:e(S,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e(D,{item:!0,xs:12,md:6,children:t(ve,{fullWidth:!0,error:!!l.parent_id,children:[e(Ne,{id:"parent-department-label",children:"Parent Department"}),t(ye,{labelId:"parent-department-label",name:"parent_id",value:d.parent_id||"",onChange:w,label:"Parent Department",disabled:n,children:[e(H,{value:"",children:e("em",{children:"None (Top-Level Department)"})}),i.map(m=>(s==null?void 0:s.id)!==m.id&&e(H,{value:m.id,children:m.name},m.id))]}),l.parent_id&&e(ee,{children:l.parent_id[0]})]})}),e(D,{item:!0,xs:12,md:6,children:t(ve,{fullWidth:!0,error:!!l.manager_id,children:[e(Ne,{id:"manager-label",children:"Department Manager"}),t(ye,{labelId:"manager-label",name:"manager_id",value:d.manager_id||"",onChange:w,label:"Department Manager",disabled:n,children:[e(H,{value:"",children:e("em",{children:"Not Assigned"})}),g.map(m=>e(H,{value:m.id,children:m.name},m.id))]}),l.manager_id&&e(ee,{children:l.manager_id[0]})]})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"location",label:"Location",fullWidth:!0,value:d.location||"",onChange:w,error:!!l.location,helperText:((r=l.location)==null?void 0:r[0])||"Physical location of the department",disabled:n})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:d.established_date||"",onChange:w,error:!!l.established_date,helperText:((N=l.established_date)==null?void 0:N[0])||"",disabled:n,InputLabelProps:{shrink:!0}})}),t(D,{item:!0,xs:12,children:[e(Ke,{control:e(Xe,{checked:d.is_active,onChange:w,name:"is_active",color:"success",disabled:n}),label:"Department is active"}),l.is_active&&e(ee,{error:!0,children:l.is_active[0]})]})]})}),e(Q,{}),t(Be,{sx:{px:3,py:2},children:[e(V,{onClick:h,disabled:n,color:"inherit",children:"Cancel"}),e(V,{onClick:o,variant:"contained",color:"primary",disabled:n,children:n?"Saving...":s?"Update Department":"Create Department"})]})]})},Sa=({open:b,onClose:h,onSuccess:F,department:s})=>{const[g,i]=u.useState(!1),[x,f]=u.useState(null),n=async()=>{var I,l,y,_;if(s){i(!0),f(null);try{await W.delete(`/departments/${s.id}`),A.success("Department deleted successfully"),F(),h()}catch(d){if(console.error("Error deleting department:",d),(l=(I=d.response)==null?void 0:I.data)!=null&&l.message)f(d.response.data.message),A.error(d.response.data.message);else if((_=(y=d.response)==null?void 0:y.data)!=null&&_.errors){const p=Object.values(d.response.data.errors)[0];f(p),A.error(p)}else f("An error occurred while deleting the department"),A.error("An error occurred while deleting the department")}finally{i(!1)}}};return s?t(xa,{open:b,onClose:g?void 0:h,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-department-dialog",children:[t(Re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(S,{variant:"h6",children:"Delete Department"}),e(Ae,{edge:"end",color:"inherit",onClick:h,disabled:g,"aria-label":"close",children:e(Te,{className:"w-5 h-5"})})]}),e(Q,{}),e(Me,{children:t(re,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(re,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(wa,{className:"w-8 h-8 text-yellow-500"}),t(S,{variant:"body1",children:["Are you sure you want to delete the department ",e("strong",{children:s.name}),"?"]})]}),s.employee_count>0&&t(_e,{severity:"warning",sx:{mt:2},children:["This department has ",s.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),x&&e(_e,{severity:"error",sx:{mt:2},children:x}),e(S,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e(Q,{}),t(Be,{sx:{px:3,py:2},children:[e(V,{onClick:h,disabled:g,color:"inherit",children:"Cancel"}),e(V,{onClick:n,variant:"contained",color:"error",disabled:g||s.employee_count>0,startIcon:g&&e($e,{size:20,color:"inherit"}),children:g?"Deleting...":"Delete Department"})]})]}):null},wt=({title:b,departments:h,managers:F,parentDepartments:s,stats:g,filters:i})=>{var ce,me,he,ue,pe,fe;const{auth:x}=Pe().props,f=Ie(),n=te(f.breakpoints.down("sm")),I=te(f.breakpoints.down("md")),[l,y]=u.useState(h||{data:[]}),[_,d]=u.useState(!1),[p,w]=u.useState({type:null,department:null}),[o,B]=u.useState({search:(i==null?void 0:i.search)||"",status:(i==null?void 0:i.status)||"all",parentDepartment:(i==null?void 0:i.parentDepartment)||"all"}),[T,R]=u.useState(!1),[r,N]=u.useState("table"),[m,C]=u.useState({currentPage:(h==null?void 0:h.current_page)||1,perPage:(h==null?void 0:h.per_page)||10}),[c,P]=u.useState(g||{total:0,active:0,inactive:0,parent_departments:0}),G=((ce=x.permissions)==null?void 0:ce.includes("departments.create"))||!1,M=((me=x.permissions)==null?void 0:me.includes("departments.update"))||!1,q=((he=x.permissions)==null?void 0:he.includes("departments.delete"))||!1,ze=M||((ue=x.permissions)==null?void 0:ue.includes("departments.update"))||!1;q||(pe=x.permissions)!=null&&pe.includes("departments.delete");const U=u.useCallback(async()=>{d(!0);try{const a=await W.get(route("api.departments"),{params:{page:m.currentPage,per_page:m.perPage,search:o.search,status:o.status,parent_department:o.parentDepartment}});y(a.data.departments)}catch(a){console.error("Error fetching departments:",a),A.error("Failed to load departments data")}finally{d(!1)}},[m.currentPage,m.perPage,o.search,o.status,o.parentDepartment]),J=u.useCallback(async()=>{try{const a=await W.get(route("departments.stats"));if(a.status===200){const{stats:v}=a.data;P(v)}}catch(a){console.error("Error fetching department stats:",a)}},[]);u.useEffect(()=>{U(),J()},[U,J]);const $=(a,v)=>{B(O=>({...O,[a]:v})),C(O=>({...O,currentPage:1}))},ie=a=>{C(v=>({...v,currentPage:a})),window.scrollTo({top:0,behavior:"smooth"})},Oe=a=>{C({currentPage:1,perPage:a})},z=(a,v=null)=>{w({type:a,department:v})},K=()=>{w({type:null,department:null})},de=()=>{U(),J()},je=({department:a,index:v})=>{const O=a.manager,be=a.parent;return e(Ve,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>z("view_department",a),children:t(Qe,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary flex-shrink-0",children:e(Fe,{className:"w-5 h-5"})}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:a.name}),e("p",{className:"text-default-500 text-xs",children:a.code||"No Code"})]}),ze&&e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:We=>{We.stopPropagation(),z("edit_department",a)},children:e(se,{className:"w-4 h-4"})})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[a.location&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(ke,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:a.location})]}),a.established_date&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Se,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:oe(a.established_date).format("MMM D, YYYY")})]}),t("div",{className:"flex items-center gap-2 text-sm",children:[e(ae,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),t("span",{className:"text-default-600 text-xs",children:[a.employee_count||0," ",a.employee_count===1?"Employee":"Employees"]})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(k,{size:"sm",variant:a.is_active?"solid":"bordered",color:a.is_active?"success":"danger",className:"text-xs",startContent:a.is_active?e(le,{className:"w-3 h-3"}):e(ne,{className:"w-3 h-3"}),children:a.is_active?"Active":"Inactive"}),be&&e(k,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(Y,{className:"w-3 h-3"}),children:be.name}),O&&e(k,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(ae,{className:"w-3 h-3"}),children:O.name})]})]})})},Le=u.useMemo(()=>[{title:"Total Departments",value:(c==null?void 0:c.total)||0,icon:e(Y,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:(c==null?void 0:c.active)||0,icon:e(le,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:(c==null?void 0:c.inactive)||0,icon:e(ne,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:(c==null?void 0:c.parent_departments)||0,icon:e(Ze,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[c]),Ye=u.useMemo(()=>{const a=[];return G&&a.push({label:n?"Add":"Add Department",icon:e(Na,{className:"w-4 h-4"}),onPress:()=>z("add_department"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),a.push({label:n?"":"Export",isIconOnly:n,icon:e(ya,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),a},[G,n]);return t(na,{children:[e(He,{title:b}),e(re,{sx:{display:"flex",justifyContent:"center",p:2},children:e(ea,{in:!0,timeout:800,children:e(aa,{children:e(oa,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e(Y,{className:"w-8 h-8"}),variant:"default",actionButtons:Ye,children:t("div",{className:"p-4 sm:p-6",children:[e(ia,{stats:Le,className:"mb-6"}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(ta,{label:"Search Departments",variant:"bordered",placeholder:"Search by name, code, or location...",value:o.search,onValueChange:a=>$("search",a),startContent:e(ra,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:n?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(_a,{variant:"bordered",className:"bg-white/5",children:[t(E,{isIconOnly:n,color:r==="table"?"primary":"default",onPress:()=>N("table"),className:r==="table"?"bg-blue-500/20":"",children:[e(Ca,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Table"})]}),t(E,{isIconOnly:n,color:r==="grid"?"primary":"default",onPress:()=>N("grid"),className:r==="grid"?"bg-blue-500/20":"",children:[e(sa,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(E,{isIconOnly:n,variant:"bordered",onPress:()=>R(!T),className:T?"bg-purple-500/20":"bg-white/5",children:[e(Da,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),T&&e(la,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(De,{label:"Status",variant:"bordered",selectedKeys:o.status!=="all"?[o.status]:[],onSelectionChange:a=>{const v=Array.from(a)[0]||"all";$("status",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(j,{value:"all",children:"All Statuses"},"all"),e(j,{value:"active",children:"Active Only"},"active"),e(j,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(De,{label:"Parent Department",variant:"bordered",selectedKeys:o.parentDepartment!=="all"?[o.parentDepartment]:[],onSelectionChange:a=>{const v=Array.from(a)[0]||"all";$("parentDepartment",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(j,{value:"all",children:"All Parent Departments"},"all"),e(j,{value:"none",children:"Top-Level Departments"},"none"),s==null?void 0:s.map(a=>e(j,{value:a.id.toString(),children:a.name},a.id.toString()))]})]}),(o.search||o.status!=="all"||o.parentDepartment!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[o.search&&t(k,{variant:"flat",color:"primary",size:"sm",onClose:()=>$("search",""),children:["Search: ",o.search]}),o.status!=="all"&&t(k,{variant:"flat",color:"secondary",size:"sm",onClose:()=>$("status","all"),children:["Status: ",o.status==="active"?"Active":"Inactive"]}),o.parentDepartment!=="all"&&t(k,{variant:"flat",color:"warning",size:"sm",onClose:()=>$("parentDepartment","all"),children:["Parent: ",o.parentDepartment==="none"?"None (Top-Level)":(fe=s==null?void 0:s.find(a=>a.id===parseInt(o.parentDepartment)))==null?void 0:fe.name]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(S,{variant:"h6",className:"font-semibold text-foreground",children:[r==="table"?"Department Table":"Department Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",l.total||0," ",l.total===1?"department":"departments",")"]})]})}),_?t("div",{className:"text-center py-8",children:[e($e,{size:40}),e(S,{className:"mt-4",color:"textSecondary",children:"Loading departments data..."})]}):r==="table"?e(Pa,{departments:l,loading:_,onEdit:M?a=>z("edit_department",a):void 0,onDelete:q?a=>z("delete_department",a):void 0,onView:a=>z("view_department",a),isMobile:n,isTablet:I,pagination:m,onPageChange:ie,onRowsPerPageChange:Oe,canEditDepartment:M,canDeleteDepartment:q}):t("div",{className:"p-4",children:[l.data&&l.data.length>0?e("div",{className:`grid gap-4 ${n?"grid-cols-1":I?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:l.data.map((a,v)=>e(je,{department:a,index:v},a.id))}):t("div",{className:"text-center py-8",children:[e(Y,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(S,{variant:"body1",color:"textSecondary",children:"No departments found"}),e(S,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),l.data&&l.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Ee,{total:Math.ceil(l.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:ie,size:n?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(p.type==="add_department"||p.type==="edit_department")&&e(Ce,{open:!0,onClose:K,onSuccess:de,department:p.type==="edit_department"?p.department:null,managers:F,parentDepartments:s}),p.type==="delete_department"&&e(Sa,{open:!0,onClose:K,onSuccess:de,department:p.department}),p.type==="view_department"&&e(Ce,{open:!0,onClose:K,onSuccess:()=>{},department:p.department,managers:F,parentDepartments:s,readOnly:!0})]})};export{wt as default};
