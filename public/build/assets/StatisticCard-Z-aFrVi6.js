import{a as t,j as h,c as y}from"./app-BZCEtsTA.js";import{r,Y as u,Z as b,$ as w,B as a,G as g,a as v,T as f,e as k}from"./vendor-Dz0S-B-S.js";import{a as S,n as C,G as I}from"./App-DC-ZgINO.js";import{F as H}from"./CheckCircleIcon-BuTS0DT4.js";import{c as W}from"./chunk-MW56SEHC-C_vttlAv.js";import{s as j}from"./chunk-TLYTI3QM-BPHH7-Md.js";function F({title:s,titleId:i,...n},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":i},n),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const D=r.forwardRef(F),E=({title:s,value:i,icon:n,color:o,isLoaded:c,testId:d})=>t(k,{in:!0,timeout:300,children:t(I,{sx:{height:"100%"},children:t(v,{sx:{p:{xs:2,sm:3},height:"100%",display:"flex",flexDirection:"column"},children:t(j,{className:"rounded-lg",isLoaded:c,"data-testid":d,children:h(a,{display:"flex",flexDirection:"column",gap:2,role:"region","aria-label":`${s} statistics`,sx:{height:"100%"},children:[h(a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem",md:"1rem"},fontWeight:500,lineHeight:1.2,flex:1,mr:1},component:"h3",children:s}),t(a,{sx:{bgcolor:`${o}20`,borderRadius:"12px",p:1.5,display:"flex",alignItems:"center",justifyContent:"center",minWidth:{xs:40,sm:48},minHeight:{xs:40,sm:48},flexShrink:0},children:t(n,{style:{width:"24px",height:"24px",color:o,strokeWidth:2},"aria-hidden":"true"})})]}),t(a,{sx:{mt:"auto"},children:t(f,{variant:"h4",component:"div",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem",lg:"2rem",xl:"2.5rem"},fontWeight:700,color:"text.primary",lineHeight:1},"aria-live":"polite",children:typeof i=="number"?i.toLocaleString():i})})]})})})})}),_=()=>{const[s,i]=r.useState({total:0,completed:0,pending:0,rfi_submissions:0}),[n,o]=r.useState(!0),[c,d]=r.useState(null);r.useEffect(()=>{let e=!0;const m=new AbortController;return(async()=>{var p;try{o(!0),d(null);const l=await y.get(route("stats"),{signal:m.signal,timeout:1e4});if(e&&((p=l.data)!=null&&p.statistics))i(l.data.statistics);else throw new Error("Invalid response structure")}catch(l){e&&!m.signal.aborted&&(console.error("Failed to fetch statistics:",l),d(l.message),i({total:0,completed:0,pending:0,rfi_submissions:0}))}finally{e&&o(!1)}})(),()=>{e=!1,m.abort()}},[]);const x=[{id:"total-daily-works",title:"Total Daily Works",value:s.total,icon:D,color:u[600],testId:"stat-total-works"},{id:"completed-daily-works",title:"Completed Daily Works",value:s.completed,icon:H,color:b[600],testId:"stat-completed-works"},{id:"pending-daily-works",title:"Pending Daily Works",value:s.pending,icon:S,color:w[600],testId:"stat-pending-works"},{id:"rfi-submissions",title:"RFI Submissions",value:s.rfi_submissions,icon:C,color:u[600],testId:"stat-rfi-submissions"}];return c?t(a,{sx:{flexGrow:1,pt:2,pr:2,pl:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:t(W,{className:"p-4 bg-danger-50 border-danger-200",children:h(f,{color:"error",variant:"body1",children:["Failed to load statistics: ",c]})})}):t(a,{sx:{flexGrow:1,pt:2,pr:2,pl:2,height:"100%"},component:"section","aria-label":"Statistics Dashboard",children:t(g,{container:!0,spacing:{xs:2,sm:2,md:2},sx:{height:"100%",maxWidth:"1400px",margin:"0 auto"},alignItems:"stretch",children:x.map((e,m)=>t(g,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:t(E,{title:e.title,value:e.value,icon:e.icon,color:e.color,isLoaded:!n,testId:e.testId})},e.id))})})};export{_ as default};
