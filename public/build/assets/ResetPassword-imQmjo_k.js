import{x as A,r as g,j as s,a as e,Q as D}from"./app-DDhVNfvV.js";import{A as $}from"./AuthLayout-Cp3HghuQ.js";import{B as j}from"./Button-CFwZKY9U.js";import{u as q,m as t}from"./GlassCard-B8deHOrc.js";import{F as z}from"./KeyIcon-CAZJdP6I.js";import{F as C}from"./EyeSlashIcon-BVaW8PT4.js";import{F}from"./EyeIcon-B-1DdV8E.js";import{F as _}from"./LockClosedIcon-CNT0kaEE.js";import{F as E}from"./ShieldCheckIcon-B8pnYfIx.js";import{i as y}from"./chunk-6MDMHKHV-DNEscIMF.js";import"./app-CYwLuuRk.js";import"./logo-DoLGM3I0.js";import"./create-visual-element-DIA5r6xh.js";import"./index-I7bPq2YP.js";import"./useFormReset-Dv_1w4_q.js";import"./useLabel-C1JBDqVQ.js";import"./useLabels-Blg_QI1U.js";import"./chunk-M3MASYO7-DaLySJZS.js";function ie({token:P,email:b}){const{data:l,setData:c,post:x,processing:p,errors:i,reset:v}=A({token:P,email:b,verification_code:"",password:"",password_confirmation:""}),[u,S]=g.useState(0),[m,W]=g.useState(!1),[f,R]=g.useState(!1),o=q(),I=a=>{let r=0;return a.length>=8&&(r+=1),/[a-z]/.test(a)&&(r+=1),/[A-Z]/.test(a)&&(r+=1),/[0-9]/.test(a)&&(r+=1),/[^A-Za-z0-9]/.test(a)&&(r+=1),r},T=a=>{const r=a.target.value;c("password",r),S(I(r))},V=()=>{switch(u){case 0:case 1:return"Very weak";case 2:return"Weak";case 3:return"Fair";case 4:return"Good";case 5:return"Strong";default:return""}},k=()=>{switch(u){case 0:case 1:return o.palette.error.main;case 2:return"#f59e0b";case 3:return"#eab308";case 4:return o.palette.primary.main;case 5:return o.palette.success.main;default:return o.palette.grey[300]}};return s($,{title:"Set new password",subtitle:"Enter the verification code and create a new secure password",children:[e(D,{title:"Reset Password"}),s("form",{onSubmit:a=>{a.preventDefault();const r=()=>{if(typeof window>"u")return!1;const n=window.location.hostname,h=window.location.pathname;return n==="127.0.0.1"||n==="localhost"?h.startsWith("/tenant/"):!["aero-hr.com","aero-hr.local","aero.com"].includes(n)},N=(()=>{if(!r())return null;const n=window.location.hostname,h=window.location.pathname;if(n==="127.0.0.1"||n==="localhost"){const w=h.match(/\/tenant\/([^\/]+)/);return w?{domain:w[1],name:w[1]}:null}const d=n.split(".");return d.length>=3?{domain:d[0],name:d[0]}:null})();r()&&N?x(route("tenant.password.update",{tenant:N.domain}),{onFinish:()=>v("password","password_confirmation")}):x(route("central.password.update"),{onFinish:()=>v("password","password_confirmation")})},className:"space-y-6",children:[e(t.div,{className:"p-4 rounded-xl border",style:{background:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",borderColor:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:s("p",{className:"text-sm",style:{color:o.palette.text.secondary},children:["Resetting password for: ",e("span",{className:"font-medium",style:{color:o.palette.text.primary},children:b})]})}),s(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e(y,{type:"text",label:"Verification code",placeholder:"Enter 6-digit code from email",value:l.verification_code,onChange:a=>c("verification_code",a.target.value),isInvalid:!!i.verification_code,errorMessage:i.verification_code,autoComplete:"one-time-code",autoFocus:!0,maxLength:6,required:!0,startContent:e(z,{className:"w-4 h-4 text-default-400 pointer-events-none flex-shrink-0"}),classNames:{base:"w-full",mainWrapper:"w-full",input:["bg-transparent","text-black dark:text-white","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-200/50","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-200/70","dark:hover:bg-default/70","group-data-[focused=true]:bg-default-200/50","dark:group-data-[focused=true]:bg-default/60","!cursor-text"]}}),e(t.p,{className:"text-xs mt-2",style:{color:o.palette.text.secondary},initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Check your email for the 6-digit verification code"})]}),e(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:s("div",{children:[e(y,{type:m?"text":"password",label:"New password",placeholder:"Create a strong password",value:l.password,onChange:T,isInvalid:!!i.password,errorMessage:i.password,autoComplete:"new-password",required:!0,startContent:e(_,{className:"w-4 h-4 text-default-400 pointer-events-none flex-shrink-0"}),endContent:e("button",{className:"focus:outline-none",type:"button",onClick:()=>W(!m),children:m?e(C,{className:"w-4 h-4 text-default-400 pointer-events-none"}):e(F,{className:"w-4 h-4 text-default-400 pointer-events-none"})}),classNames:{base:"w-full",mainWrapper:"w-full",input:["bg-transparent","text-black dark:text-white","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-200/50","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-200/70","dark:hover:bg-default/70","group-data-[focused=true]:bg-default-200/50","dark:group-data-[focused=true]:bg-default/60","!cursor-text"]}}),l.password&&s(t.div,{className:"mt-3 space-y-2",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.4},children:[s("div",{className:"flex items-center space-x-3",children:[e("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:o.palette.grey[200]},children:e(t.div,{className:"h-full rounded-full transition-all duration-500",style:{backgroundColor:k()},initial:{width:0},animate:{width:`${u/5*100}%`}})}),e(t.span,{className:"text-xs font-medium w-20 text-right",style:{color:k()},initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:V()})]}),e(t.p,{className:"text-xs",style:{color:o.palette.text.secondary},initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{delay:.3},children:"Use 8+ characters with uppercase, lowercase, numbers, and symbols"})]})]})}),e(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e(y,{type:f?"text":"password",label:"Confirm new password",placeholder:"Confirm your new password",value:l.password_confirmation,onChange:a=>c("password_confirmation",a.target.value),isInvalid:!!i.password_confirmation,errorMessage:i.password_confirmation,autoComplete:"new-password",required:!0,startContent:e(_,{className:"w-4 h-4 text-default-400 pointer-events-none flex-shrink-0"}),endContent:e("button",{className:"focus:outline-none",type:"button",onClick:()=>R(!f),children:f?e(C,{className:"w-4 h-4 text-default-400 pointer-events-none"}):e(F,{className:"w-4 h-4 text-default-400 pointer-events-none"})}),classNames:{base:"w-full",mainWrapper:"w-full",input:["bg-transparent","text-black dark:text-white","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-200/50","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-200/70","dark:hover:bg-default/70","group-data-[focused=true]:bg-default-200/50","dark:group-data-[focused=true]:bg-default/60","!cursor-text"]}})}),e(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e(j,{type:"submit",variant:"primary",size:"lg",className:"w-full",loading:p,disabled:p,children:p?"Updating password...":"Update password"})})]}),e(t.div,{className:"mt-8 p-4 rounded-xl border",style:{background:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.2)",backdropFilter:"blur(10px)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:s("div",{className:"flex items-start",children:[e(t.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.7,type:"spring",stiffness:500},children:e(E,{className:"w-5 h-5 text-green-500"})}),s("div",{className:"ml-3",children:[e(t.h3,{className:"text-sm font-medium text-green-800",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.8},children:"Secure Password Reset"}),s(t.div,{className:"text-sm text-green-700 mt-2 space-y-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.9},children:[e("p",{children:"• Your password reset is protected with two-factor verification"}),e("p",{children:"• All sessions will be invalidated after password change"}),e("p",{children:"• This activity is logged for security monitoring"})]})]})]})})]})}export{ie as default};
