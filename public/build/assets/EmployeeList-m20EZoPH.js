const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BldkNugS.js","assets/features-animation-Cf4biVMq.js","assets/app-ICdw8XZW.js","assets/app-CA3O2NZp.js","assets/app-DVS3Fd7g.css"])))=>i.map(i=>d[i]);
import{ac as mt,r as n,y as ht,D as pt,i as v,a5 as ft,k as ye,u as Ne,m as me,ad as Ce,$ as ve,a6 as ut,L as Ke,_ as bt,n as qe,T as gt,z as xt,A as wt,ae as vt,E as yt,B as Nt,C as ue,W as _t,b as r,j as e,s as ie,F as et,h as V,a as ee,Q as Ct,e as kt,c as Pt}from"./app-ICdw8XZW.js";import{$ as $t,K as Qe,aH as St,bb as Dt,bc as At,bd as jt,aD as Rt,be as Et,J as Ft,u as tt,m as Y,i as ce,as as be,at as ge,au as de,av as xe,c as $e,aC as Se,ax as De,az as Ae,ay as je,d as at,n as T,a as Ye,h as ke,b as Mt,G as Bt,e as Tt,T as Q,ai as zt,aA as It,R as Ot,B as Lt,A as Ht}from"./App-xKIEJnfh.js";import{P as Vt}from"./PageHeader-C-n7yLRm.js";import{S as Wt}from"./StatsCards-D7x2ogj2.js";import{F as Gt}from"./CogIcon-C8I7zJTT.js";import{F as we,a as rt}from"./PencilIcon-BoMELbc6.js";import{F as Kt}from"./TrashIcon-6Qn0Ks3i.js";import{t as qt,a as Qt,b as Yt,c as Ut,d as Jt,e as Xt}from"./chunk-F3UDT23P-Dzih6ugh.js";import{p as st}from"./chunk-O5I3QTYU-JuO97IC0.js";import{u as nt}from"./chunk-R6AK6OQ4-e2LNdSxP.js";import{F as Zt}from"./CheckCircleIcon-9uvhSzaX.js";import{F as ea}from"./TrophyIcon-DCt4Cr2W.js";import{F as Ue}from"./UserPlusIcon-Vgy7waGe.js";import{F as ta}from"./TableCellsIcon-JXzDIW--.js";import{b as aa,F as ra}from"./AdjustmentsHorizontalIcon-CAmh_VFc.js";import{C as sa}from"./CircularProgress-CRTMx9g5.js";import{s as Pe,l as re}from"./chunk-2GIFKCNQ-r13Ot1aH.js";import"./app-CA3O2NZp.js";import"./chunk-D5XJWRAV-ChYyTb80.js";import"./chunk-MZRCPRP2-CuDTLPCF.js";import"./LiveAnnouncer-QpWtHmnK.js";import"./useHasTabbableChild-C1gNMPSd.js";import"./chunk-7F3ZLNJ6-bb6GUB3a.js";import"./index-CokAva9Y.js";import"./chunk-2PG5BJX6-BKh2F0Oz.js";let F=typeof document<"u"&&window.visualViewport;function na(){let h=mt(),[o,i]=n.useState(()=>h?{width:0,height:0}:Je());return n.useEffect(()=>{let d=()=>{i(u=>{let c=Je();return c.width===u.width&&c.height===u.height?u:c})};return F?F.addEventListener("resize",d):window.addEventListener("resize",d),()=>{F?F.removeEventListener("resize",d):window.removeEventListener("resize",d)}},[]),o}function Je(){return{width:F&&(F==null?void 0:F.width)||window.innerWidth,height:F&&(F==null?void 0:F.height)||window.innerHeight}}var Xe=ht({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...pt]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),la=h=>{const{isSelected:o,isIndeterminate:i,disableAnimation:d,...u}=h;return v.jsx("svg",{"aria-hidden":"true",className:"fill-current",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...u,children:v.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},[oa,_e]=ft({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),lt=ye((h,o)=>{const{as:i,children:d,className:u,...c}=h,{slots:P,classNames:m,bodyId:y,setBodyMounted:C}=_e(),N=Ne(o),$=i||"div";return n.useEffect(()=>(C(!0),()=>C(!1)),[C]),v.jsx($,{ref:N,className:P.body({class:me(m==null?void 0:m.body,u)}),id:y,...c,children:d})});lt.displayName="HeroUI.ModalBody";var ia=lt,da={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:Ce.ease},opacity:{duration:.4,ease:Ce.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:Ce.ease}}},Ze=()=>bt(()=>import("./index-BldkNugS.js"),__vite__mapDeps([0,1,2,3,4])).then(h=>h.default),ot=h=>{const{as:o,children:i,role:d="dialog",...u}=h,{Component:c,domRef:P,slots:m,classNames:y,motionProps:C,backdrop:N,closeButton:$,hideCloseButton:S,disableAnimation:z,getDialogProps:U,getBackdropProps:p,getCloseButtonProps:k,onClose:D}=_e(),b=o||c||"div",K=na(),{dialogProps:E}=$t({role:d},P),A=n.isValidElement($)?n.cloneElement($,k()):v.jsx("button",{...k(),children:v.jsx(la,{})}),g=n.useCallback(R=>{R.key==="Tab"&&R.nativeEvent.isComposing&&(R.stopPropagation(),R.preventDefault())},[]),f=U(ve(E,u)),M=v.jsxs(b,{...f,onKeyDown:ut(f.onKeyDown,g),children:[v.jsx(Qe,{onDismiss:D}),!S&&A,typeof i=="function"?i(D):i,v.jsx(Qe,{onDismiss:D})]}),q=n.useMemo(()=>N==="transparent"?null:z?v.jsx("div",{...p()}):v.jsx(Ke,{features:Ze,children:v.jsx(qe.div,{animate:"enter",exit:"exit",initial:"exit",variants:gt.fade,...p()})}),[N,z,p]),j={"--visual-viewport-height":K.height+"px"},J=z?v.jsx("div",{className:m.wrapper({class:y==null?void 0:y.wrapper}),"data-slot":"wrapper",style:j,children:M}):v.jsx(Ke,{features:Ze,children:v.jsx(qe.div,{animate:"enter",className:m.wrapper({class:y==null?void 0:y.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:da,...C,style:j,children:M})});return v.jsxs("div",{tabIndex:-1,children:[q,J]})};ot.displayName="HeroUI.ModalContent";var ca=ot,it=ye((h,o)=>{const{as:i,children:d,className:u,...c}=h,{slots:P,classNames:m}=_e(),y=Ne(o),C=i||"footer";return v.jsx(C,{ref:y,className:P.footer({class:me(m==null?void 0:m.footer,u)}),...c,children:d})});it.displayName="HeroUI.ModalFooter";var ma=it,dt=ye((h,o)=>{const{as:i,children:d,className:u,...c}=h,{slots:P,classNames:m,headerId:y,setHeaderMounted:C}=_e(),N=Ne(o),$=i||"header";return n.useEffect(()=>(C(!0),()=>C(!1)),[C]),v.jsx($,{ref:N,className:P.header({class:me(m==null?void 0:m.header,u)}),id:y,...c,children:d})});dt.displayName="HeroUI.ModalHeader";var ha=dt;function pa(h={shouldBlockScroll:!0},o,i){let{overlayProps:d,underlayProps:u}=St({...h,isOpen:o.isOpen,onClose:o.close},i);return Dt({isDisabled:!o.isOpen||!h.shouldBlockScroll}),At(),n.useEffect(()=>{if(o.isOpen&&i.current)return jt([i.current])},[o.isOpen,i]),{modalProps:ve(d),underlayProps:u}}function fa(h){var o,i,d;const u=xt(),[c,P]=wt(h,Xe.variantKeys),{ref:m,as:y,className:C,classNames:N,isOpen:$,defaultOpen:S,onOpenChange:z,motionProps:U,closeButton:p,isDismissable:k=!0,hideCloseButton:D=!1,shouldBlockScroll:b=!0,portalContainer:K,isKeyboardDismissDisabled:E=!1,onClose:A,...g}=c,f=y||"section",M=Ne(m),q=n.useRef(null),[j,J]=n.useState(!1),[R,se]=n.useState(!1),X=(i=(o=h.disableAnimation)!=null?o:u==null?void 0:u.disableAnimation)!=null?i:!1,te=n.useId(),ne=n.useId(),a=n.useId(),l=Rt({isOpen:$,defaultOpen:S,onOpenChange:L=>{z==null||z(L),L||A==null||A()}}),{modalProps:x,underlayProps:w}=pa({isDismissable:k,shouldBlockScroll:b,isKeyboardDismissDisabled:E},l,M),{buttonProps:I}=vt({onPress:l.close},q),{isFocusVisible:B,focusProps:ae}=yt(),Z=me(N==null?void 0:N.base,C),O=n.useMemo(()=>Xe({...P,disableAnimation:X}),[Nt(P),X]),_=(L={},fe=null)=>{var le;return{ref:Et(fe,M),...ve(x,g,L),className:O.base({class:me(Z,L.className)}),id:te,"data-open":ue(l.isOpen),"data-dismissable":ue(k),"aria-modal":ue(!0),"data-placement":(le=h==null?void 0:h.placement)!=null?le:"right","aria-labelledby":j?ne:void 0,"aria-describedby":R?a:void 0}},he=n.useCallback((L={})=>({className:O.backdrop({class:N==null?void 0:N.backdrop}),onClick:()=>l.close(),...w,...L}),[O,N,w]),pe=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":ue(B),className:O.closeButton({class:N==null?void 0:N.closeButton}),...ve(I,ae)});return{Component:f,slots:O,domRef:M,headerId:ne,bodyId:a,motionProps:U,classNames:N,isDismissable:k,closeButton:p,hideCloseButton:D,portalContainer:K,shouldBlockScroll:b,backdrop:(d=h.backdrop)!=null?d:"opaque",isOpen:l.isOpen,onClose:l.close,disableAnimation:X,setBodyMounted:se,setHeaderMounted:J,getDialogProps:_,getBackdropProps:he,getCloseButtonProps:pe}}var ct=ye((h,o)=>{const{children:i,...d}=h,u=fa({...d,ref:o}),c=v.jsx(Ft,{portalContainer:u.portalContainer,children:i});return v.jsx(oa,{value:u,children:u.disableAnimation&&u.isOpen?c:v.jsx(_t,{children:u.isOpen?c:null})})});ct.displayName="HeroUI.Modal";var ua=ct;function ba({title:h,titleId:o,...i},d){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":o},i),h?n.createElement("title",{id:o},h):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const ga=n.forwardRef(ba),xa=({allUsers:h,departments:o,designations:i,attendanceTypes:d,setUsers:u,isMobile:c,isTablet:P,pagination:m,onPageChange:y,onRowsPerPageChange:C,totalUsers:N=0,loading:$=!1,updateEmployeeOptimized:S,deleteEmployeeOptimized:z})=>{const[U,p]=n.useState({}),[k,D]=n.useState(!1),[b,K]=n.useState(null),[E,A]=n.useState({});tt();const g=(a,l,x)=>{p(w=>({...w,[`${a}-${l}`]:x}))},f=(a,l)=>U[`${a}-${l}`]||!1,M=async(a,l)=>{var x;g(a,"department",!0);try{if((await ee.post(route("user.updateDepartment",{id:a}),{department:l})).status===200){const I=((x=o.find(B=>B.id===parseInt(l)))==null?void 0:x.name)||"";S&&S(a,{department_id:l,department:I}),T.success("Department updated successfully")}}catch(w){console.error("Error updating department:",w),T.error("Failed to update department")}finally{g(a,"department",!1)}},q=async(a,l)=>{var x;g(a,"designation",!0);try{if((await ee.post(route("user.updateDesignation",{id:a}),{designation:l})).status===200){const I=((x=i.find(B=>B.id===parseInt(l)))==null?void 0:x.title)||"";S&&S(a,{designation_id:l,designation:I}),T.success("Designation updated successfully")}}catch(w){console.error("Error updating designation:",w),T.error("Failed to update designation")}finally{g(a,"designation",!1)}},j=async(a,l)=>{var x;g(a,"attendance_type",!0);try{if((await ee.post(route("user.updateAttendanceType",{id:a}),{attendance_type_id:l})).status===200){const I=((x=d.find(B=>B.id===parseInt(l)))==null?void 0:x.name)||"";S&&S(a,{attendance_type_id:l,attendance_type:I}),T.success("Attendance type updated successfully")}}catch(w){console.error("Error updating attendance type:",w),T.error("Failed to update attendance type")}finally{g(a,"attendance_type",!1)}},J=async a=>{g(a,"delete",!0);try{if(!confirm("Are you sure you want to delete this employee?")){g(a,"delete",!1);return}(await ee.delete(route("user.delete",{id:a}))).status===200&&(z&&z(a),T.success("Employee deleted successfully"))}catch(l){console.error("Error deleting employee:",l),T.error("Failed to delete employee")}finally{g(a,"delete",!1)}},R=(a,l)=>{A(x=>({...x,[a]:l}))},se=async()=>{g(b.id,"config",!0);try{(await ee.post(route("user.updateAttendanceConfig",{id:b.id}),E)).status===200&&(S&&S(b.id,E),D(!1),T.success("Attendance configuration updated successfully"))}catch(a){console.error("Error updating attendance config:",a),T.error("Failed to update attendance configuration")}finally{g(b.id,"config",!1)}},X=n.useMemo(()=>{const a=[{name:"#",uid:"sl"},{name:"EMPLOYEE",uid:"employee"},{name:"DEPARTMENT",uid:"department"},{name:"DESIGNATION",uid:"designation"},{name:"ACTIONS",uid:"actions"}];return c||a.splice(2,0,{name:"CONTACT",uid:"contact"}),!c&&!P&&a.splice(a.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type"}),a},[c,P]),te=(a,l,x)=>{const w=a[l],ae=(m!=null&&m.currentPage&&(m!=null&&m.perPage)?Number((m.currentPage-1)*m.perPage):0)+(typeof x=="number"?x:0)+1;switch(l){case"sl":return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:ae})})});case"employee":return r("div",{children:[e(nt,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:c?"sm":"md",fallback:e(at,{className:"w-4 h-4"})},name:a==null?void 0:a.name,description:c?null:`ID: ${(a==null?void 0:a.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),c&&r("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10",children:[r("div",{className:"flex items-center gap-1",children:[e(ga,{className:"w-3 h-3"}),(a==null?void 0:a.employee_id)||"N/A"]}),r("div",{className:"flex items-center gap-1",children:[e(Ae,{className:"w-3 h-3"}),a==null?void 0:a.email]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-1",children:[e(je,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(Ae,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(je,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"department":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(xe,{children:[e(be,{children:e(V,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",startContent:f(a.id,"department")?e(ie,{size:"sm"}):e(De,{className:"w-4 h-4"}),endContent:e(we,{className:"w-4 h-4 rotate-90"}),isDisabled:f(a.id,"department"),children:a.department||"Select Department"})}),e(ge,{"aria-label":"Department options",children:o==null?void 0:o.map(_=>e(de,{onPress:()=>M(a.id,_.id),children:_.name},_.id.toString()))})]})});case"designation":const Z=a.department_id||a.department,O=(i==null?void 0:i.filter(_=>_.department_id===parseInt(Z)))||[];return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(xe,{children:[e(be,{children:e(V,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",startContent:f(a.id,"designation")?e(ie,{size:"sm"}):e(Se,{className:"w-4 h-4"}),endContent:e(we,{className:"w-4 h-4 rotate-90"}),isDisabled:!Z||f(a.id,"designation"),children:a.designation||"Select Designation"})}),e(ge,{"aria-label":"Designation options",children:O.map(_=>e(de,{onPress:()=>q(a.id,_.id),children:_.title},_.id.toString()))})]})});case"attendance_type":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(xe,{children:[e(be,{children:e(V,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",startContent:f(a.id,"attendance_type")?e(ie,{size:"sm"}):e($e,{className:"w-4 h-4"}),endContent:e(we,{className:"w-4 h-4 rotate-90"}),isDisabled:f(a.id,"attendance_type"),children:a.attendance_type||"Select Type"})}),e(ge,{"aria-label":"Attendance Type options",children:d==null?void 0:d.map(_=>e(de,{onPress:()=>j(a.id,_.id),children:_.name},_.id.toString()))})]})});case"actions":return e("div",{className:"relative flex justify-center items-center",children:r(xe,{children:[e(be,{children:e(V,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground",children:e(we,{className:"w-5 h-5"})})}),r(ge,{"aria-label":"Employee Actions",children:[e(de,{startContent:e(rt,{className:"w-4 h-4"}),onPress:()=>window.location.href=route("profile",{user:a.id}),children:"Edit Profile"},"edit"),e(de,{className:"text-danger",color:"danger",startContent:f(a.id,"delete")?e(ie,{size:"sm"}):e(Kt,{className:"w-4 h-4"}),onPress:()=>J(a.id),isDisabled:f(a.id,"delete"),children:"Delete"},"delete")]})]})});default:return w}};return r("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg",style:{maxHeight:"calc(100vh - 200px)"},children:[e("div",{className:"overflow-auto flex-grow",children:r(qt,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:c,children:[e(Qt,{columns:X,children:a=>e(Yt,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.uid==="sl"?60:void 0,children:a.name},a.uid)}),e(Ut,{items:h||[],emptyContent:"No employees found",loadingContent:e(ie,{}),isLoading:$,children:(a,l)=>{const x=h?h.findIndex(w=>w.id===a.id):l;return e(Jt,{children:w=>e(Xt,{children:te(a,w,x)})},a.id)}})]})}),!m||$?null:r("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[r("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(m.currentPage-1)*m.perPage+1," to ",Math.min(m.currentPage*m.perPage,m.total)," of ",m.total," employees"]}),e(st,{total:Math.ceil(m.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:y,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]}),e(ua,{isOpen:k,onClose:()=>D(!1),size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"bg-white/10 backdrop-blur-md border border-white/20",header:"border-b border-white/20",body:"py-6",footer:"border-t border-white/20"},children:e(ca,{children:a=>r(et,{children:[r(ha,{className:"flex flex-col gap-1",children:[r("div",{className:"flex items-center gap-2",children:[e(Gt,{className:"w-5 h-5"}),"Configure Attendance Settings"]}),r("p",{className:"text-sm text-default-500",children:["Employee: ",b==null?void 0:b.name,(b==null?void 0:b.attendance_type)&&e(Y,{size:"sm",variant:"flat",className:"ml-2",children:b==null?void 0:b.attendance_type})]})]}),e(ia,{children:r("div",{className:"space-y-4",children:[e(ce,{label:"Check-in Time (24h format)",placeholder:"09:00",value:E.checkin_time||"",onValueChange:l=>R("checkin_time",l),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}}),e(ce,{label:"Check-out Time (24h format)",placeholder:"17:00",value:E.checkout_time||"",onValueChange:l=>R("checkout_time",l),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}}),e(ce,{label:"Working Days",placeholder:"1,2,3,4,5 (Mon-Fri)",value:E.working_days||"",onValueChange:l=>R("working_days",l),description:"Enter comma-separated day numbers (1=Monday, 7=Sunday)",classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}}),e(ce,{label:"Grace Time (minutes)",placeholder:"15",value:E.grace_time||"",onValueChange:l=>R("grace_time",l),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})]})}),r(ma,{children:[e(V,{variant:"light",onPress:a,children:"Cancel"}),e(V,{color:"primary",onPress:se,isLoading:f(b==null?void 0:b.id,"config"),children:"Save Changes"})]})]})})})]})},wa=({title:h,departments:o,designations:i,attendanceTypes:d})=>{var B,ae,Z,O,_,he,pe,L,fe,le,Re,Ee,Fe,Me,Be,Te,ze,Ie,Oe;const u=tt(),c=Ye(u.breakpoints.down("sm")),P=Ye(u.breakpoints.down("md")),[m,y]=n.useState([]),[C,N]=n.useState(!0),[$,S]=n.useState(0),[z,U]=n.useState(1),[p,k]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[D,b]=n.useState("table"),[K,E]=n.useState(!1),[A,g]=n.useState({currentPage:1,perPage:10,total:0}),[f,M]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),q=n.useCallback(async()=>{N(!0);try{const{data:t}=await ee.get(route("employees.paginate"),{params:{page:A.currentPage,perPage:A.perPage,search:p.search,department:p.department,designation:p.designation,attendanceType:p.attendanceType}});y(t.employees.data),S(t.employees.total),U(t.employees.last_page),g(s=>({...s,total:t.employees.total})),t.stats&&M(t.stats)}catch(t){console.error("Error fetching employees:",t),T.error("Failed to load employees data")}finally{N(!1)}},[A.currentPage,A.perPage,p]),j=n.useCallback(async()=>{try{const{data:t}=await ee.get(route("employees.stats"));t.stats&&M(t.stats)}catch(t){console.error("Error fetching employee stats:",t)}},[]);n.useEffect(()=>{q(),j()},[q,j]);const J=n.useCallback(t=>{k(s=>({...s,search:t})),g(s=>({...s,currentPage:1}))},[]),R=n.useCallback(t=>{k(s=>({...s,department:t,designation:t!=="all"?"all":s.designation})),g(s=>({...s,currentPage:1}))},[]),se=n.useCallback(t=>{k(s=>({...s,designation:t})),g(s=>({...s,currentPage:1}))},[]),X=n.useCallback(t=>{k(s=>({...s,attendanceType:t})),g(s=>({...s,currentPage:1}))},[]),te=n.useCallback(t=>{g(s=>({...s,currentPage:t}))},[]),ne=n.useCallback(t=>{g(s=>({...s,perPage:t,currentPage:1}))},[]),a=n.useCallback((t,s)=>{y(W=>W.map(G=>G.id===t?{...G,...s}:G))},[]),l=n.useCallback(t=>{y(s=>s.filter(W=>W.id!==t)),S(s=>s-1),g(s=>({...s,total:s.total-1})),j()},[j]);n.useCallback((t,s)=>{a(t,{active:s}),j()},[a,j]);const x=n.useMemo(()=>p.department==="all"?i:i.filter(t=>t.department_id===parseInt(p.department)),[i,p.department]),w=n.useMemo(()=>{var t,s,W,G,oe,H,Le,He,Ve,We,Ge;return[{title:"Total Employees",value:((t=f.overview)==null?void 0:t.total_employees)||0,icon:e(ke,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((s=f.overview)==null?void 0:s.active_employees)||0,icon:e(Zt,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((G=(W=f.workforce_health)==null?void 0:W.status_ratio)==null?void 0:G.active_percentage)||0}% Active`},{title:"Departments",value:((oe=f.overview)==null?void 0:oe.total_departments)||0,icon:e(De,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((H=f.overview)==null?void 0:H.total_designations)||0,icon:e(Se,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Le=f.workforce_health)==null?void 0:Le.retention_rate)||0}%`,icon:e(ea,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((Ve=(He=f.hiring_trends)==null?void 0:He.recent_hires)==null?void 0:Ve.last_30_days)||0,icon:e(Ue,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((We=f.hiring_trends)==null?void 0:We.monthly_growth_rate)||0}%`,icon:e(Mt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Ge=f.overview)==null?void 0:Ge.total_attendance_types)||0,icon:e($e,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[f]),I=({user:t,index:s})=>{const W=o==null?void 0:o.find(H=>H.id===t.department_id),G=i==null?void 0:i.find(H=>H.id===t.designation_id),oe=d==null?void 0:d.find(H=>H.id===t.attendance_type_id);return e(Pt,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>window.location.href=route("profile",{user:t.id}),children:r(kt,{className:"p-4 flex flex-col h-full",children:[r("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex-shrink-0",children:e(nt,{avatarProps:{radius:"lg",src:t==null?void 0:t.profile_image,size:"md",fallback:e(at,{className:"w-4 h-4"})},name:t==null?void 0:t.name,description:`ID: ${(t==null?void 0:t.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left text-sm",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}})}),e("div",{className:"flex-1 min-w-0 flex justify-end",children:e(V,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:H=>{H.stopPropagation(),window.location.href=route("profile",{user:t.id})},children:e(rt,{className:"w-4 h-4"})})})]}),e("div",{className:"flex-1 flex flex-col gap-3",children:r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(Ae,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs truncate",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(je,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:t==null?void 0:t.phone})]})]})}),r("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[W&&e(Y,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(De,{className:"w-3 h-3"}),children:W.name}),G&&e(Y,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(Se,{className:"w-3 h-3"}),children:G.title}),oe&&e(Y,{size:"sm",variant:"bordered",className:"text-xs",startContent:e($e,{className:"w-3 h-3"}),children:oe.name})]})]})})};return r(et,{children:[e(Ct,{title:h}),e(Lt,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Bt,{in:!0,timeout:800,children:e(Tt,{children:e(Vt,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e(ke,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:c?"Add":"Add Employee",icon:e(Ue,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:r("div",{className:"p-4 sm:p-6",children:[e(Wt,{stats:w,className:"mb-6"}),r("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(Q,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Department Distribution"}),e("div",{className:"space-y-3",children:(ae=(B=f.distribution)==null?void 0:B.by_department)==null?void 0:ae.slice(0,5).map((t,s)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},s))})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(Q,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Hiring Trends"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((O=(Z=f.hiring_trends)==null?void 0:Z.recent_hires)==null?void 0:O.last_30_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((he=(_=f.hiring_trends)==null?void 0:_.recent_hires)==null?void 0:he.last_90_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"This Year"}),e("span",{className:"text-sm font-medium text-foreground",children:((L=(pe=f.hiring_trends)==null?void 0:pe.recent_hires)==null?void 0:L.last_year)||0})]}),e("div",{className:"pt-2 border-t border-white/10",children:r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),r("span",{className:`text-sm font-medium ${(((fe=f.hiring_trends)==null?void 0:fe.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((le=f.hiring_trends)==null?void 0:le.monthly_growth_rate)||0,"%"]})]})})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(Q,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Workforce Health"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Retention Rate"}),r("span",{className:"text-sm font-medium text-green-400",children:[((Re=f.workforce_health)==null?void 0:Re.retention_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),r("span",{className:"text-sm font-medium text-orange-400",children:[((Ee=f.workforce_health)==null?void 0:Ee.turnover_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Active Employees"}),r("span",{className:"text-sm font-medium text-blue-400",children:[((Me=(Fe=f.workforce_health)==null?void 0:Fe.status_ratio)==null?void 0:Me.active_percentage)||0,"%"]})]})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(Q,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Attendance Types"}),e("div",{className:"space-y-3",children:(Te=(Be=f.distribution)==null?void 0:Be.by_attendance_type)==null?void 0:Te.map((t,s)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},s))})]})]}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(ce,{label:"Search Employees",variant:"bordered",placeholder:"Search by name, email, or employee ID...",value:p.search,onValueChange:J,startContent:e(zt,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:c?"sm":"md"})}),r("div",{className:"flex gap-2 items-end",children:[r(aa,{variant:"bordered",className:"bg-white/5",children:[r(V,{isIconOnly:c,color:D==="table"?"primary":"default",onPress:()=>b("table"),className:D==="table"?"bg-blue-500/20":"",children:[e(ta,{className:"w-4 h-4"}),!c&&e("span",{className:"ml-1",children:"Table"})]}),r(V,{isIconOnly:c,color:D==="grid"?"primary":"default",onPress:()=>b("grid"),className:D==="grid"?"bg-blue-500/20":"",children:[e(It,{className:"w-4 h-4"}),!c&&e("span",{className:"ml-1",children:"Grid"})]})]}),r(V,{isIconOnly:c,variant:"bordered",onPress:()=>E(!K),className:K?"bg-purple-500/20":"bg-white/5",children:[e(ra,{className:"w-4 h-4"}),!c&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),K&&e(Ot,{in:!0,timeout:300,children:r("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r(Pe,{label:"Department",variant:"bordered",selectedKeys:p.department!=="all"?[p.department]:[],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";R(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(re,{value:"all",children:"All Departments"},"all"),o==null?void 0:o.map(t=>e(re,{value:t.id.toString(),children:t.name},t.id.toString()))]}),r(Pe,{label:"Designation",variant:"bordered",selectedKeys:p.designation!=="all"?[p.designation]:[],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";se(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(re,{value:"all",children:"All Designations"},"all"),x==null?void 0:x.map(t=>e(re,{value:t.id.toString(),children:t.title},t.id.toString()))]}),!c&&r(Pe,{label:"Attendance Type",variant:"bordered",selectedKeys:p.attendanceType!=="all"?[p.attendanceType]:[],onSelectionChange:t=>{const s=Array.from(t)[0]||"all";X(s)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(re,{value:"all",children:"All Attendance Types"},"all"),d==null?void 0:d.map(t=>e(re,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(p.search||p.department!=="all"||p.designation!=="all"||p.attendanceType!=="all")&&r("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[p.search&&r(Y,{variant:"flat",color:"primary",size:"sm",onClose:()=>k(t=>({...t,search:""})),children:["Search: ",p.search]}),p.department!=="all"&&r(Y,{variant:"flat",color:"secondary",size:"sm",onClose:()=>k(t=>({...t,department:"all"})),children:["Department: ",(ze=o==null?void 0:o.find(t=>t.id===parseInt(p.department)))==null?void 0:ze.name]}),p.designation!=="all"&&r(Y,{variant:"flat",color:"warning",size:"sm",onClose:()=>k(t=>({...t,designation:"all"})),children:["Designation: ",(Ie=i==null?void 0:i.find(t=>t.id===parseInt(p.designation)))==null?void 0:Ie.title]}),p.attendanceType!=="all"&&r(Y,{variant:"flat",color:"success",size:"sm",onClose:()=>k(t=>({...t,attendanceType:"all"})),children:["Attendance: ",(Oe=d==null?void 0:d.find(t=>t.id===parseInt(p.attendanceType)))==null?void 0:Oe.name]})]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r(Q,{variant:"h6",className:"font-semibold text-foreground",children:[D==="table"?"Employee Table":"Employee Grid",r("span",{className:"text-sm text-default-500 ml-2",children:["(",$," ",$===1?"employee":"employees",")"]})]})}),C?r("div",{className:"text-center py-8",children:[e(sa,{size:40}),e(Q,{className:"mt-4",color:"textSecondary",children:"Loading employees data..."})]}):D==="table"?e(xa,{allUsers:m,departments:o,designations:i,attendanceTypes:d,setUsers:y,isMobile:c,isTablet:P,pagination:A,onPageChange:te,onRowsPerPageChange:ne,totalUsers:$,loading:C,updateEmployeeOptimized:a,deleteEmployeeOptimized:l}):r("div",{className:"p-4",children:[m.length>0?e("div",{className:`grid gap-4 ${c?"grid-cols-1":P?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:m.map((t,s)=>e(I,{user:t,index:s},t.id))}):r("div",{className:"text-center py-8",children:[e(ke,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(Q,{variant:"body1",color:"textSecondary",children:"No employees found"}),e(Q,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),m.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(st,{total:Math.ceil($/A.perPage),initialPage:A.currentPage,page:A.currentPage,onChange:te,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};wa.layout=h=>e(Ht,{children:h});export{wa as default};
