import{r as c,b as t,c as y,a as p,g as b}from"./app-WmnCG5Fz.js";import{H as g,J as w,K as S,L as k,M as I,T as f,B as r,G as u,d as C,b as v}from"./App-0uPz_bAn.js";import{F}from"./ClipboardDocumentListIcon-BA_OH8tE.js";import{F as W}from"./CheckCircleIcon-CBAc1kti.js";import{C as D}from"./CardContent-CjdXiIyz.js";import{s as G}from"./chunk-TLYTI3QM-DaaDA0Jb.js";import"./app-DNvvDii_.js";const R=({title:s,value:i,icon:m,color:o,isLoaded:n,testId:l})=>t(v,{in:!0,timeout:300,children:t(C,{sx:{height:"100%"},children:t(D,{sx:{p:{xs:2,sm:3},height:"100%",display:"flex",flexDirection:"column"},children:t(G,{className:"rounded-lg",isLoaded:n,"data-testid":l,children:p(r,{display:"flex",flexDirection:"column",gap:2,role:"region","aria-label":`${s} statistics`,sx:{height:"100%"},children:[p(r,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem",md:"1rem"},fontWeight:500,lineHeight:1.2,flex:1,mr:1},component:"h3",children:s}),t(r,{sx:{bgcolor:`${o}20`,borderRadius:"12px",p:1.5,display:"flex",alignItems:"center",justifyContent:"center",minWidth:{xs:40,sm:48},minHeight:{xs:40,sm:48},flexShrink:0},children:t(m,{style:{width:"24px",height:"24px",color:o,strokeWidth:2},"aria-hidden":"true"})})]}),t(r,{sx:{mt:"auto"},children:t(f,{variant:"h4",component:"div",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem",lg:"2rem",xl:"2.5rem"},fontWeight:700,color:"text.primary",lineHeight:1},"aria-live":"polite",children:typeof i=="number"?i.toLocaleString():i})})]})})})})}),B=()=>{const[s,i]=c.useState({total:0,completed:0,pending:0,rfi_submissions:0}),[m,o]=c.useState(!0),[n,l]=c.useState(null);c.useEffect(()=>{let e=!0;const d=new AbortController;return(async()=>{var h;try{o(!0),l(null);const a=await b.get(route("stats"),{signal:d.signal,timeout:1e4});if(e&&((h=a.data)!=null&&h.statistics))i(a.data.statistics);else throw new Error("Invalid response structure")}catch(a){e&&!d.signal.aborted&&(console.error("Failed to fetch statistics:",a),l(a.message),i({total:0,completed:0,pending:0,rfi_submissions:0}))}finally{e&&o(!1)}})(),()=>{e=!1,d.abort()}},[]);const x=[{id:"total-daily-works",title:"Total Daily Works",value:s.total,icon:F,color:g[600],testId:"stat-total-works"},{id:"completed-daily-works",title:"Completed Daily Works",value:s.completed,icon:W,color:w[600],testId:"stat-completed-works"},{id:"pending-daily-works",title:"Pending Daily Works",value:s.pending,icon:k,color:S[600],testId:"stat-pending-works"},{id:"rfi-submissions",title:"RFI Submissions",value:s.rfi_submissions,icon:I,color:g[600],testId:"stat-rfi-submissions"}];return n?t(r,{sx:{flexGrow:1,pt:2,pr:2,pl:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:t(y,{className:"p-4 bg-danger-50 border-danger-200",children:p(f,{color:"error",variant:"body1",children:["Failed to load statistics: ",n]})})}):t(r,{sx:{flexGrow:1,pt:2,pr:2,pl:2,height:"100%"},component:"section","aria-label":"Statistics Dashboard",children:t(u,{container:!0,spacing:{xs:2,sm:2,md:2},sx:{height:"100%",maxWidth:"1400px",margin:"0 auto"},alignItems:"stretch",children:x.map((e,d)=>t(u,{item:!0,xs:12,sm:6,md:6,lg:6,xl:6,children:t(R,{title:e.title,value:e.value,icon:e.icon,color:e.color,isLoaded:!m,testId:e.testId})},e.id))})})};export{B as default};
