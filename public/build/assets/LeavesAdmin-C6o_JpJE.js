import{V as J,j as m,a as e,M as K,F as N}from"./app-B-_JgO5j.js";import{r as t,e as Q,h as X,f as Z,a as b,G as v,T as D,B as $}from"./vendor-CTZgMKHz.js";import{d as U}from"./Search-Fd-5-iZ6.js";import{A as ee,G as te}from"./App-IbWDRuYy.js";import{L as ae,D as re,a as se}from"./DeleteLeaveForm-Dgy-KFK9.js";import{d as oe}from"./dayjs.min-CfzcSMzt.js";import{A as ne}from"./Add-CvB9lzmP.js";import{i as E}from"./chunk-JZOL6GD7-jt9l0MmV.js";import"./Edit-D8i8ckpX.js";import"./chunk-7H6JMIKS-1d7NZuOy.js";import"./chunk-YBBOLEEC-CIMUNTfJ.js";import"./useField-Bj4sT4le.js";import"./chunk-NCVCYSZZ-DqyCXw5X.js";import"./chunk-7F3ZLNJ6-BN_r0i0A.js";import"./chunk-YRZGWF2W-F7ALnk6e.js";import"./chunk-CKQ4RPMV-DlUhQujf.js";import"./chunk-MT6723RH-DiXTBkLH.js";import"./chunk-LY4WDGUU-Bj-J_YSI.js";import"./chunk-TLBGAR4N-D78LIqQs.js";import"./GlassDialog-mZPdmifM.js";import"./LoadingButton-Bl_iSpGd.js";const le=({title:c,allUsers:h})=>{const{auth:de,props:T}=J(),[p,n]=t.useState(null),[_,g]=t.useState(T.leavesData),[f,u]=t.useState(),[A,L]=t.useState(0),[P,y]=t.useState(0),[j,C]=t.useState(null),[r,w]=t.useState(""),[s,G]=t.useState(oe().format("YYYY-MM")),[l,k]=t.useState(30),[d,F]=t.useState(1),[Y,B]=t.useState(),[S,I]=t.useState(""),x=a=>n(a),O=t.useCallback((a,i)=>{C(a),n(i)},[]),R=t.useCallback(()=>{n(null),C(null)},[]),H=a=>w(a.target.value.toLowerCase()),M=a=>{G(a.target.value)},V=async()=>{var a,i;try{const o=await axios.get(route("leaves.paginate"),{params:{page:d,perPage:l,employee:r,month:s}});if(o.status===200){const{data:W,total:q,last_page:z}=o.data.leaves;u(W),L(q),y(z)}}catch(o){console.error("Error fetching leaves data:",o),I(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Error retrieving data.")}};return t.useEffect(()=>{V()},[s,d,l,r]),m(N,{children:[e(K,{title:c}),["add_leave","edit_leave"].includes(p)&&e(ae,{setTotalRows:L,setLastPage:y,setLeaves:u,perPage:l,employee:r,currentPage:d,selectedMonth:s,allUsers:h,open:!0,setLeavesData:g,closeModal:()=>n(null),leavesData:_,currentLeave:p==="edit_leave"?Y:null,handleMonthChange:M}),p==="delete_leave"&&e(re,{open:!0,handleClose:R,leaveIdToDelete:j,setLeavesData:g}),e($,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Q,{in:!0,children:m(te,{children:[e(X,{title:"Leaves",sx:{padding:"24px"},action:e(Z,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(ne,{}),onClick:()=>x("add_leave"),children:"Add Leave"})}),e(b,{children:m(v,{container:!0,spacing:2,children:[e(v,{item:!0,xs:12,sm:6,md:4,children:e(E,{label:"Search",fullWidth:!0,variant:"bordered",placeholder:"Employee...",value:r,onChange:H,endContent:e(U,{})})}),e(v,{item:!0,xs:12,sm:6,md:4,children:e(E,{label:"Select Month",type:"month",variant:"bordered",onChange:M,value:s})})]})}),e(b,{children:f?e(se,{totalRows:A,lastPage:P,setCurrentPage:F,setPerPage:k,perPage:l,currentPage:d,handleClickOpen:O,setCurrentLeave:B,openModal:x,leaves:f,allUsers:h,setLeaves:u,employee:r,selectedMonth:s}):S?e(D,{variant:"body1",align:"center",children:S}):e(D,{variant:"body1",align:"center",children:"Loading leaves data..."})})]})})})]})};le.layout=c=>e(ee,{children:c});export{le as default};
