import{R as Ke,r as n,b as t,j as e,o as Ve,J as ve,a as J,c as _e,F as ae,h as Ce,d as ke}from"./app-z4s5sYKZ.js";import{B as s,T as i,i as te,a7 as re,a8 as Qe,F as K,a9 as Xe,b as p,a as Se,aa as Me,d as k,G as qe,ab as Ze,c as ea}from"./App-lYuiCeFz.js";import{d as u}from"./dayjs.min-DZFMHsZ9.js";import{P as aa}from"./PageHeader-CqkUxZm7.js";import{F as R}from"./CheckCircleIcon-CRRAseKz.js";import{F as $e}from"./XCircleIcon-ESIdd6__.js";import{F as se}from"./UserIcon-CThnUmFQ.js";import{F as A}from"./ExclamationTriangleIcon-CBcuXhrB.js";import{B as ta}from"./Button-flahXtBE.js";import{C as ra}from"./CardHeader-Ixl1TpnL.js";import{F as Ye}from"./DocumentArrowDownIcon-DoFLhWLA.js";import{C as Le}from"./CardContent-Dr_xO4Ae.js";import{s as Pe}from"./chunk-TLYTI3QM-KMW-2Aw6.js";import{t as Fe,a as Te,b as Ee,c as Ae,d as Re,e as w}from"./chunk-F3UDT23P-DmHXsHIa.js";import{p as Ue}from"./chunk-O5I3QTYU-CzsU2vYt.js";import{u as sa}from"./chunk-R6AK6OQ4-D-AbbXCy.js";import"./app-DNvvDii_.js";import"./useHasTabbableChild-BzdOGCVc.js";import"./chunk-7F3ZLNJ6-CESd7uTm.js";import"./index-CokAva9Y.js";const na=Ke.memo(({absentUsers:S,selectedDate:d,getUserLeave:V})=>{const[N,M]=n.useState(5),[g,y]=n.useState(""),m=n.useMemo(()=>{if(!g.trim())return S;const l=g.toLowerCase();return S.filter(c=>{var j,I,z,_;const x=((j=c.name)==null?void 0:j.toLowerCase())||"",v=((I=c.employee_id)==null?void 0:I.toString().toLowerCase())||"",Y=((z=c.email)==null?void 0:z.toLowerCase())||"",L=((_=c.phone)==null?void 0:_.toString().toLowerCase())||"";return x.includes(l)||v.includes(l)||Y.includes(l)||L.includes(l)})},[S,g]),$=()=>{M(l=>l+5)},E=l=>{y(l.target.value),M(5)},U=l=>{switch(l==null?void 0:l.toLowerCase()){case"approved":return e(R,{className:"w-4 h-4 text-success"});case"rejected":return e($e,{className:"w-4 h-4 text-danger"});default:return e(p,{className:"w-4 h-4 text-warning"})}},Q=m.length;return S.length===0?t(s,{className:"h-full",children:[e(aa,{title:"Perfect Attendance!",subtitle:`No employees are absent on ${u(d).format("MMMM D, YYYY")}`,icon:e(R,{className:"w-6 h-6"}),variant:"gradient",actionButtons:[{label:"0",variant:"flat",color:"success",icon:e(R,{className:"w-4 h-4"}),className:"bg-green-500/10 text-green-500 border-green-500/20"}]}),t(s,{role:"region","aria-label":"No absent employees today",className:"text-center py-12 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg h-96 flex flex-col items-center justify-center",children:[e(R,{className:"w-12 h-12 text-success mx-auto mb-4"}),e(i,{variant:"body2",color:"success",className:"mb-2 text-sm font-medium",children:"Perfect Attendance!"}),e(i,{variant:"caption",color:"textSecondary",className:"text-xs",children:"No employees are absent today."}),e(i,{variant:"caption",color:"textSecondary",className:"mt-1 block text-xs",children:"All employees are either present or on approved leave."})]})]}):t(s,{className:"h-full",children:[e(s,{className:"mb-4 flex items-center justify-between",children:e(s,{className:"mb-4",children:t(i,{variant:"h6",className:"font-semibold text-red-600 flex items-center gap-2",children:[e($e,{className:"w-5 h-5"}),"Absent Employees (",Q,")"]})})}),e(s,{className:"mb-3 m-2",children:e(te,{type:"text",placeholder:"Search absent employees...",value:g,onChange:E,startContent:e(re,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search absent employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 h-10",input:"text-sm"}})}),g&&e(s,{className:"mb-2 ",children:t(i,{variant:"caption",color:"textSecondary",className:"text-xs",children:[m.length," of ",S.length," employees found"]})}),g&&m.length===0&&t(s,{className:"text-center py-8 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg",children:[e(re,{className:"w-8 h-8 text-default-300 mx-auto mb-2"}),t(i,{variant:"body2",color:"textSecondary",className:"text-sm",children:['No employees found matching "',g,'"']})]}),t(s,{role:"region","aria-label":"Absent employees list",className:"overflow-y-auto max-h-[520px]",children:[m.slice(0,N).map(l=>{var x,v;const c=V(l.id);return e(Xe,{in:!0,timeout:"auto",children:e("div",{className:"p-3 m-2 bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/15 transition-all duration-200 rounded-lg",children:t(s,{className:"flex items-start justify-between",children:[t(s,{className:"flex items-center gap-2 flex-1",children:[e(Qe,{src:l.profile_image,alt:l.name,size:"sm",fallback:e(se,{className:"w-4 h-4"})}),t(s,{className:"flex-1 min-w-0",children:["                                            ",e(i,{variant:"body2",fontWeight:"medium",className:"truncate text-sm",children:l.name}),l.employee_id&&t(i,{variant:"caption",color:"textSecondary",className:"block text-xs",children:["ID: ",l.employee_id]}),c?t(s,{className:"flex flex-col gap-1 mt-1",children:[t(i,{variant:"caption",color:"textSecondary",className:"flex items-center gap-1 text-xs",children:[e(K,{className:"w-3 h-3"}),c.from_date===c.to_date?c.from_date:`${c.from_date} - ${c.to_date}`]}),t(i,{variant:"caption",color:"primary",className:"flex items-center gap-1 text-xs",children:[U(c.status),c.leave_type," Leave"]})]}):t(i,{variant:"caption",color:"error",className:"flex items-center gap-1 mt-1 text-xs",children:[e(A,{className:"w-3 h-3"}),"Absent without leave"]})]})]}),c&&e("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 rounded-md px-1.5 py-0.5 ml-2",children:t("div",{className:"flex items-center gap-1",children:[U(c.status),e(i,{variant:"caption",className:`font-semibold text-xs ${((x=c.status)==null?void 0:x.toLowerCase())==="approved"?"text-green-600":((v=c.status)==null?void 0:v.toLowerCase())==="rejected"?"text-red-600":"text-orange-600"}`,children:c.status})]})})]})})},l.id)}),N<m.length&&e(s,{className:"text-center mt-4 pb-4",children:t(ta,{variant:"outlined",onClick:$,startIcon:e(Ve,{className:"w-4 h-4"}),size:"small",color:"warning",fullWidth:!0,children:["Show More (",m.length-N," remaining)"]})})]})]})}),La=({handleDateChange:S,selectedDate:d,updateTimeSheet:V,externalFilterData:N,externalEmployee:M})=>{var we,Ne,ye;const{auth:g}=ve().props,{url:y}=ve(),m=Se("(min-width: 1025px)"),$=Se("(min-width: 641px) and (max-width: 1024px)"),[E,U]=n.useState([]),[Q,l]=n.useState([]),[c,x]=n.useState([]),[v,Y]=n.useState(""),[L,j]=n.useState(0),[I,z]=n.useState(0),[_,oa]=n.useState(10),[P,X]=n.useState(1),[F,ne]=n.useState(M||""),[B,T]=n.useState(!1),[je,la]=n.useState(0),[ca,oe]=n.useState(null),[le,ia]=n.useState(!0),[q,ce]=n.useState(new Date),ie=n.useRef(null),de=n.useRef(N||{currentMonth:u().format("YYYY-MM")}),[C,me]=n.useState(N||{currentMonth:u().format("YYYY-MM")}),W=n.useCallback(async()=>{try{return T(!1),await ue(d,P,_,F,C,!0),y!=="/attendance-employee"&&await pe(d,F),ce(new Date),!0}catch(a){return console.error("Error refreshing timesheet:",a),!1}finally{T(!0)}},[d,P,_,F,C,y]),Z=n.useCallback(async()=>{if(d)try{const a=route("check-timesheet-updates",{date:u(d).format("YYYY-MM-DD"),month:C.currentMonth}),o=await fetch(a);if(!o.ok){const b=await o.json().catch(()=>({}));throw new Error(`HTTP ${o.status}: ${b.message||"Failed to check for updates"}`)}const r=await o.json();r.success&&r.last_updated!==ie.current&&r.last_updated&&(ie.current=r.last_updated,await W(),oe(new Date)),ce(new Date)}catch(a){console.error("Error checking for timesheet updates:",a)}},[d,C.currentMonth,W]),he=n.useMemo(()=>q?q.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):null,[q]),ue=async(a,o,r,b,h,H=!1)=>{var ee,G;if(!a){T(!0),Y("No date selected");return}const O=y!=="/attendance-employee"?route("admin.getPresentUsersForDate"):route("getCurrentUserAttendanceForDate");try{T(!1),Y("");const f=await J.get(O,{params:{page:o,perPage:r,employee:b,date:u(a).format("YYYY-MM-DD"),currentYear:h!=null&&h.currentMonth?u(h.currentMonth).year():"",currentMonth:h!=null&&h.currentMonth?u(h.currentMonth).format("MM"):"",_t:H?Date.now():void 0}});f.status===200?(U(f.data.attendances||[]),j(f.data.total||0),z(f.data.last_page||1),X(f.data.current_page||1),oe(new Date),Y("")):Y(`Unexpected response: ${f.status}`)}catch(f){console.error("Error fetching attendance data:",f),Y(((G=(ee=f.response)==null?void 0:ee.data)==null?void 0:G.message)||"An error occurred while retrieving attendance data."),U([]),j(0)}finally{T(!0)}},pe=async(a,o)=>{if(y==="/attendance-employee"){x([]),l([]);return}if(!a){x([]),l([]);return}try{const r=await J.get(route("admin.getAbsentUsersForDate"),{params:{date:u(a).format("YYYY-MM-DD"),employee:o||"",_t:Date.now()}});r.status===200?(x(r.data.absent_users||[]),l(r.data.leaves||[])):(console.warn("Unexpected response getting absent users:",r.status),x([]),l([]))}catch(r){console.error("Error fetching absent users:",r),x([]),l([])}},Ie=a=>{ne(a.target.value.toLowerCase())},fe=a=>{X(a)};n.useCallback((a,o)=>{me(r=>({...r,[a]:o}))},[]);const De=a=>Q.find(o=>String(o.user_id)===String(a)),ge=(a,o)=>{if(!a)return null;try{let r;if(typeof a=="string"){const b=u(o).format("YYYY-MM-DD");if(a.match(/^\d{2}:\d{2}:\d{2}$/)){const h=`${b}T${a}`;r=new Date(h)}else if(a.includes("T")||a.includes(" "))r=new Date(a);else if(a.match(/^\d{2}:\d{2}$/)){const h=`${b}T${a}:00`;r=new Date(h)}else r=new Date(`${b}T${a}`)}else r=new Date(a);return isNaN(r.getTime())?(console.warn("Invalid time data:",a),"Invalid time"):r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(r){return console.warn("Error formatting time:",{timeString:a,date:o,error:r}),"Invalid time"}},D=((we=g.permissions)==null?void 0:we.includes("attendance.view"))||!1,ze=((Ne=g.permissions)==null?void 0:Ne.includes("attendance.manage"))||!1,Be=((ye=g.permissions)==null?void 0:ye.includes("attendance.export"))||ze||!1;n.useMemo(()=>c,[c]);const be=[{name:"Date",uid:"date",icon:K,ariaLabel:"Attendance date"},...D&&y!=="/attendance-employee"?[{name:"Employee",uid:"employee",icon:se,ariaLabel:"Employee name and information"}]:[],{name:"Clock In",uid:"clockin_time",icon:p,ariaLabel:"First punch in time"},{name:"Clock Out",uid:"clockout_time",icon:p,ariaLabel:"Last punch out time"},{name:"Work Hours",uid:"production_time",icon:p,ariaLabel:"Total working hours"},{name:"Punches",uid:"punch_details",icon:p,ariaLabel:"Number of time punches recorded"}],xe=(a,o)=>{var h,H,O;const r="text-xs sm:text-sm md:text-base whitespace-nowrap",b=u(a.date).isSame(u(),"day");switch(o){case"date":return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(K,{className:"w-4 h-4 text-primary flex-shrink-0"}),e(s,{className:"flex flex-col",children:e("span",{children:u(a.date).format("MMM D, YYYY")})})]})});case"employee":return e(w,{className:"whitespace-nowrap",children:e(sa,{avatarProps:{radius:"lg",size:m||$?"md":"sm",src:(h=a.user)==null?void 0:h.profile_image,fallback:e(se,{className:"w-6 h-6"})},description:(H=a.user)==null?void 0:H.phone,name:(O=a.user)==null?void 0:O.name})});case"clockin_time":return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(p,{className:"w-4 h-4 text-success"}),t(s,{className:"flex flex-col",children:[e("span",{children:a.punchin_time?ge(a.punchin_time,a.date)||"Invalid time":"Not clocked in"}),a.punchin_time&&e("span",{className:"text-xs text-default-500",children:"First punch"})]})]})});case"clockout_time":return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(p,{className:"w-4 h-4 text-danger"}),t(s,{className:"flex flex-col",children:[e("span",{children:a.punchout_time?ge(a.punchout_time,a.date)||"Invalid time":a.punchin_time?b?"Currently working":"Missing punch-out":"Not started"}),a.punchout_time&&e("span",{className:"text-xs text-default-500",children:"Last punch"})]})]})});case"production_time":const G=a.total_work_minutes>0,f=a.has_incomplete_punch,Oe=a.punchin_time&&!a.punchout_time&&b;if(G){const Ge=Math.floor(a.total_work_minutes/60),Je=Math.floor(a.total_work_minutes%60);return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(p,{className:`w-4 h-4 ${f?"text-warning":"text-primary"}`}),t(s,{className:"flex flex-col",children:[e("span",{className:"font-medium",children:`${Ge}h ${Je}m`}),e("span",{className:"text-xs text-default-500",children:f?"Partial data - in progress":"Total worked time"})]})]})})}else{if(Oe)return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(p,{className:"w-4 h-4 text-warning"}),t(s,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"In Progress"}),e("span",{className:"text-xs text-default-500",children:"Currently working"})]})]})});if(a.punchin_time&&!a.punchout_time&&!b)return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(A,{className:"w-4 h-4 text-danger"}),t(s,{className:"flex flex-col",children:[e("span",{className:"text-danger",children:"Incomplete punch"}),e("span",{className:"text-xs text-default-500",children:"Missing punch out"})]})]})})}return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(A,{className:"w-4 h-4 text-warning"}),t(s,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"No work time"}),e("span",{className:"text-xs text-default-500",children:"No attendance"})]})]})});case"punch_details":return e(w,{className:`${r}`,children:t(s,{className:"flex items-center gap-2",children:[e(p,{className:"w-4 h-4 text-default-400"}),t(s,{className:"flex flex-col",children:[t("span",{className:"text-xs font-medium",children:[a.punch_count||0," punch",(a.punch_count||0)!==1?"es":""]}),a.complete_punches!==a.punch_count&&t("span",{className:"text-xs text-warning",children:[a.complete_punches," complete"]}),a.complete_punches===a.punch_count&&a.punch_count>0&&e("span",{className:"text-xs text-success",children:"All complete"})]})]})});default:return e(w,{className:`${r}`,children:"N/A"})}},We=n.useCallback(async()=>{try{const a=await J.get(route("attendance.exportExcel"),{params:{date:d},responseType:"blob"}),o=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=o,r.setAttribute("download",`Daily_Timesheet_${u(d).format("YYYY_MM_DD")}.xlsx`),document.body.appendChild(r),r.click(),r.remove()}catch(a){console.error("Error downloading Excel:",a),alert("Failed to download attendance excel.")}},[d]),He=n.useCallback(async()=>{try{const a=await J.get(route("attendance.exportPdf"),{params:{date:d},responseType:"blob"}),o=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=o,r.setAttribute("download",`Daily_Timesheet_${u(d).format("YYYY_MM_DD")}.pdf`),document.body.appendChild(r),r.click(),r.remove()}catch(a){console.error("Error downloading PDF:",a),alert("Failed to download attendance pdf.")}},[d]);return n.useEffect(()=>{if(d){if(P!==1){X(1);return}(async()=>{T(!1);try{await Promise.all([ue(d,P,_,F,C),y!=="/attendance-employee"?pe(d,F):Promise.resolve()])}catch(o){console.error("Error updating attendance data:",o)}finally{T(!0)}})()}},[d,P,_,F,C,V,je]),n.useEffect(()=>{N&&me(N)},[N]),n.useEffect(()=>{M!==void 0&&ne(M)},[M]),n.useEffect(()=>{JSON.stringify(C)!==JSON.stringify(de.current)&&(de.current={...C},W())},[C,W]),n.useEffect(()=>{if(!le||!d)return;Z();const a=setInterval(Z,5e3);return()=>{clearInterval(a)}},[le,Z,d]),y==="/attendance-employee"?e(s,{role:"region","aria-label":"Attendance data table",className:"w-full",children:v?e(_e,{className:"p-4 bg-danger-50 border-danger-200",children:t(s,{className:"flex items-center gap-3",children:[e(A,{className:"w-5 h-5 text-danger"}),e(i,{color:"error",variant:"body1",children:v})]})}):t(ae,{children:[e(Me,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Pe,{className:"rounded-lg",isLoaded:B,children:t(Fe,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e(Te,{columns:be,children:a=>e(Ee,{align:"start","aria-label":a.ariaLabel||a.name,children:t(s,{className:"flex items-center gap-2",children:[a.icon&&e(a.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:a.name})]})},a.uid)}),e(Ae,{items:E,emptyContent:t(s,{className:"flex flex-col items-center justify-center py-12",children:[e(p,{className:"w-16 h-16 text-default-300 mb-4"}),e(i,{variant:"h6",className:"mb-2",children:"No Attendance Records"}),e(i,{variant:"body2",color:"textSecondary",children:"No attendance records found for the selected date"})]}),children:a=>e(Re,{children:o=>xe(a,o)},a.id||a.user_id)})]})})}),L>_&&e(s,{className:"py-4 flex justify-center",children:e(Ue,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:P,total:I,onChange:fe,"aria-label":"Timesheet pagination"})})]})}):e(s,{sx:{display:"flex",justifyContent:"center",p:2},component:"main",role:"main","aria-label":"Timesheet Management",children:e(k,{container:!0,spacing:2,children:e(k,{item:!0,xs:12,children:e(qe,{in:!0,timeout:500,children:t(ea,{children:[e(ra,{className:"bg-gradient-to-br from-slate-50/50 to-white/30 backdrop-blur-sm border-b border-white/20",title:e("div",{className:`${m?"p-6":$?"p-4":"p-3"}`,children:t("div",{className:"flex flex-col space-y-4",children:[t("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t("div",{className:"flex items-center gap-3 lg:gap-4",children:[e("div",{className:`
                                                        ${m?"p-3":$?"p-2.5":"p-2"} 
                                                        rounded-xl bg-gradient-to-br from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] border border-[rgba(var(--theme-primary-rgb),0.3)] backdrop-blur-sm
                                                    `,children:e(p,{className:`
                                                                ${m?"w-8 h-8":$?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),t("div",{className:"min-w-0 flex-1",children:[e(i,{variant:m?"h4":$?"h5":"h6",className:`
                                                                font-bold bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] bg-clip-text text-transparent
                                                                ${m?"":"truncate"}
                                                            `,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"Daily Timesheet"}),e(i,{variant:m?"body2":"caption",color:"textSecondary",className:m?"":"truncate",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:new Date(d).toLocaleString("en-US",{month:m?"long":"short",day:"numeric",year:m?"numeric":void 0})})]})]}),"                                                ",t("div",{className:"flex items-center gap-4",children:[he&&t(i,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem",display:{xs:"block",sm:"block"}},children:["Updated: ",he]}),e("div",{className:"flex items-center gap-2",children:Be&&t(ae,{children:[e(Ce,{color:"success",variant:"flat",size:m?"md":"sm",startContent:e(Ye,{className:`
                                                                            ${m?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-success-rgb),0.1)] to-[rgba(var(--theme-success-rgb),0.2)] hover:from-[rgba(var(--theme-success-rgb),0.2)] hover:to-[rgba(var(--theme-success-rgb),0.3)] border border-[rgba(var(--theme-success-rgb),0.2)] backdrop-blur-sm",onPress:We,isDisabled:!B||E.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:m?"Excel":"XLS"}),e(Ce,{color:"danger",variant:"flat",size:m?"md":"sm",startContent:e(Ye,{className:`
                                                                            ${m?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-danger-rgb),0.1)] to-[rgba(var(--theme-danger-rgb),0.2)] hover:from-[rgba(var(--theme-danger-rgb),0.2)] hover:to-[rgba(var(--theme-danger-rgb),0.3)] border border-[rgba(var(--theme-danger-rgb),0.2)] backdrop-blur-sm",onPress:He,isDisabled:!B||E.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"PDF"})]})})]})]}),m&&t("div",{className:"flex items-center gap-6 pt-2 border-t border-white/10",children:[t("div",{className:"flex items-center gap-2",children:[e(R,{className:"w-4 h-4 text-success"}),t(i,{variant:"caption",color:"textSecondary",children:["Present: ",L]})]}),D&&t("div",{className:"flex items-center gap-2",children:[e(A,{className:"w-4 h-4 text-warning"}),t(i,{variant:"caption",color:"textSecondary",children:["Absent: ",c.length]})]}),t("div",{className:"flex items-center gap-2",children:[e(Ze,{className:"w-4 h-4 text-primary"}),t(i,{variant:"caption",color:"textSecondary",children:["Total: ",L+c.length]})]})]})]})}),sx:{padding:0,"& .MuiCardHeader-content":{width:"100%",overflow:"hidden"}}}),e(ke,{}),e(Le,{children:e(s,{component:"section",role:"search","aria-label":"Timesheet filters",children:e(k,{container:!0,spacing:3,children:D&&t(ae,{children:[e(k,{item:!0,xs:12,sm:6,md:4,children:e(te,{type:"text",label:"Search Employee",placeholder:"Enter employee name",value:F,onChange:Ie,startContent:e(re,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})}),e(k,{item:!0,xs:12,sm:6,md:4,children:e(te,{label:"Select Date",type:"date",variant:"bordered",onChange:S,value:new Date(d).toISOString().slice(0,10)||"",startContent:e(K,{className:"w-4 h-4 text-default-400"}),"aria-label":"Select date for timesheet",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})})]})})})}),e(ke,{}),e(Le,{children:t(k,{container:!0,spacing:3,children:[e(k,{item:!0,xs:12,md:D?9:12,children:v?e(_e,{className:"p-4 bg-danger-50 border-danger-200",children:t(s,{className:"flex items-center gap-3",children:[e(A,{className:"w-5 h-5 text-danger"}),e(i,{color:"error",variant:"body1",children:v})]})}):t(s,{role:"region","aria-label":"Present employees attendance table",className:"border-r border-gray-200 pr-4",sx:{borderRightColor:"rgba(0, 0, 0, 0.1)"},children:[e(s,{className:"mb-4",children:t(i,{variant:"h6",className:"font-semibold text-blue-600 flex items-center gap-2",children:[e(R,{className:"w-5 h-5"}),"Present Employees (",L,")"]})}),e(Me,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Pe,{className:"rounded-lg",isLoaded:B,children:t(Fe,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e(Te,{columns:be,children:a=>e(Ee,{align:"start",children:t(s,{className:"flex items-center gap-2",children:[a.icon&&e(a.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:a.name})]})},a.uid)}),e(Ae,{items:E,emptyContent:t(s,{className:"flex flex-col items-center justify-center py-8",children:[e(p,{className:"w-12 h-12 text-default-300 mb-4"}),e(i,{variant:"body1",color:"textSecondary",children:"No attendance records found"})]}),children:a=>e(Re,{children:o=>xe(a,o)},a.id||a.user_id)})]})})}),L>_&&e(s,{className:"py-4 flex justify-center",children:e(Ue,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:P,total:I,onChange:fe,"aria-label":"Timesheet pagination"})})]})}),D&&e(k,{item:!0,xs:12,md:3,children:e(na,{absentUsers:c,selectedDate:d,getUserLeave:De})})]})})]})})})})})};export{La as default};
