import{k as Fe,u as Pe,l as Ie,m as De,i as Be,r as x,b as r,j as e,F as O,f as fe,e as Te,c as Ee,J as Re,R as ge,Q as Ae}from"./app-MpRbYhkS.js";import{C as xe,E as te}from"./Edit-DNMdlRtI.js";import{u as V,T as A,I as U,f as t,B as K,S as q,r as $,e as X,h as ae,as as $e,ap as We,aq as Le,ar as je,F as Ge,bd as Me,d as Ue,o as Oe,X as qe,c as ze,at as Je,V as He,k as Ce,be as Xe,bf as Ke,bg as Ye,bh as Ze,G as Qe,A as Ve}from"./App-ChX5VV_r.js";import{C as he}from"./Clear-CsKEgwOF.js";import{G as ie}from"./GlassDialog-CrLmwJCc.js";import{D as oe}from"./DialogTitle-B87vulL7.js";import{A as _e}from"./Avatar-M_iWVyCW.js";import{P as er}from"./PhotoCamera-hZ8NRYfp.js";import{T as w,F as ue}from"./TextField-UdoyefGR.js";import{I as z}from"./InputLabel-CPjNQET0.js";import{S as J}from"./Select-yj1GpTXy.js";import{M as E}from"./MenuItem-PLPDg3_f.js";import{b as le,c as se}from"./DialogContent-Bq3dEBgs.js";import{L as ee}from"./LoadingButton-CCeyjCVT.js";import{C as me}from"./CircularProgress-BVgMTZG7.js";import{C as H}from"./CardContent-BIxvR8Ce.js";import{B as ye}from"./Button-CiQQsF2p.js";import{A as Se}from"./Add-C7M9-v0_.js";import{C as Q}from"./CardHeader-DCB-ZqtU.js";import{I as rr}from"./InputAdornment-CC3Dpyhx.js";import{D as de}from"./Divider-mBuyDOBJ.js";import{C as tr}from"./CardActions-BDYKj7zC.js";import{c as ar}from"./chunk-MZRCPRP2-B90AE6mW.js";import{F as nr}from"./EllipsisVerticalIcon-DNOdx7A-.js";import{F as ke}from"./ExclamationTriangleIcon-BE7yaTBp.js";import{F as ir}from"./TrophyIcon-CvXHlo0w.js";import{c as or}from"./chunk-D5XJWRAV-Dkfk7po4.js";import{F as lr}from"./XCircleIcon-B4LCdjsW.js";import{F as sr}from"./CheckCircleIcon-BmWdTM3l.js";import{F as dr}from"./EyeIcon-C4TRlYWU.js";import{F as cr}from"./PencilIcon-Cak8D3Xc.js";import{F as pr}from"./TrashIcon-CM3pcnfe.js";import{p as ur}from"./chunk-CXOJTH5M-B_p47gQH.js";import{a as ne}from"./List-zZ64sibn.js";import{L as T,a as y}from"./ListItemText-DB94gJKc.js";import{T as mr,a as be}from"./Tabs-BRTnZqcj.js";import"./app-CYPnucT-.js";import"./useSlot-D_8OGX0s.js";import"./Popover-DRLuHBe9.js";import"./listItemTextClasses-LbtaCQDN.js";import"./dividerClasses-DyD1oX6F.js";import"./index-DO4CmN3o.js";import"./NumberFormatter-DNR9MAW-.js";import"./KeyboardArrowRight-Cn5YujVA.js";var Ne=Fe((a,W)=>{var f;const{as:D,className:m,children:i,...b}=a,k=D||"div",_=Pe(W),{slots:P,classNames:c}=Ie(),S=De(c==null?void 0:c.footer,m);return Be.jsx(k,{ref:_,className:(f=P.footer)==null?void 0:f.call(P,{class:S}),...b,children:i})});Ne.displayName="HeroUI.CardFooter";var hr=Ne;function gr({title:a,titleId:W,...f},D){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:D,"aria-labelledby":W},f),a?x.createElement("title",{id:W},a):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const br=x.forwardRef(gr);function xr({title:a,titleId:W,...f},D){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:D,"aria-labelledby":W},f),a?x.createElement("title",{id:W},a):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const fr=x.forwardRef(xr),_r=({user:a,allUsers:W,departments:f,designations:D,setUser:m,open:i,closeModal:b})=>{const[k,_]=x.useState({id:a.id,name:a.name||"",gender:a.gender||"",birthday:a.birthday||"",date_of_joining:a.date_of_joining||"",address:a.address||"",employee_id:a.employee_id||"",phone:a.phone||"",email:a.email||"",department:a.department||"",designation:a.designation||"",report_to:a.report_to||""}),[P,c]=x.useState({id:a.id}),[S,F]=x.useState(!1),[h,d]=x.useState({}),[o,I]=x.useState(!1),[p,s]=x.useState(!1),[l,n]=x.useState(null),[g,R]=x.useState(D),[B,j]=x.useState(W),u=V(),G=v=>{const M=v.target.files[0];if(M){const L=URL.createObjectURL(M);n(L);const Y=new Promise(async(N,ce)=>{try{const Z=new FormData;if(Z.append("id",a.id),M){const we=M.type;if(["image/jpeg","image/jpg","image/png"].includes(we))Z.append("profile_image",M);else{console.error("Invalid file type. Only JPEG and PNG are allowed."),ce("Invalid file type");return}}const ve=await fetch(route("profile.update"),{method:"POST",headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:Z}),pe=await ve.json();ve.ok?(m(pe.user),I(!1),N([...pe.messages])):(I(!1),d(pe.errors),ce(pe.error||"Failed to update profile image."),console.error(pe.errors))}catch(Z){I(!1),console.error(Z),ce(Z.message||"An unexpected error occurred.")}});$.promise(Y,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(me,{}),e("span",{style:{marginLeft:"8px"},children:"Updating profile image..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}},success:{render({data:N}){return e(O,{children:N.map((ce,Z)=>e("div",{children:ce},Z))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}},error:{render({data:N}){return e(O,{children:N})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}})}},C=(v,M)=>{_(L=>{const Y={...L,[v]:M};return M===""&&delete Y[v],Y}),c(L=>{const Y={...L,[v]:M};return M===""&&delete Y[v],Y})};return x.useEffect(()=>{a.department!==k.department&&(k.designation=null,k.report_to=null),R(D.filter(L=>L.department_id===(P.department||k.department))),j(W.filter(L=>L.department===(P.department||k.department)));const v={...P};for(const L in v)L!=="id"&&v[L]===a[L]&&delete v[L];const M=Object.keys(v).length>1;F(M)},[k,P]),r(ie,{open:i,onClose:b,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Profile Information"}),e(U,{variant:"outlined",color:"primary",onClick:b,sx:{position:"absolute",top:8,right:16},children:e(he,{})})]}),r("form",{onSubmit:async v=>{var M;v.preventDefault(),I(!0);try{const L=await axios.post(route("profile.update"),{ruleSet:"profile",...k});L.status===200&&(m(L.data.user),$.success(((M=L.data.messages)==null?void 0:M.length)>0?L.data.messages.join(" "):"Profile information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),b())}catch(L){I(!1),L.response?(L.response.status===422?(d(L.response.data.errors||{}),$.error(L.response.data.error||"Failed to update profile information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error(L.response.data)):L.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error(L.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,color:u.palette.text.primary}}),console.error("Error",L.message))}finally{I(!1)}},children:[e(le,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,display:"flex",alignItems:"center",justifyContent:"center",children:r(K,{position:"relative",display:"inline-block",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[e(_e,{alt:P.name||k.name,src:l||a.profile_image,sx:{width:100,height:100}}),p&&e(O,{children:e(K,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:e(U,{color:"primary",component:"span",children:e(er,{})})})}),e("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:G}),e("label",{htmlFor:"upload-button",children:e(K,{sx:{position:"absolute",width:"100%",height:"100%",top:0,left:0,borderRadius:"50%",cursor:"pointer"}})})]})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Name",fullWidth:!0,value:P.name||k.name||"",onChange:v=>C("name",v.target.value),error:!!h.name,helperText:h.name})}),e(t,{item:!0,xs:12,md:6,children:r(q,{fullWidth:!0,children:[e(z,{id:"gender-label",children:"Gender"}),r(J,{labelId:"gender-label",value:P.gender||k.gender||"na",onChange:v=>C("gender",v.target.value),error:!!h.gender,label:"Gender",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{disabled:!0,value:"na",children:"Select Gender"}),e(E,{value:"Male",children:"Male"}),e(E,{value:"Female",children:"Female"})]}),e(ue,{children:h.gender})]})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Birth Date",type:"date",fullWidth:!0,value:P.birthday||k.birthday||"",onChange:v=>C("birthday",v.target.value),InputLabelProps:{shrink:!0},error:!!h.birthday,helperText:h.birthday})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Joining Date",type:"date",fullWidth:!0,value:P.date_of_joining||k.date_of_joining||"",onChange:v=>C("date_of_joining",v.target.value),InputLabelProps:{shrink:!0},error:!!h.date_of_joining,helperText:h.date_of_joining})}),e(t,{item:!0,xs:12,children:e(w,{label:"Address",fullWidth:!0,value:P.address||k.address,onChange:v=>C("address",v.target.value),error:!!h.address,helperText:h.address})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Employee ID",fullWidth:!0,value:P.employee_id||k.employee_id||"",onChange:v=>C("employee_id",v.target.value),error:!!h.employee_id,helperText:h.employee_id})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Phone Number",fullWidth:!0,value:P.phone||k.phone,onChange:v=>C("phone",v.target.value),error:!!h.phone,helperText:h.phone})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Email Adress",fullWidth:!0,value:P.email||k.email,onChange:v=>C("email",v.target.value),error:!!h.email,helperText:h.email})}),e(t,{item:!0,xs:12,md:6,children:r(q,{fullWidth:!0,children:[e(z,{id:"department",children:"Department"}),r(J,{labelId:"department",onChange:v=>C("department",v.target.value),error:!!h.department,id:`department-select-${a.id}`,value:P.department||k.department||"na",label:"Department",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select Department"}),f.map(v=>e(E,{value:v.id,children:v.name},v.id))]}),e(ue,{children:h.department})]})}),e(t,{item:!0,xs:12,md:6,children:r(q,{fullWidth:!0,children:[e(z,{id:"designation",children:"Designation"}),r(J,{labelId:"designation",onChange:v=>C("designation",v.target.value),label:"Designation",error:!!h.designation,id:`designation-select-${a.id}`,value:P.designation||k.designation||"na",disabled:!a.department,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select Designation"}),g.map(v=>e(E,{value:v.id,children:v.title},v.id))]}),e(ue,{children:h.designation})]})}),e(t,{item:!0,xs:12,md:6,children:r(q,{fullWidth:!0,children:[e(z,{id:"report_to",children:"Reports To"}),r(J,{labelId:"report_to",value:P.report_to||k.report_to,onChange:v=>C("report_to",v.target.value),label:"Reports To",error:!!h.report_to,disabled:a.report_to==="na",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:u.glassCard.background,border:u.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",children:"--"}),B.map(v=>e(E,{value:v.id,children:v.name},v.id))]}),e(ue,{children:h.report_to})]})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!S,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:o,children:"Submit"})})]})]})},yr=({user:a,setUser:W,open:f,closeModal:D})=>{const[m,i]=x.useState({id:a.id,passport_no:a.passport_no||"",passport_exp_date:a.passport_exp_date||"",nationality:a.nationality||"",religion:a.religion||"",marital_status:a.marital_status||"",employment_of_spouse:a.employment_of_spouse||"",number_of_children:a.number_of_children||"",nid:a.nid||""}),[b,k]=x.useState({id:a.id}),[_,P]=x.useState(!1),[c,S]=x.useState({}),[F,h]=x.useState(!1),d=V(),o=(p,s)=>{i(l=>{const n={...l,[p]:s};return s===""&&delete n[p],p==="marital_status"&&s==="Single"&&(n.employment_of_spouse="",n.number_of_children=""),n}),k(l=>{const n={...l,[p]:s};return s===""&&delete n[p],p==="marital_status"&&s==="Single"&&(n.employment_of_spouse=null,n.number_of_children=null),n})};return x.useEffect(()=>{for(const s in b)s!=="id"&&b[s]===a[s]&&delete b[s];const p=Object.keys(b).filter(s=>s!=="id").length>0;P(p)},[m,b,a]),r(ie,{open:f,onClose:D,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Personal Information"}),e(U,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(he,{})})]}),r("form",{onSubmit:async p=>{var s;p.preventDefault(),h(!0);try{const l=await axios.post(route("profile.update"),{ruleSet:"personal",...m});l.status===200&&(W(l.data.user),$.success(((s=l.data.messages)==null?void 0:s.length)>0?l.data.messages.join(" "):"Personal information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),D())}catch(l){h(!1),l.response?(l.response.status===422?(S(l.response.data.errors||{}),$.error(l.response.data.error||"Failed to update personal information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.response.data)):l.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",l.message))}finally{h(!1)}},children:[e(le,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Passport No",fullWidth:!0,value:b.passport_no||m.passport_no||"",onChange:p=>o("passport_no",p.target.value),error:!!c.passport_no,helperText:c.passport_no})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Passport Expiry Date",fullWidth:!0,type:"date",value:b.passport_exp_date||m.passport_exp_date||"",onChange:p=>o("passport_exp_date",p.target.value),InputLabelProps:{shrink:!0},error:!!c.passport_exp_date,helperText:c.passport_exp_date})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"NID No",fullWidth:!0,value:b.nid||m.nid||"",onChange:p=>o("nid",p.target.value),error:!!c.nid,helperText:c.nid})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Nationality",fullWidth:!0,value:b.nationality||m.nationality||"",onChange:p=>o("nationality",p.target.value),error:!!c.nationality,helperText:c.nationality})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Religion",fullWidth:!0,value:b.religion||m.religion||"",onChange:p=>o("religion",p.target.value),error:!!c.religion,helperText:c.religion})}),e(t,{item:!0,xs:12,md:6,children:r(q,{fullWidth:!0,children:[e(z,{id:"marital-status-label",children:"Marital status"}),r(J,{labelId:"marital-status-label",value:b.marital_status||m.marital_status||"na",onChange:p=>o("marital_status",p.target.value),label:"Marital status",error:!!c.marital_status,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",children:"-"}),e(E,{value:"Single",children:"Single"}),e(E,{value:"Married",children:"Married"})]}),e(ue,{children:c.marital_status})]})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Employment of spouse",fullWidth:!0,value:b.marital_status==="Single"?"":b.employment_of_spouse||m.employment_of_spouse,onChange:p=>o("employment_of_spouse",p.target.value),error:!!c.employment_of_spouse,helperText:c.employment_of_spouse,disabled:b.marital_status==="Single"||m.marital_status==="Single"})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"No. of children",fullWidth:!0,type:"number",value:b.marital_status==="Single"?"":b.number_of_children||m.number_of_children,onChange:p=>o("number_of_children",p.target.value),error:!!c.number_of_children,helperText:c.number_of_children,disabled:b.marital_status==="Single"||m.marital_status==="Single"})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!_,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},vr=({user:a,setUser:W,open:f,closeModal:D})=>{const[m,i]=x.useState({id:a.id,emergency_contact_primary_name:a.emergency_contact_primary_name||"",emergency_contact_primary_relationship:a.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:a.emergency_contact_primary_phone||"",emergency_contact_secondary_name:a.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:a.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:a.emergency_contact_secondary_phone||""}),[b,k]=x.useState({id:a.id}),[_,P]=x.useState(!1),[c,S]=x.useState({}),[F,h]=x.useState(!1),d=V(),o=(p,s)=>{i(l=>{const n={...l,[p]:s};return s===""&&delete n[p],n}),k(l=>{const n={...l,[p]:s};return s===""&&delete n[p],n})};return x.useEffect(()=>{for(const s in b)s!=="id"&&b[s]===a[s]&&delete b[s];const p=Object.keys(b).filter(s=>s!=="id").length>0;P(p)},[m,b,a]),r(ie,{open:f,onClose:D,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Personal Information"}),e(U,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(he,{})})]}),r("form",{onSubmit:async p=>{var s;p.preventDefault(),h(!0);try{const l=await axios.post(route("profile.update"),{ruleSet:"emergency",...m});l.status===200&&(W(l.data.user),$.success(((s=l.data.messages)==null?void 0:s.length)>0?l.data.messages.join(" "):"Emergency contact updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),D())}catch(l){h(!1),l.response?(l.response.status===422?(S(l.response.data.errors||{}),$.error(l.response.data.error||"Failed to update emergency contact.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.response.data)):l.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",l.message))}finally{h(!1)}},children:[e(le,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(X,{children:r(H,{children:[e(A,{variant:"h5",gutterBottom:!0,children:"Primary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Name",required:!0,fullWidth:!0,value:b.emergency_contact_primary_name||m.emergency_contact_primary_name||"",onChange:p=>o("emergency_contact_primary_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Relationship",required:!0,fullWidth:!0,value:b.emergency_contact_primary_relationship||m.emergency_contact_primary_relationship||"",onChange:p=>o("emergency_contact_primary_relationship",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Phone",required:!0,fullWidth:!0,value:b.emergency_contact_primary_phone||m.emergency_contact_primary_phone||"",onChange:p=>o("emergency_contact_primary_phone",p.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})}),e(t,{item:!0,xs:12,children:e(X,{children:r(H,{children:[e(A,{variant:"h5",gutterBottom:!0,children:"Secondary Contact"}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Name",fullWidth:!0,value:b.emergency_contact_secondary_name||m.emergency_contact_secondary_name||"",onChange:p=>o("emergency_contact_secondary_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Relationship",fullWidth:!0,value:b.emergency_contact_secondary_relationship||m.emergency_contact_secondary_relationship||"",onChange:p=>o("emergency_contact_secondary_relationship",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Phone",fullWidth:!0,value:b.emergency_contact_secondary_phone||m.emergency_contact_secondary_phone||"",onChange:p=>o("emergency_contact_secondary_phone",p.target.value),error:!!c.bank_name,helperText:c.bank_name})})]})]})})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!_,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},Cr=({user:a,setUser:W,open:f,closeModal:D})=>{const[m,i]=x.useState({id:a.id,bank_name:a.bank_name||"",bank_account_no:a.bank_account_no||"",ifsc_code:a.ifsc_code||"",pan_no:a.pan_no||""}),[b,k]=x.useState({id:a.id}),[_,P]=x.useState(!1),[c,S]=x.useState({}),[F,h]=x.useState(!1),d=V(),o=(p,s)=>{i(l=>{const n={...l,[p]:s};return s===""&&delete n[p],n}),k(l=>{const n={...l,[p]:s};return s===""&&delete n[p],n})};return x.useEffect(()=>{for(const s in b)s!=="id"&&b[s]===a[s]&&delete b[s];const p=Object.keys(b).filter(s=>s!=="id").length>0;P(p)},[m,b,a]),r(ie,{open:f,onClose:D,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Bank Information"}),e(U,{variant:"outlined",color:"primary",onClick:D,sx:{position:"absolute",top:8,right:16},children:e(he,{})})]}),r("form",{onSubmit:async p=>{var s;p.preventDefault(),h(!0);try{const l=await axios.post(route("profile.update"),{ruleSet:"bank",...m});l.status===200&&(W(l.data.user),S({}),$.success(((s=l.data.messages)==null?void 0:s.length)>0?l.data.messages.join(" "):"Bank information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),D())}catch(l){h(!1),l.response?(l.response.status===422?(S(l.response.data.errors||{}),$.error(l.response.data.error||"Failed to update bank information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.response.data)):l.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error(l.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}),console.error("Error",l.message))}finally{h(!1)}},children:[e(le,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,children:e(w,{label:"Bank Name",fullWidth:!0,value:b.bank_name||m.bank_name||"",onChange:p=>o("bank_name",p.target.value),error:!!c.bank_name,helperText:c.bank_name})}),e(t,{item:!0,xs:12,children:e(w,{size:"small",label:"Bank Account No.",fullWidth:!0,value:b.bank_account_no||m.bank_account_no||"",onChange:p=>o("bank_account_no",p.target.value),error:!!c.bank_account_no,helperText:c.bank_account_no})}),e(t,{item:!0,xs:12,children:e(w,{label:"IFSC Code",fullWidth:!0,value:b.ifsc_code||m.ifsc_code||"",onChange:p=>o("ifsc_code",p.target.value),error:!!c.ifsc_code,helperText:c.ifsc_code})}),e(t,{item:!0,xs:12,children:e(w,{label:"PAN No.",fullWidth:!0,value:b.pan_no||m.pan_no||"",onChange:p=>o("pan_no",p.target.value),error:!!c.pan_no,helperText:c.pan_no})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!_,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},kr=({user:a,open:W,closeModal:f,handleDelete:D,setUser:m})=>{const[i,b]=x.useState({id:a.id,family_member_name:a.family_member_name||"",family_member_relationship:a.family_member_relationship||"",family_member_dob:a.family_member_dob||"",family_member_phone:a.family_member_phone||""}),[k,_]=x.useState({id:a.id}),[P,c]=x.useState(!1),[S,F]=x.useState({}),[h,d]=x.useState(!1),o=V(),I=(s,l)=>{b(n=>{const g={...n,[s]:l};return l===""&&delete g[s],g}),_(n=>{const g={...n,[s]:l};return l===""&&delete g[s],g})};return x.useEffect(()=>{for(const l in k)l!=="id"&&k[l]===a[l]&&delete k[l];const s=Object.keys(k).filter(l=>l!=="id").length>0;c(s)},[i,k,a]),r(ie,{open:W,onClose:f,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Family Member"}),e(U,{variant:"outlined",color:"primary",onClick:f,sx:{position:"absolute",top:8,right:16},children:e(he,{})})]}),r("form",{onSubmit:async s=>{var l;s.preventDefault(),d(!0);try{const n=await axios.post(route("profile.update"),{ruleSet:"family",...i});n.status===200&&(m(n.data.user),$.success(((l=n.data.messages)==null?void 0:l.length)>0?n.data.messages.join(" "):"Family information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),f())}catch(n){d(!1),n.response?(n.response.status===422?(F(n.response.data.errors||{}),$.error(n.response.data.error||"Failed to update family information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}})):$.error("An unexpected error occurred. Please try again later.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(n.response.data)):n.request?($.error("No response received from the server. Please check your internet connection.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error(n.request)):($.error("An error occurred while setting up the request.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:o.glassCard.background,border:o.glassCard.border,color:o.palette.text.primary}}),console.error("Error",n.message))}finally{d(!1)}},children:[e(le,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Name",fullWidth:!0,value:k.family_member_name||i.family_member_name||"",onChange:s=>I("family_member_name",s.target.value),error:!!S.family_member_name,helperText:S.family_member_name})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Relationship",fullWidth:!0,value:k.family_member_relationship||i.family_member_relationship||"",onChange:s=>I("family_member_relationship",s.target.value),error:!!S.family_member_relationship,helperText:S.family_member_relationship})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Date of Birth",fullWidth:!0,type:"date",value:k.family_member_dob||i.family_member_dob||"",onChange:s=>I("family_member_dob",s.target.value),InputLabelProps:{shrink:!0},error:!!S.family_member_dob,helperText:S.family_member_dob})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Phone",fullWidth:!0,value:k.family_member_phone||i.family_member_phone||"",onChange:s=>I("family_member_phone",s.target.value),error:!!S.family_member_phone,helperText:S.family_member_phone})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!P,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:h,children:"Submit"})})]})]})},Sr=({user:a,open:W,closeModal:f,setUser:D})=>{const[m,i]=x.useState({id:a.id}),[b,k]=x.useState(!1),[_,P]=x.useState(a.educations&&a.educations.length>0?a.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[c,S]=x.useState({}),[F,h]=x.useState(!1),d=V(),o=(l,n,g)=>{const R=[..._];R[l]={...R[l],[n]:g},P(R);const B=R.filter((u,G)=>{const C=a.educations[G]||{},re=!C.id||u.institution!==C.institution||u.subject!==C.subject||u.degree!==C.degree||u.starting_date!==C.starting_date||u.complete_date!==C.complete_date||u.grade!==C.grade,v=C.id&&u.institution===C.institution&&u.subject===C.subject&&u.degree===C.degree&&u.starting_date===C.starting_date&&u.complete_date===C.complete_date&&u.grade===C.grade;return re&&!v});i(u=>({...u,educations:[...B]}));const j=B.length>0;k(j)},I=async l=>{const n=_[l],g=_.filter((R,B)=>B!==l);if(P(g.length>0?g:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),n.id){const R=new Promise(async(B,j)=>{try{const u=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:n.id,user_id:a.id})}),G=await u.json();u.ok?(i(C=>({...C,educations:G.educations})),D(C=>({...C,educations:G.educations})),B(G.message||"Education record deleted successfully.")):(S(G.errors),console.error(G.errors),j(G.error||"Failed to delete education record."))}catch(u){j(u)}});$.promise(R,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(me,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:B}){return e(O,{children:B})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:B}){return e(O,{children:B})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})}},p=async l=>{l.preventDefault(),h(!0);const n=new Promise(async(g,R)=>{try{const B=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:_.map(u=>({...u,user_id:a.id}))})}),j=await B.json();B.ok?(D(u=>({...u,educations:j.educations})),h(!1),f(),g([...j.messages])):(h(!1),S(j.errors),console.error(j.errors),R(j.error||"Failed to update education records."))}catch(B){h(!1),R(B.message||"An unexpected error occurred while updating education records.")}});$.promise(n,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(me,{}),e("span",{style:{marginLeft:"8px"},children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:g}){return e(O,{children:g.map((R,B)=>e("div",{children:R},B))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:g}){return e(O,{children:g})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})},s=async()=>{P([..._,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return r(ie,{open:W,onClose:f,maxWidth:"md",fullWidth:!0,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Education Information"}),e(U,{onClick:f,sx:{position:"absolute",top:8,right:16},children:e(xe,{})})]}),r("form",{onSubmit:p,children:[e(le,{children:r(K,{children:[e(t,{container:!0,spacing:2,children:_.map((l,n)=>e(t,{item:!0,xs:12,children:e(X,{children:r(H,{children:[r(A,{variant:"h6",gutterBottom:!0,children:["Education #"+(n+1),e(U,{onClick:()=>I(n),sx:{position:"absolute",top:8,right:16},children:e(xe,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Institution",fullWidth:!0,value:l.institution||"",onChange:g=>o(n,"institution",g.target.value),error:!!c[`educations.${n}.institution`],helperText:c[`educations.${n}.institution`]?c[`educations.${n}.institution`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Degree",fullWidth:!0,value:l.degree||"",onChange:g=>o(n,"degree",g.target.value),error:!!c[`educations.${n}.degree`],helperText:c[`educations.${n}.degree`]?c[`educations.${n}.degree`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Subject",fullWidth:!0,value:l.subject||"",onChange:g=>o(n,"subject",g.target.value),error:!!c[`educations.${n}.subject`],helperText:c[`educations.${n}.subject`]?c[`educations.${n}.subject`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Started in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.starting_date||"",onChange:g=>o(n,"starting_date",g.target.value),error:!!c[`educations.${n}.starting_date`],helperText:c[`educations.${n}.starting_date`]?c[`educations.${n}.starting_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Completed in",type:"month",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.complete_date||"",onChange:g=>o(n,"complete_date",g.target.value),error:!!c[`educations.${n}.complete_date`],helperText:c[`educations.${n}.complete_date`]?c[`educations.${n}.complete_date`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Grade",fullWidth:!0,value:l.grade||"",onChange:g=>o(n,"grade",g.target.value),error:!!c[`educations.${n}.grade`],helperText:c[`educations.${n}.grade`]?c[`educations.${n}.grade`][0]:""})})]})]})})},n))}),e(K,{mt:2,children:r(ye,{size:"small",color:"error",sx:{mt:2},onClick:s,children:[e(Se,{})," Add More"]})})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!b,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},Nr=({user:a,open:W,closeModal:f,setUser:D})=>{const[m,i]=x.useState({id:a.id}),[b,k]=x.useState(!1),[_,P]=x.useState(a.experiences.length>0?a.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[c,S]=x.useState({}),[F,h]=x.useState(!1),d=V(),o=(l,n,g)=>{const R=[..._];R[l]={...R[l],[n]:g},P(R);const B=R.filter((u,G)=>{const C=a.experiences[G]||{},re=!C.id||u.company_name!==C.company_name||u.location!==C.location||u.job_position!==C.job_position||u.period_from!==C.period_from||u.period_to!==C.period_to||u.description!==C.description,v=C.id&&u.company_name===C.company_name&&u.location===C.location&&u.job_position===C.job_position&&u.period_from===C.period_from&&u.period_to===C.period_to&&u.description===C.description;return re&&!v});i(u=>({...u,experiences:[...B]}));const j=B.length>0;k(j)},I=async l=>{const n=_[l],g=_.filter((R,B)=>B!==l);if(P(g.length>0?g:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),n.id){const R=new Promise(async(B,j)=>{try{const u=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:n.id,user_id:a.id})}),G=await u.json();u.ok?(i(C=>({...C,experiences:G.experiences})),D(C=>({...C,experiences:G.experiences})),B(G.message||"Experience record deleted successfully."),f()):(S([...G.errors]),j(G.error||"Failed to delete experience record."))}catch(u){j(u)}});$.promise(R,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(me,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:B}){return e(O,{children:B})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:B}){return e(O,{children:B})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})}},p=async l=>{l.preventDefault(),h(!0);const n=new Promise(async(g,R)=>{try{const B=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:_.map(u=>({...u,user_id:a.id}))})}),j=await B.json();B.ok?(D(u=>({...u,experiences:j.experiences})),h(!1),f(),g([...j.messages])):(h(!1),S(j.errors),console.error(j.errors),R(j.error||"Failed to update experience records."))}catch(B){h(!1),R(B.message||"An unexpected error occurred while updating experience records.")}});$.promise(n,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(me,{}),e("span",{style:{marginLeft:"8px"},children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},success:{render({data:g}){return e(O,{children:g.map((R,B)=>e("div",{children:R},B))})},icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}},error:{render({data:g}){return e(O,{children:g})},icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:d.glassCard.background,border:d.glassCard.border,color:d.palette.text.primary}}})},s=async()=>{P([..._,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return r(ie,{open:W,onClose:f,maxWidth:"md",fullWidth:!0,children:[r(oe,{style:{cursor:"move"},id:"draggable-dialog-title",children:[e(A,{children:"Experience Information"}),e(U,{onClick:f,sx:{position:"absolute",top:8,right:16},children:e(xe,{})})]}),r("form",{onSubmit:p,children:[e(le,{children:r(K,{children:[e(t,{container:!0,spacing:2,children:_.map((l,n)=>e(t,{item:!0,xs:12,children:e(X,{children:r(H,{children:[r(A,{variant:"h6",gutterBottom:!0,children:["Experience #"+(n+1),e(U,{onClick:()=>I(n),sx:{position:"absolute",top:8,right:16},children:e(xe,{})})]}),r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Company",fullWidth:!0,value:l.company_name||"",onChange:g=>o(n,"company_name",g.target.value),error:!!c[`experiences.${n}.company_name`],helperText:c[`experiences.${n}.company_name`]?c[`experiences.${n}.company_name`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Location",fullWidth:!0,value:l.location||"",onChange:g=>o(n,"location",g.target.value),error:!!c[`experiences.${n}.location`],helperText:c[`experiences.${n}.location`]?c[`experiences.${n}.location`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Role",fullWidth:!0,value:l.job_position||"",onChange:g=>o(n,"job_position",g.target.value),error:!!c[`experiences.${n}.job_position`],helperText:c[`experiences.${n}.job_position`]?c[`experiences.${n}.job_position`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Started From",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.period_from||"",onChange:g=>o(n,"period_from",g.target.value),error:!!c[`experiences.${n}.period_from`],helperText:c[`experiences.${n}.period_from`]?c[`experiences.${n}.period_from`][0]:""})}),e(t,{item:!0,xs:12,md:6,children:e(w,{label:"Ended On",type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},value:l.period_to||"",onChange:g=>o(n,"period_to",g.target.value),error:!!c[`experiences.${n}.period_to`],helperText:c[`experiences.${n}.period_to`]?c[`experiences.${n}.period_to`][0]:""})}),e(t,{item:!0,xs:12,children:e(w,{label:"Responsibilities",fullWidth:!0,multiline:!0,rows:3,value:l.description||"",onChange:g=>o(n,"description",g.target.value),error:!!c[`experiences.${n}.description`],helperText:c[`experiences.${n}.description`]?c[`experiences.${n}.description`][0]:""})})]})]})})},n))}),r(ye,{size:"small",color:"error",sx:{mt:2},onClick:s,children:[e(Se,{})," Add More"]})]})}),e(se,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!b,sx:{borderRadius:"50px",padding:"6px 16px"},size:"large",variant:"outlined",color:"primary",type:"submit",loading:F,children:"Submit"})})]})]})},wr=({user:a,setUser:W})=>{const[f,D]=x.useState({id:a.id,salary_basis:a.salary_basis||"",salary_amount:a.salary_amount||"",payment_type:a.payment_type||"",pf_contribution:a.pf_contribution??!1,pf_no:a.pf_no||"",employee_pf_rate:a.employee_pf_rate||0,additional_pf_rate:a.additional_pf_rate||0,total_pf_rate:a.total_pf_rate||0,esi_contribution:a.esi_contribution??!1,esi_no:a.esi_no||"",employee_esi_rate:a.employee_esi_rate||0,additional_esi_rate:a.additional_esi_rate||0,total_esi_rate:a.total_esi_rate||0}),[m,i]=x.useState({id:a.id}),[b,k]=x.useState(!1),[_,P]=x.useState({}),[c,S]=x.useState(!1),F=V(),h=(o,I)=>{D(p=>{const s={...p,[o]:I};return I===""&&delete s[o],o==="pf_contribution"&&I===0?(s.pf_no="",s.employee_pf_rate=0,s.additional_pf_rate=0,s.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(s.total_pf_rate=s.employee_pf_rate+s.additional_pf_rate),o==="esi_contribution"&&I===0?(s.esi_no="",s.employee_esi_rate=0,s.additional_esi_rate=0,s.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(s.total_esi_rate=s.employee_esi_rate+s.additional_esi_rate),s}),i(p=>{const s={...p,[o]:I};return I===""&&delete s[o],o==="pf_contribution"&&I===0?(s.pf_no="",s.employee_pf_rate=0,s.additional_pf_rate=0,s.total_pf_rate=0):(o==="employee_pf_rate"||o==="additional_pf_rate")&&(s.total_pf_rate=s.employee_pf_rate+s.additional_pf_rate),o==="esi_contribution"&&I===0?(s.esi_no="",s.employee_esi_rate=0,s.additional_esi_rate=0,s.total_esi_rate=0):(o==="employee_esi_rate"||o==="additional_esi_rate")&&(s.total_esi_rate=s.employee_esi_rate+s.additional_esi_rate),s})};return x.useEffect(()=>{for(const I in m)I!=="id"&&m[I]===a[I]&&delete m[I];const o=Object.keys(m).filter(I=>I!=="id").length>0;k(o)},[f,m,a]),e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e(t,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:r(X,{children:[e(Q,{title:"Salary & Statutory Information"}),r("form",{onSubmit:async o=>{var I,p,s;o.preventDefault(),S(!0);try{const l=await axios.post(route("profile.update"),{ruleSet:"salary",...f});l.status===200?(W(l.data.user),S(!1),$.success(((I=l.data.messages)==null?void 0:I.length)>0?l.data.messages.join(" "):"Salary information updated successfully",{icon:"🟢",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}})):(S(!1),P(l.data.errors),$.error(l.data.error||"Failed to update salary information.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}}))}catch(l){S(!1),$.error(((s=(p=l.response)==null?void 0:p.data)==null?void 0:s.message)||"An unexpected error occurred.",{icon:"🔴",style:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,color:F.palette.text.primary}}),console.error(l)}},children:[r(H,{children:[e(A,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"salary-basis-label",children:"Salary basis"}),r(J,{labelId:"salary-basis-label",value:m.salary_basis||f.salary_basis||"na",onChange:o=>h("salary_basis",o.target.value),error:!!_.salary_basis,helperText:_.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select salary basis type"}),e(E,{value:"Hourly",children:"Hourly"}),e(E,{value:"Daily",children:"Daily"}),e(E,{value:"Weekly",children:"Weekly"}),e(E,{value:"Monthly",children:"Monthly"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(w,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:m.salary_amount||f.salary_amount||"",onChange:o=>h("salary_amount",o.target.value),InputProps:{startAdornment:e(rr,{position:"start",children:"$"})},error:!!_.salary_amount,helperText:_.salary_amount})}),e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"payment-type-label",children:"Payment type"}),r(J,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${a.id}`,value:m.payment_type||f.payment_type||"na",onChange:o=>h("payment_type",o.target.value),error:!!_.payment_type,helperText:_.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select payment type"}),e(E,{value:"Bank transfer",children:"Bank transfer"}),e(E,{value:"Check",children:"Check"}),e(E,{value:"Cash",children:"Cash"})]})]})})]}),e(de,{sx:{my:3}}),e(A,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"pf-contribution-label",children:"PF contribution"}),r(J,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${a.id}`,value:m.pf_contribution!==void 0?m.pf_contribution:f.pf_contribution!==void 0?f.pf_contribution:"na",onChange:o=>h("pf_contribution",o.target.value),error:!!_.pf_contribution,helperText:_.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select PF contribution"}),e(E,{value:1,children:"Yes"}),e(E,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(w,{disabled:!(m.pf_contribution||f.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:m.pf_no||f.pf_no,onChange:o=>h("pf_no",o.target.value),error:!!_.pf_no,helperText:_.pf_no})}),e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"employee-pf-rate-label",children:"Employee PF rate"}),r(J,{disabled:!(m.pf_contribution||f.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:m.employee_pf_rate||f.employee_pf_rate||"na",onChange:o=>h("employee_pf_rate",o.target.value),error:!!_.employee_pf_rate,helperText:_.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(o=>r(E,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"additional-rate-label",children:"Additional rate"}),r(J,{disabled:!(m.pf_contribution||f.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${a.id}`,value:m.additional_pf_rate||f.additional_pf_rate||"na",onChange:o=>h("additional_pf_rate",o.target.value),error:!!_.additional_pf_rate,helperText:_.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>r(E,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(w,{disabled:!(m.pf_contribution||f.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:m.total_pf_rate||f.total_pf_rate?`${m.total_pf_rate||f.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!_.total_pf_rate,helperText:_.total_pf_rate})})]}),e(de,{sx:{my:3}}),e(A,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),r(t,{container:!0,spacing:3,children:[e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"esi-contribution-label",children:"ESI contribution"}),r(J,{labelId:"esi-contribution-label",label:"ESI contribution",value:m.esi_contribution!==void 0?m.esi_contribution:f.esi_contribution!==void 0?f.esi_contribution:"na",onChange:o=>h("esi_contribution",o.target.value),error:!!_.esi_contribution,helperText:_.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select ESI contribution"}),e(E,{value:1,children:"Yes"}),e(E,{value:0,children:"No"})]})]})}),e(t,{item:!0,xs:12,md:4,children:e(w,{disabled:!(m.esi_contribution||f.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:m.esi_no||f.esi_no,onChange:o=>h("esi_no",o.target.value),error:!!_.esi_no,helperText:_.esi_no})}),e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"esi-contribution-label",children:"Employee ESI rate"}),r(J,{disabled:!(m.esi_contribution||f.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:m.employee_esi_rate||f.employee_esi_rate||"na",onChange:o=>h("employee_esi_rate",o.target.value),error:!!_.employee_esi_rate,helperText:_.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(o=>r(E,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:r(q,{fullWidth:!0,children:[e(z,{id:"esi-contribution-label",children:"Additional rate"}),r(J,{disabled:!(m.esi_contribution||f.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:m.additional_esi_rate||f.additional_esi_rate||"na",onChange:o=>h("additional_esi_rate",o.target.value),error:!!_.additional_esi_rate,helperText:_.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:F.glassCard.background,border:F.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(E,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(o=>r(E,{value:o,children:[o,"%"]},o))]})]})}),e(t,{item:!0,xs:12,md:4,children:e(w,{disabled:!(m.esi_contribution||f.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:m.total_esi_rate||f.total_esi_rate?`${m.total_esi_rate||f.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!_.total_esi_rate,helperText:_.total_esi_rate})})]})]}),e(tr,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e(ee,{disabled:!b,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:c,children:"Submit"})})]})]})})})},Fr=({project:a,isSelected:W=!1,onSelect:f,canView:D,getStatusColor:m,getStatusIcon:i,getPriorityColor:b,getHealthColor:k,getRiskColor:_,onQuickAction:P,formatCurrency:c,formatDate:S,userRole:F,className:h=""})=>{var C,re,v,M,L,Y;const d=()=>!a.total_tasks||a.total_tasks===0?a.progress||0:Math.round(a.completed_tasks/a.total_tasks*100),o=N=>{switch(N){case"good":return e(sr,{className:"w-4 h-4 text-success"});case"at_risk":return e(ke,{className:"w-4 h-4 text-warning"});case"critical":return e(lr,{className:"w-4 h-4 text-danger"});default:return e(ze,{className:"w-4 h-4 text-default-400"})}},I=N=>{switch(N==null?void 0:N.toLowerCase()){case"agile":case"scrum":return e(Xe,{className:"w-4 h-4"});case"waterfall":return e(Ce,{className:"w-4 h-4"});case"prince2":return e(He,{className:"w-4 h-4"});case"kanban":return e(fr,{className:"w-4 h-4"});default:return e(Je,{className:"w-4 h-4"})}},p=()=>!a.budget_allocated||a.budget_allocated===0?0:a.budget_spent/a.budget_allocated*100,s=N=>N>=.95?"success":N>=.85?"warning":"danger",l=N=>N>=.95?"success":N>=.85?"warning":"danger",n=d(),g=p(),R=a.health_status||"unknown",B=a.spi||1,j=a.cpi||1,G=(()=>{const N=[];return D("view")&&N.push({key:"view",label:"View",icon:e(dr,{className:"w-4 h-4"}),color:"primary"}),D("edit")&&N.push({key:"edit",label:"Edit",icon:e(cr,{className:"w-4 h-4"}),color:"default"}),D("view")&&N.push({key:"tasks",label:"Tasks",icon:e(Ce,{className:"w-4 h-4"}),color:"default"}),D("reports")&&N.push({key:"reports",label:"Reports",icon:e(Ke,{className:"w-4 h-4"}),color:"default"}),D("clone")&&N.push({key:"clone",label:"Clone",icon:e(Ye,{className:"w-4 h-4"}),color:"default"}),D("archive")&&N.push({key:"archive",label:"Archive",icon:e(Ze,{className:"w-4 h-4"}),color:"warning"}),D("delete")&&N.push({key:"delete",label:"Delete",icon:e(pr,{className:"w-4 h-4"}),color:"danger"}),N})();return r(Ee,{className:`h-full transition-all duration-200 hover:shadow-lg ${W?"ring-2 ring-primary-500 bg-primary-50/50":""} ${h}`,children:[e(or,{className:"pb-3",children:r("div",{className:"flex items-start justify-between w-full",children:[r("div",{className:"flex items-start space-x-3",children:[e(ar,{isSelected:W,onValueChange:f,size:"sm",className:"mt-1"}),r("div",{className:"flex-1 min-w-0",children:[r("div",{className:"flex items-center space-x-2 mb-2",children:[r("div",{className:"flex items-center space-x-2",children:[e("span",{className:"text-lg",children:a.type==="digital"?"🏢":a.type==="enhancement"?"🚀":a.type==="analytics"?"📊":a.type==="integration"?"🌐":a.type==="security"?"🔒":a.type==="marketing"?"🎨":"📋"}),e("h3",{className:"font-semibold text-lg truncate",children:a.project_name})]}),o(R)]}),r("div",{className:"flex items-center space-x-2 text-sm text-default-500 mb-2",children:[r("span",{className:"font-mono",children:["ID: ",a.project_code]}),e("span",{children:"•"}),r(ae,{size:"sm",color:b(a.priority),variant:"flat",startContent:e(br,{className:"w-3 h-3"}),children:[((C=a.priority)==null?void 0:C.charAt(0).toUpperCase())+((re=a.priority)==null?void 0:re.slice(1))," Priority"]})]})]})]}),r($e,{children:[e(We,{children:e(fe,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-default-600",children:e(nr,{className:"w-4 h-4"})})}),e(Le,{"aria-label":"Project actions",onAction:N=>P(N,a),children:G.map(N=>e(je,{startContent:N.icon,color:N.color,children:N.label},N.key))})]})]})}),e(Te,{className:"pt-0 pb-3",children:r("div",{className:"space-y-3",children:[r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center justify-between",children:[r(ae,{size:"sm",color:m(a.status),variant:"flat",startContent:i(a.status),children:["Status: ",(v=a.status)==null?void 0:v.replace("_"," ")]}),e("span",{className:"text-sm text-default-500",children:a.phase&&`(${a.phase})`})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[e("span",{children:"Progress"}),r("span",{className:"font-medium",children:[n,"%"]})]}),e(ur,{value:n,color:n>=75?"success":n>=50?"warning":"danger",size:"sm",className:"w-full"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ge,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Timeline: ",S(a.start_date)," - ",S(a.end_date)]})]}),r("div",{className:"space-y-1",children:[r("div",{className:"flex items-center justify-between text-sm",children:[r("div",{className:"flex items-center space-x-2",children:[e(Me,{className:"w-4 h-4 text-default-400"}),e("span",{children:"Budget"})]}),r("span",{className:"text-default-600",children:[c(a.budget_spent||0)," / ",c(a.budget_allocated||0)]})]}),r("div",{className:"flex items-center justify-between text-xs text-default-500",children:[r("span",{children:["(",g.toFixed(0),"% used)"]}),e(ae,{size:"sm",variant:"dot",color:g>100?"danger":g>90?"warning":"success",children:g>100?"Over budget":g>90?"High usage":"Good"})]})]}),r("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"📊 SPI:"}),e(ae,{size:"sm",variant:"flat",color:s(B),children:B.toFixed(2)})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-default-600",children:"💰 CPI:"}),e(ae,{size:"sm",variant:"flat",color:l(j),children:j.toFixed(2)})]})]}),r("div",{className:"space-y-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Ue,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Lead: ",((M=a.project_leader)==null?void 0:M.name)||"Unassigned"]}),r("span",{className:"text-default-500",children:["(",((L=a.project_leader)==null?void 0:L.role)||"PM",")"]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(Oe,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Dept: ",((Y=a.department)==null?void 0:Y.name)||"General"]})]})]}),r("div",{className:"grid grid-cols-2 gap-2",children:[r("div",{className:"flex items-center space-x-2 text-sm",children:[e(ke,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Risk:"}),e(ae,{size:"sm",variant:"flat",color:_(a.risk_level),children:a.risk_level||"Low"})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[e(qe,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-default-600",children:"Health:"}),e(ae,{size:"sm",variant:"flat",color:k(R),children:R==="good"?"✅ Good":R==="at_risk"?"🟡 At Risk":R==="critical"?"🔴 Critical":"⚪ Unknown"})]})]}),r("div",{className:"flex items-center space-x-2 text-sm",children:[I(a.methodology),r("span",{className:"text-default-600",children:["Methodology: ",a.methodology||"Standard"]})]}),a.next_milestone&&r("div",{className:"flex items-center space-x-2 text-sm",children:[e(ir,{className:"w-4 h-4 text-default-400"}),r("span",{className:"text-default-600",children:["Next: ",a.next_milestone]})]})]})}),e(hr,{className:"pt-2",children:r("div",{className:"w-full space-y-2",children:[e("div",{className:"flex flex-wrap gap-2",children:G.slice(0,3).map(N=>e(fe,{size:"sm",variant:"flat",color:N.color,startContent:N.icon,onPress:()=>P(N.key,a),className:"flex-1 min-w-0",children:N.label},N.key))}),G.length>3&&e("div",{className:"flex flex-wrap gap-2",children:G.slice(3,6).map(N=>e(fe,{size:"sm",variant:"light",color:N.color,startContent:N.icon,onPress:()=>P(N.key,a),className:"flex-1 min-w-0",children:N.label},N.key))}),r("div",{className:"text-xs text-default-500 text-center border-t border-default-200 pt-2",children:["Last updated: ",S(a.updated_at)]})]})})]})},Pr=[{title:"Office Management",openTasks:1,completedTasks:9,description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry...",deadline:"17 Apr 2019",leaders:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],team:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],progress:40},{title:"Office Management",openTasks:1,completedTasks:9,description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry...",deadline:"17 Apr 2019",leaders:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],team:[{name:"John Doe",avatar:"assets/img/profiles/avatar-02.jpg"},{name:"Richard Miles",avatar:"assets/img/profiles/avatar-09.jpg"},{name:"John Smith",avatar:"assets/img/profiles/avatar-10.jpg"},{name:"Mike Litorus",avatar:"assets/img/profiles/avatar-05.jpg"}],progress:40}],Ir=({title:a,allUsers:W,report_to:f,departments:D,designations:m})=>{var I,p,s,l;const[i,b]=x.useState(Re().props.user),[k,_]=ge.useState(0),[P,c]=ge.useState(null),[S,F]=x.useState(null),h=n=>{F(n)},d=()=>{F(null)},o=(n,g)=>{_(g)};return r(O,{children:[e(Ae,{title:i.name}),S==="profile"&&e(_r,{user:i,allUsers:W,departments:D,designations:m,open:S==="profile",setUser:b,closeModal:d}),S==="personal"&&e(yr,{user:i,open:S==="personal",setUser:b,closeModal:d}),S==="emergency"&&e(vr,{user:i,open:S==="emergency",setUser:b,closeModal:d}),S==="bank"&&e(Cr,{user:i,open:S==="bank",setUser:b,closeModal:d}),S==="family"&&e(kr,{user:i,open:S==="family",setUser:b,closeModal:d}),S==="education"&&e(Sr,{user:i,open:S==="education",setUser:b,closeModal:d}),S==="experience"&&e(Nr,{user:i,open:S==="experience",setUser:b,closeModal:d}),e(K,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Qe,{in:!0,children:r(X,{children:[e(Q,{sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("profile"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:r(t,{container:!0,spacing:2,direction:"row",alignItems:"flex-start",children:[e(t,{item:!0,xs:12,md:5,children:r(t,{container:!0,spacing:2,direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},children:[e(t,{item:!0,children:e(K,{sx:{display:"flex",alignItems:"center",mb:2},children:e(_e,{src:i.profile_image,alt:i.name,sx:{width:100,height:100,mr:2}})})}),e(t,{item:!0,xs:12,md:!0,children:r(K,{direction:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},sx:{display:"flex",flexDirection:"column",mb:2},children:[e(A,{variant:"h5",children:i.name}),e(A,{variant:"subtitle1",color:"textSecondary",children:((I=D.find(n=>n.id===i.department))==null?void 0:I.name)||"N/A"}),e(A,{variant:"body2",color:"textSecondary",children:((p=m.find(n=>n.id===i.designation))==null?void 0:p.title)||"N/A"}),r(A,{variant:"body2",color:"textSecondary",children:["Employee ID : ",i.employee_id||"N/A"]}),r(A,{variant:"body2",color:"textSecondary",children:["Date of Join : ",i.date_of_joining||"N/A"]}),e(ye,{variant:"outlined",color:"primary",sx:{mt:1},children:"Send Message"})]})})]})}),e(de,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),e(t,{item:!0,xs:12,md:6,children:r(ne,{children:[e(T,{children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Phone:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.phone||"N/A"})})]})}),e(T,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Email:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.email||"N/A"})})]})}),e(T,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Birthday:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.birthday||"N/A"})})]})}),e(T,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Address:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.address||"N/A"})})]})}),e(T,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Gender:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.gender||"N/A"})})]})}),e(T,{children:r(t,{container:!0,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"Reports to:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:W.find(n=>n.id===i.report_to)?r(K,{sx:{display:"flex",alignItems:"center"},children:[e(_e,{src:`/assets/images/users/${(s=W.find(n=>n.id===i.report_to))==null?void 0:s.user_name}.jpg`,alt:f.name,sx:{width:24,height:24,mr:1}}),e(A,{color:"primary",children:(l=W.find(n=>n.id===i.report_to))==null?void 0:l.name})]}):"N/A"})})]})})]})})]})}),e(H,{sx:{paddingBottom:"0px !important"},children:r(mr,{value:k,onChange:o,"aria-label":"User Profile Tabs",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:[e(be,{label:"Profile"}),e(be,{label:"Projects"}),e(be,{label:"Salary & Statutory"}),e(be,{label:"Assets"})]})})]})})}),r(K,{sx:{p:2},children:[k===0&&r(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:[e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(X,{sx:{mb:2,flex:1},children:[e(Q,{title:"Personal Information",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("personal"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.passport_no||i.passport_exp_date||i.nationality||i.religion||i.marital_status||i.employment_of_spouse||i.number_of_children?r(ne,{children:[i.passport_no&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Passport No.:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.passport_no||"N/A"})})]})}),i.passport_exp_date&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Passport Exp Date.:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.passport_exp_date||"N/A"})})]})}),i.nid&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• NID No.:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.nid||"N/A"})})]})}),i.nationality&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Nationality:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.nationality||"N/A"})})]})}),i.religion&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Religion:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.religion||"N/A"})})]})}),i.marital_status&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Marital Status:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.marital_status||"N/A"})})]})}),i.employment_of_spouse&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Employment of Spouse:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.employment_of_spouse||"N/A"})})]})}),i.number_of_children&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• No. of Children:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.number_of_children||"N/A"})})]})})]}):e(A,{children:"No personal information available"})})]})}),e(t,{item:!0,xs:12,md:6,sx:{display:"flex",flexDirection:"column"},children:r(X,{sx:{mb:2,flex:1},children:[e(Q,{title:"Emergency Contact",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("emergency"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.emergency_contact_primary_name||i.emergency_contact_secondary_name?r(ne,{children:[i.emergency_contact_primary_name&&r(O,{children:[e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_primary_name||"N/A"})})]})}),e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_primary_relationship||"N/A"})})]})}),e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_primary_phone||"N/A"})})]})})]}),i.emergency_contact_secondary_name&&r(O,{children:[e(de,{sx:{my:2}}),e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_secondary_name||"N/A"})})]})}),e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_secondary_relationship||"N/A"})})]})}),e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.emergency_contact_secondary_phone||"N/A"})})]})})]})]}):e(A,{children:"No emergency contact information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",sx:{mb:2},children:[e(Q,{title:"Bank Information",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("bank"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.bank_name||i.bank_account_no||i.ifsc_code||i.pan_no?r(ne,{children:[i.bank_name&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Bank Name:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.bank_name})})]})}),i.bank_account_no&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Bank Account No.:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.bank_account_no})})]})}),i.ifsc_code&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• IFSC Code:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.ifsc_code})})]})}),i.pan_no&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• PAN No:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.pan_no})})]})})]}):e(A,{children:"No bank information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",children:[e(Q,{title:"Family Information",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("family"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.family_member_name||i.family_member_relationship||i.family_member_dob||i.family_member_phone?r(ne,{children:[i.family_member_name&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Name:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.family_member_name})})]})}),i.family_member_relationship&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Relationship:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.family_member_relationship})})]})}),i.family_member_dob&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Date of Birth:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.family_member_dob})})]})}),i.family_member_phone&&e(T,{disableGutters:!0,children:r(t,{container:!0,spacing:2,children:[e(t,{item:!0,xs:5,children:e(y,{primary:"• Phone:"})}),e(t,{item:!0,xs:7,children:e(y,{primary:i.family_member_phone})})]})})]}):e(A,{children:"No family member information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",sx:{mb:2},children:[e(Q,{title:"Education Information",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("education"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.educations&&i.educations.length>0?e(ne,{children:i.educations.map((n,g)=>r(ge.Fragment,{children:[e(T,{disableGutters:!0,children:r(A,{variant:"h6",children:["• ",n.institution]})}),e(T,{disableGutters:!0,children:e(A,{variant:"body1",children:n.degree||"N/A"})}),e(T,{disableGutters:!0,children:r(A,{variant:"body2",children:[n.starting_date?new Date(n.starting_date).getFullYear():"N/A"," -",n.complete_date?new Date(n.complete_date).getFullYear():"N/A"]})}),g<i.educations.length-1&&e(de,{sx:{my:1}})]},n.id))}):e(A,{children:"No education information"})})]})}),e(t,{item:!0,xs:12,md:6,children:r(X,{variant:"outlined",children:[e(Q,{title:"Experience",sx:{padding:"24px"},action:e(U,{variant:"outlined",color:"primary",onClick:()=>h("experience"),sx:{position:"absolute",top:16,right:16},children:e(te,{})})}),e(H,{children:i.experiences&&i.experiences.length>0?e(ne,{children:i.experiences.map((n,g)=>r(ge.Fragment,{children:[e(T,{disableGutters:!0,children:r(A,{variant:"h6",children:["• ",n.job_position," at ",n.company_name]})}),e(T,{disableGutters:!0,children:r(A,{variant:"body1",children:[n.period_from?new Date(n.period_from).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"N/A"," "," - ",n.period_to?new Date(n.period_to).toLocaleDateString("en-US",{year:"numeric",month:"long"}):"Present"]})}),e(T,{disableGutters:!0,children:e(A,{variant:"body2",children:n.location})}),n.description&&e(T,{disableGutters:!0,children:e(A,{variant:"body2",children:n.description})}),g<i.experiences.length-1&&e(de,{sx:{my:1}})]},g))}):e(A,{children:"No experience information"})})]})})]}),k===1&&e(t,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:Pr.map((n,g)=>e(t,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column"},children:e(Fr,{project:n})},n.id||g))}),k===2&&e(wr,{user:i,setUser:b})]})]})};Ir.layout=a=>e(Ve,{children:a});export{Ir as default};
