import{r,j as t,a as e,Q as B,h as o,t as y,f as I,g as q,S as h}from"./app-DDhVNfvV.js";import{c as W,H as Q,d as U,q as x,n as N,o as _,p as d,A as X,B as w}from"./App-CULBC9Jb.js";import{S as g}from"./StatsCard-D4jLOnws.js";import{m as b}from"./GlassCard-B8deHOrc.js";import{F as H}from"./BuildingOfficeIcon-BXNAJj1w.js";import{F as Z}from"./ClockIcon-UBQM4q2z.js";import{F as G}from"./ExclamationTriangleIcon-3tpAB86s.js";import{F as J}from"./FunnelIcon-BqiU4MFX.js";import{F as Y}from"./DocumentTextIcon-QwzC9WoH.js";import{F as ee}from"./EyeIcon-B-1DdV8E.js";import{F as ae}from"./EllipsisVerticalIcon-0SYcdA89.js";import{F as te}from"./PencilIcon-BtapQh-d.js";import{F as re}from"./TrashIcon-rGR8b_v2.js";import{F as ne}from"./UserGroupIcon-CFQYzcyB.js";import{u as le}from"./index-DlwYAVEC.js";import{c as se}from"./chunk-D5XJWRAV-BEd1Mod5.js";import{i as ie}from"./chunk-6MDMHKHV-DNEscIMF.js";import{t as oe,a as ce,b as de,c as me,d as ue,e as pe}from"./chunk-F3UDT23P-Bon0qFEG.js";import{p as he}from"./chunk-O5I3QTYU-BlPqa12Y.js";import{m as fe,a as we,b as ge,c as ve,d as ye}from"./chunk-3BLMMOBU-CpY4Bk7j.js";import{t as xe}from"./chunk-7ZZXWEXF-D8xxaoD-.js";import{c as Ne}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import{a as _e}from"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./app-CYwLuuRk.js";import"./logo-DoLGM3I0.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserIcon-BZDmR83e.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./KeyIcon-CAZJdP6I.js";import"./CheckCircleIcon-BkPxWqsz.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./useLabels-Blg_QI1U.js";import"./XMarkIcon-CRGrHH6E.js";import"./useFormReset-Dv_1w4_q.js";import"./StatsCards-CaEaffu4.js";import"./create-visual-element-DIA5r6xh.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./useLabel-C1JBDqVQ.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./useHasTabbableChild-BMncZCCk.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./index-CokAva9Y.js";function be({title:n,titleId:l,...s},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},s),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Se=r.forwardRef(be);function Ce({title:n,titleId:l,...s},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},s),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const Fe=r.forwardRef(Ce);function Te({title:n,titleId:l,...s},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":l},s),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const ke=r.forwardRef(Te),Ca=({tenants:n,plans:l,stats:s,filters:i})=>{var R;const[S,C]=r.useState(i.search||""),[f,F]=r.useState(i.status||""),[m,T]=r.useState(i.plan||""),[u,A]=r.useState(null),{isOpen:P,onOpen:O,onClose:v}=le(),k=()=>{h.get("/admin/tenants",{search:S||void 0,status:f||void 0,plan:m||void 0},{preserveState:!0,preserveScroll:!0})},D=()=>{C(""),F(""),T(""),h.get("/admin/tenants",{},{preserveState:!0,preserveScroll:!0})},E=async(a,c)=>{try{if((await fetch(`/admin/tenants/${a.id}/${c}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).ok)w.success(`Tenant ${c}d successfully`),h.reload();else throw new Error(`Failed to ${c} tenant`)}catch(p){w.error(p.message)}},j=async()=>{if(u)try{if((await fetch(`/admin/tenants/${u.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).ok)w.success("Tenant deleted successfully"),h.reload(),v();else throw new Error("Failed to delete tenant")}catch(a){w.error(a.message)}},z=a=>{switch(a){case"active":return"success";case"trial":return"warning";case"suspended":return"danger";default:return"default"}},L=[{key:"",label:"All Status"},{key:"active",label:"Active"},{key:"trial",label:"Trial"},{key:"suspended",label:"Suspended"}],M=[{key:"",label:"All Plans"},...l.map(a=>({key:a.id,label:a.name}))],K=[{name:"TENANT",uid:"tenant"},{name:"PLAN",uid:"plan"},{name:"STATUS",uid:"status"},{name:"USERS",uid:"users"},{name:"CREATED",uid:"created"},{name:"ACTIONS",uid:"actions"}],V=(a,c)=>{var p,$;switch(c){case"tenant":return t("div",{className:"flex items-center gap-3",children:[e(_e,{name:a.name,size:"sm",className:"text-tiny"}),t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm capitalize",children:a.name}),e("p",{className:"text-bold text-tiny capitalize text-default-400",children:a.domain})]})]});case"plan":return t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm capitalize",children:((p=a.plan)==null?void 0:p.name)||"No Plan"}),t("p",{className:"text-bold text-tiny capitalize text-default-400",children:["$",(($=a.plan)==null?void 0:$.price)||0,"/month"]})]});case"status":return e(Ne,{className:"capitalize",color:z(a.status),size:"sm",variant:"flat",children:a.status});case"users":return t("div",{className:"flex items-center gap-1",children:[e(ne,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:a.tenant_users_count||0})]});case"created":return t("div",{className:"flex flex-col",children:[e("p",{className:"text-bold text-sm capitalize",children:new Date(a.created_at).toLocaleDateString()}),e("p",{className:"text-bold text-tiny capitalize text-default-400",children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]});case"actions":return t("div",{className:"relative flex justify-end items-center gap-2",children:[e(xe,{content:"View Details",children:e(o,{isIconOnly:!0,size:"sm",variant:"light",as:y,href:`/admin/tenants/${a.id}`,children:e(ee,{className:"text-lg text-default-400 pointer-events-none"})})}),t(x,{children:[e(N,{children:e(o,{isIconOnly:!0,size:"sm",variant:"light",children:e(ae,{className:"text-lg text-default-400"})})}),t(_,{children:[e(d,{as:y,href:`/admin/tenants/${a.id}/edit`,startContent:e(te,{className:"w-4 h-4"}),children:"Edit"}),a.status==="active"?e(d,{startContent:e(Fe,{className:"w-4 h-4"}),onPress:()=>E(a,"suspend"),children:"Suspend"}):e(d,{startContent:e(ke,{className:"w-4 h-4"}),onPress:()=>E(a,"activate"),children:"Activate"}),e(d,{color:"danger",startContent:e(re,{className:"w-4 h-4"}),onPress:()=>{A(a),O()},children:"Delete"})]})]})]});default:return null}};return t(X,{children:[e(B,{title:"Tenant Management"}),t("div",{className:"space-y-6 p-6",children:[t(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[t("div",{children:[e("h1",{className:"text-3xl font-bold text-foreground",children:"Tenant Management"}),e("p",{className:"text-default-500 mt-1",children:"Manage all company tenants and their subscriptions"})]}),t("div",{className:"flex gap-2",children:[e(o,{color:"default",variant:"flat",startContent:e(Se,{className:"w-4 h-4"}),children:"Export"}),e(o,{color:"primary",startContent:e(W,{className:"w-4 h-4"}),as:y,href:"/admin/tenants/create",children:"Add Tenant"})]})]}),t(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e(g,{title:"Total Tenants",value:s.total,icon:e(H,{className:"w-6 h-6"}),color:"primary"}),e(g,{title:"Active",value:s.active,icon:e(Q,{className:"w-6 h-6"}),color:"success"}),e(g,{title:"Trial",value:s.trial,icon:e(Z,{className:"w-6 h-6"}),color:"warning"}),e(g,{title:"Suspended",value:s.suspended,icon:e(G,{className:"w-6 h-6"}),color:"danger"})]}),e(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:t(I,{children:[e(se,{className:"pb-3",children:t("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[t("div",{className:"flex gap-3 flex-1",children:[e(ie,{placeholder:"Search tenants...",value:S,onValueChange:C,onKeyPress:a=>a.key==="Enter"&&k(),startContent:e(U,{className:"w-4 h-4"}),className:"max-w-xs"}),t(x,{children:[e(N,{children:e(o,{variant:"flat",startContent:e(J,{className:"w-4 h-4"}),children:f||"Status"})}),e(_,{selectionMode:"single",selectedKeys:f?[f]:[],onSelectionChange:a=>F(Array.from(a)[0]||""),children:L.map(a=>e(d,{children:a.label},a.key))})]}),t(x,{children:[e(N,{children:e(o,{variant:"flat",startContent:e(Y,{className:"w-4 h-4"}),children:m?(R=l.find(a=>a.id==m))==null?void 0:R.name:"Plan"})}),e(_,{selectionMode:"single",selectedKeys:m?[m]:[],onSelectionChange:a=>T(Array.from(a)[0]||""),children:M.map(a=>e(d,{children:a.label},a.key))})]})]}),t("div",{className:"flex gap-2",children:[e(o,{color:"primary",variant:"flat",onPress:k,children:"Search"}),e(o,{color:"default",variant:"light",onPress:D,children:"Clear"})]})]})}),t(q,{className:"px-0",children:[t(oe,{"aria-label":"Tenants table",children:[e(ce,{columns:K,children:a=>e(de,{align:a.uid==="actions"?"center":"start",children:a.name},a.uid)}),e(me,{items:n.data,children:a=>e(ue,{children:c=>e(pe,{children:V(a,c)})},a.id)})]}),e("div",{className:"flex justify-center mt-4",children:e(he,{total:n.last_page,page:n.current_page,onChange:a=>{h.get("/admin/tenants",{...i,page:a},{preserveState:!0,preserveScroll:!0})}})})]})]})})]}),e(ye,{isOpen:P,onClose:v,children:t(fe,{children:[e(we,{className:"flex flex-col gap-1",children:"Confirm Deletion"}),e(ge,{children:t("p",{children:["Are you sure you want to delete ",e("strong",{children:u==null?void 0:u.name}),"? This action cannot be undone and will permanently remove all data associated with this tenant."]})}),t(ve,{children:[e(o,{color:"default",variant:"light",onPress:v,children:"Cancel"}),e(o,{color:"danger",onPress:j,children:"Delete Tenant"})]})]})})]})};export{Ca as default};
