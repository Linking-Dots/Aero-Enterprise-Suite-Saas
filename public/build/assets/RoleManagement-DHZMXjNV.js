import{r as a,i as W,j as s,a as oe,b as n,Q as Xe,F as Ce,q as Ye}from"./app-CFP6hyYs.js";import{L as pe,M as ge,r as be,_ as he,aW as Ze,t as I,ak as Je,s as Z,v as ie,w as fe,af as Ke,ah as er,u as rr,a as Re,am as ce,aX as Ne,aY as sr,n as L,B as de,f as ae,T as C,G as or,e as ar,o as Se,i as tr,ai as nr,m as te,I as Ae,aD as ir,aC as lr,A as cr}from"./App-D6An07Kr.js";import{P as dr}from"./PageHeader-Bz93Sfm2.js";import{S as mr}from"./StatsCards-CUpUkWwy.js";import{a as ke,b as Pe,c as Me}from"./DialogContent-BtQ3vICj.js";import{F as _e}from"./PlusIcon-vwTHQno-.js";import{D as Fe}from"./DialogTitle-CuQhO8kb.js";import{T as me}from"./TextField-BXsOYBjR.js";import{B as $e}from"./Button-MN0ZW-Kq.js";import{L as je}from"./LoadingButton-11nymGf5.js";import{F as ur}from"./ExclamationTriangleIcon-CRuJlVxF.js";import{F as pr}from"./PencilSquareIcon-BUDILrf-.js";import{F as gr}from"./TrashIcon-BZfJHKgb.js";import{u as br}from"./useSlot-CUo2w1xl.js";import{C as hr}from"./Checkbox-CCH6bTaM.js";import{F as fr}from"./DocumentArrowDownIcon-DNAd9qKt.js";import{F as xr}from"./PresentationChartLineIcon-Bi80eNXG.js";import"./app-CA3O2NZp.js";import"./chunk-D5XJWRAV-uH3KDZFl.js";import"./Select-Du8X2Jnk.js";import"./Popover-D8TPN1sn.js";import"./List-D9MzT9Av.js";import"./InputLabel-iYTjAW9D.js";import"./CircularProgress-CFRIP969.js";function yr({title:e,titleId:o,...u},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":o},u),e?a.createElement("title",{id:o},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const vr=a.forwardRef(yr),De=a.createContext({});function wr(e){return ge("MuiAccordion",e)}const ne=pe("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Cr=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Rr=e=>{const{classes:o,square:u,expanded:i,disabled:R,disableGutters:x}=e;return fe({root:["root",!u&&"rounded",i&&"expanded",R&&"disabled",!x&&"gutters"],region:["region"]},wr,o)},Nr=Z(Ke,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:u}=e;return[{[`& .${ne.region}`]:o.region},o.root,!u.square&&o.rounded,!u.disableGutters&&o.gutters]}})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],o),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ne.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ne.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:o=>!o.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:o=>!o.disableGutters,style:{[`&.${ne.expanded}`]:{margin:"16px 0"}}}]})),Sr=a.forwardRef(function(o,u){const i=be({props:o,name:"MuiAccordion"}),{children:R,className:x,defaultExpanded:M=!1,disabled:_=!1,disableGutters:E=!1,expanded:y,onChange:F,square:N=!1,slots:Q={},slotProps:v={},TransitionComponent:T,TransitionProps:b}=i,B=he(i,Cr),[h,$]=Ze({controlled:y,default:M,name:"Accordion",state:"expanded"}),A=a.useCallback(f=>{$(!h),F&&F(f,!h)},[h,F,$]),[S,...J]=a.Children.toArray(R),O=a.useMemo(()=>({expanded:h,disabled:_,disableGutters:E,toggle:A}),[h,_,E,A]),k=I({},i,{square:N,disabled:_,disableGutters:E,expanded:h}),V=Rr(k),K=I({transition:T},Q),U=I({transition:b},v),[D,ee]=br("transition",{elementType:Je,externalForwardedProps:{slots:K,slotProps:U},ownerState:k});return W.jsxs(Nr,I({className:ie(V.root,x),ref:u,ownerState:k,square:N},B,{children:[W.jsx(De.Provider,{value:O,children:S}),W.jsx(D,I({in:h,timeout:"auto"},ee,{children:W.jsx("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region",className:V.region,children:J})}))]}))});function Ar(e){return ge("MuiAccordionDetails",e)}pe("MuiAccordionDetails",["root"]);const kr=["className"],Pr=e=>{const{classes:o}=e;return fe({root:["root"]},Ar,o)},Mr=Z("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),_r=a.forwardRef(function(o,u){const i=be({props:o,name:"MuiAccordionDetails"}),{className:R}=i,x=he(i,kr),M=i,_=Pr(M);return W.jsx(Mr,I({className:ie(_.root,R),ref:u,ownerState:M},x))});function Fr(e){return ge("MuiAccordionSummary",e)}const H=pe("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),$r=["children","className","expandIcon","focusVisibleClassName","onClick"],jr=e=>{const{classes:o,expanded:u,disabled:i,disableGutters:R}=e;return fe({root:["root",u&&"expanded",i&&"disabled",!R&&"gutters"],focusVisible:["focusVisible"],content:["content",u&&"expanded",!R&&"contentGutters"],expandIconWrapper:["expandIconWrapper",u&&"expanded"]},Fr,o)},Br=Z(er,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],o),[`&.${H.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${H.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${H.disabled})`]:{cursor:"pointer"},variants:[{props:u=>!u.disableGutters,style:{[`&.${H.expanded}`]:{minHeight:64}}}]}}),Dr=Z("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,o)=>o.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:o=>!o.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${H.expanded}`]:{margin:"20px 0"}}}]})),Lr=Z("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,o)=>o.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${H.expanded}`]:{transform:"rotate(180deg)"}})),Er=a.forwardRef(function(o,u){const i=be({props:o,name:"MuiAccordionSummary"}),{children:R,className:x,expandIcon:M,focusVisibleClassName:_,onClick:E}=i,y=he(i,$r),{disabled:F=!1,disableGutters:N,expanded:Q,toggle:v}=a.useContext(De),T=h=>{v&&v(h),E&&E(h)},b=I({},i,{expanded:Q,disabled:F,disableGutters:N}),B=jr(b);return W.jsxs(Br,I({focusRipple:!1,disableRipple:!0,disabled:F,component:"div","aria-expanded":Q,className:ie(B.root,x),focusVisibleClassName:ie(B.focusVisible,_),onClick:T,ref:u,ownerState:b},y,{children:[W.jsx(Dr,{className:B.content,ownerState:b,children:R}),M&&W.jsx(Lr,{className:B.expandIconWrapper,ownerState:b,children:M})]}))}),ue=e=>Array.isArray(e)?[...e]:[],Be=e=>e&&typeof e=="object"&&!Array.isArray(e)?{...e}:{},Tr=e=>{const o=ue(e.roles),u=ue(e.permissions),i=Be(e.permissions_grouped),R=ue(e.role_has_permissions);Be(e.enterprise_modules);const x=!!e.can_manage_super_admin,M=e.title,_=rr(),E=Re(_.breakpoints.down("sm"));Re(_.breakpoints.down("md"));const[y,F]=a.useState(o),[N,Q]=a.useState(u),[v,T]=a.useState(R),[b,B]=a.useState(o.length>0?o[0].id:null),[h,$]=a.useState(new Set),[A,S]=a.useState(!1),[J,O]=a.useState(!1),[k,V]=a.useState(null),[K,U]=a.useState(!1),[D,ee]=a.useState(null),[f,xe]=a.useState(""),[j,ye]=a.useState("all"),[re,q]=a.useState({name:"",description:"",permissions:[],hierarchy_level:10}),d=a.useMemo(()=>y.find(r=>r.id===b)||null,[y,b]);a.useEffect(()=>{if(b){const r=le(b);$(new Set(r))}else $(new Set)},[b,v]);const z=a.useMemo(()=>({totalRoles:Array.isArray(y)?y.length:0,totalPermissions:Array.isArray(N)?N.length:0,activeRole:(d==null?void 0:d.name)||"None Selected",grantedPermissions:h.size}),[y,N,d,h]),Le=a.useMemo(()=>[{title:"Total Roles",value:z.totalRoles,icon:s(ce,{}),color:"text-blue-600",iconBg:"bg-blue-500/20",description:"System roles"},{title:"Permissions",value:z.totalPermissions,icon:s(Ne,{}),color:"text-green-600",iconBg:"bg-green-500/20",description:"Available permissions"},{title:"Active Role",value:z.activeRole==="None Selected"?"None":z.activeRole,icon:s(sr,{}),color:"text-purple-600",iconBg:"bg-purple-500/20",description:"Currently selected",customStyle:z.activeRole==="None Selected"?{fontSize:"1rem"}:{}},{title:"Granted",value:z.grantedPermissions,icon:s(vr,{}),color:"text-orange-600",iconBg:"bg-orange-500/20",description:"Active permissions"}],[z]);a.useMemo(()=>{if(!i||typeof i!="object")return[];let r=[];return Object.entries(i).forEach(([t,l])=>{if(j==="all"||j===t){const m=Array.isArray(l.permissions)?l.permissions.filter(c=>f===""||c.name&&c.name.toLowerCase().includes(f.toLowerCase())||c.display_name&&c.display_name.toLowerCase().includes(f.toLowerCase())):[];r=[...r,...m]}}),r},[i,f,j]);const Ee=a.useMemo(()=>{if(!i||typeof i!="object")return{};const r={};return Object.entries(i).forEach(([t,l])=>{if(j==="all"||j===t){const m=Array.isArray(l.permissions)?l.permissions.filter(c=>f===""||c.name&&c.name.toLowerCase().includes(f.toLowerCase())||c.display_name&&c.display_name.toLowerCase().includes(f.toLowerCase())):[];m.length>0&&(r[t]={...l,permissions:m})}}),r},[i,f,j]),Te=a.useMemo(()=>!i||typeof i!="object"?[]:Object.keys(i).sort(),[i]),le=a.useCallback(r=>Array.isArray(v)?v.filter(t=>t&&t.role_id===r).map(t=>t.permission_id).filter(Boolean):[],[v]),G=(r,t)=>{if(!Array.isArray(v)||!Array.isArray(N))return!1;const l=v.filter(c=>c&&c.role_id===r),m=N.find(c=>c&&c.name===t);return m&&l.some(c=>c.permission_id===m.id)};a.useCallback(r=>!d||!i[r]?!1:i[r].permissions.every(l=>G(d.id,l.name)),[d,i,G]),a.useCallback(r=>!d||!i[r]?!1:i[r].permissions.some(l=>G(d.id,l.name)),[d,i,G]);const Ge=r=>r.name==="Super Administrator"?x:!0,Ie=a.useCallback(r=>{B(r);const t=v.filter(l=>l.role_id===r).map(l=>l.permission_id);$(new Set(t))},[v]),We=a.useCallback(r=>{xe(r)},[]),ze=a.useCallback(r=>{ye(r)},[]),Oe=a.useCallback(()=>{O(!0)},[]),ve=a.useCallback(()=>{O(!1),V(null),q({name:"",description:"",permissions:[],hierarchy_level:10})},[]),we=a.useCallback(async r=>{var t,l;if(!(!d||A)){S(!0);try{const m=G(d.id,r),c=m?"revoke":"grant";if((await oe.post("/admin/roles/update-permission",{role_id:d.id,permission:r,action:c})).status===200){const p=N.find(P=>P.name===r);p&&(m?(T(P=>P.filter(g=>!(g.role_id===d.id&&g.permission_id===p.id))),$(P=>{const g=new Set(P);return g.delete(p.id),g})):(T(P=>[...P,{role_id:d.id,permission_id:p.id}]),$(P=>new Set([...P,p.id])))),L.success(`Permission ${c}ed successfully`)}}catch(m){console.error("Error updating permission:",m),L.error(((l=(t=m.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to update permission")}finally{S(!1)}}},[d,A,G,N,T,$]),Ve=a.useCallback(async r=>{var t,l;if(!(!d||A)){S(!0);try{const m=await oe.post("/admin/roles/update-module",{roleId:d.id,module:r,action:"toggle"});if(m.status===200){T(m.data.role_has_permissions);const c=m.data.role_has_permissions.filter(w=>w.role_id===d.id).map(w=>w.permission_id);$(new Set(c)),L.success("Module permissions updated successfully")}}catch(m){console.error("Error updating module permissions:",m),L.error(((l=(t=m.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to update module permissions")}finally{S(!1)}}},[d,A]),Ue=async()=>{var r,t;S(!0);try{const l=k?`/admin/roles/${k.id}`:"/admin/roles",c=await oe[k?"put":"post"](l,re);c.status===200&&(k?(F(w=>w.map(p=>p.id===k.id?c.data.role:p)),L.success("Role updated successfully")):(F(w=>[...w,c.data.role]),L.success("Role created successfully")),O(!1),V(null),q({name:"",description:"",permissions:[],hierarchy_level:10}))}catch(l){console.error("Error saving role:",l),L.error(((t=(r=l.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to save role")}finally{S(!1)}},qe=async()=>{var r,t;if(D){S(!0);try{(await oe.delete(`/admin/roles/${D.id}`)).status===200&&(F(m=>m.filter(c=>c.id!==D.id)),b===D.id&&B(y.length>1?y[0].id:null),L.success("Role deleted successfully"))}catch(l){console.error("Error deleting role:",l),L.error(((t=(r=l.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to delete role")}finally{S(!1),U(!1),ee(null)}}},He=r=>{V(r),q({name:r.name,description:r.description||"",permissions:le(r.id),hierarchy_level:r.hierarchy_level||10}),O(!0)},Qe=r=>{ee(r),U(!0)};return n(Ce,{children:[s(Xe,{title:M}),J&&n(ke,{open:J,onClose:ve,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[s(Fe,{children:n(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(_e,{className:"w-6 h-6"}),k?"Edit Role":"Create New Role"]})}),s(Pe,{children:n(ae,{container:!0,spacing:3,sx:{mt:1},children:[s(ae,{item:!0,xs:12,sm:6,children:s(me,{fullWidth:!0,label:"Role Name",value:re.name,onChange:r=>q(t=>({...t,name:r.target.value})),required:!0})}),n(ae,{item:!0,xs:12,sm:6,children:["                                ",s(me,{fullWidth:!0,label:"Hierarchy Level",type:"number",value:re.hierarchy_level,onChange:r=>q(t=>({...t,hierarchy_level:parseInt(r.target.value)})),helperText:"Role priority level (1-50, lower numbers = higher priority)",inputProps:{min:1,max:50},disabled:!x})]}),s(ae,{item:!0,xs:12,children:s(me,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:re.description,onChange:r=>q(t=>({...t,description:r.target.value}))})})]})}),n(Me,{sx:{p:3},children:[s($e,{onClick:ve,children:"Cancel"}),s(je,{variant:"contained",onClick:Ue,loading:A,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)"}},children:k?"Update Role":"Create Role"})]})]}),K&&n(ke,{open:K,onClose:()=>U(!1),PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[s(Fe,{children:n(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(ur,{className:"w-6 h-6 text-red-500"}),"Confirm Delete"]})}),s(Pe,{children:n(C,{children:['Are you sure you want to delete the role "',D==null?void 0:D.name,'"? This action cannot be undone.']})}),n(Me,{sx:{p:3},children:[s($e,{onClick:()=>U(!1),children:"Cancel"}),s(je,{variant:"contained",color:"error",onClick:qe,loading:A,children:"Delete Role"})]})]}),s(de,{sx:{display:"flex",justifyContent:"center",p:2},children:s(or,{in:!0,children:s(ar,{children:n(dr,{title:"Role Management",subtitle:"Manage roles, permissions, and access control",icon:s(xr,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Create Role",icon:s(_e,{className:"w-4 h-4"}),onPress:Oe,className:"bg-gradient-to-r from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] hover:from-[rgba(var(--theme-primary-rgb),0.3)] hover:to-[rgba(var(--theme-secondary-rgb),0.3)] border border-[rgba(var(--theme-primary-rgb),0.3)]"},{label:"Export",icon:s(fr,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-success-rgb),0.3)] bg-[rgba(var(--theme-success-rgb),0.05)] hover:bg-[rgba(var(--theme-success-rgb),0.1)]"}],children:["                                ",n("div",{className:"p-6",children:[s(mr,{stats:Le}),s(Se,{in:!0,timeout:1200,children:s("div",{className:"mb-6",children:n("div",{className:"flex flex-col gap-4",children:[n("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[s("div",{className:"w-full sm:flex-1",children:s(tr,{label:"Search Permissions",variant:"bordered",placeholder:"Search permissions by name or module...",value:f,onValueChange:We,startContent:s(nr,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:E?"sm":"md"})}),s("div",{className:"flex gap-2 w-full sm:w-auto",children:s("div",{className:"flex-1 sm:min-w-[150px]",children:n("select",{className:"w-full px-3 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:j,onChange:r=>ze(r.target.value),children:[s("option",{value:"all",children:"All Modules"}),Te.map(r=>s("option",{value:r,children:r},r))]})})})]}),(f||j!=="all")&&n("div",{className:"flex flex-wrap gap-2",children:[f&&n(te,{variant:"flat",color:"primary",size:"sm",onClose:()=>xe(""),children:["Search: ",f]}),j!=="all"&&n(te,{variant:"flat",color:"secondary",size:"sm",onClose:()=>ye("all"),children:["Module: ",j]})]})]})})}),s(Se,{in:!0,timeout:1400,children:n("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s("div",{className:"lg:col-span-1",children:n("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:[s("div",{className:"flex items-center justify-between mb-4",children:n(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[s(ce,{className:"w-5 h-5"}),"Roles (",y.length,")"]})}),s("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:y.map(r=>s("div",{className:`p-3 rounded-lg border transition-all duration-200 cursor-pointer ${b===r.id?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-400/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>Ie(r.id),children:n("div",{className:"flex items-center justify-between",children:[n("div",{className:"flex items-center gap-3",children:[s("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${b===r.id?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-gray-500"}`,children:r.name.charAt(0).toUpperCase()}),n("div",{children:[s(C,{variant:"body2",className:"font-medium",children:r.name}),n(C,{variant:"caption",color:"textSecondary",children:[le(r.id).length," permissions"]}),r.name==="Super Administrator"&&s(te,{label:"System",size:"sm",className:"ml-1"})]})]}),Ge(r)&&n("div",{className:"flex gap-1",children:[s(Ae,{size:"small",onClick:t=>{t.stopPropagation(),He(r)},className:"text-gray-400 hover:text-blue-400",children:s(pr,{className:"w-4 h-4"})}),s(Ae,{size:"small",onClick:t=>{t.stopPropagation(),Qe(r)},className:"text-gray-400 hover:text-red-400",children:s(gr,{className:"w-4 h-4"})})]})]})},r.id))})]})}),s("div",{className:"lg:col-span-2",children:s("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:d?n(Ce,{children:[n("div",{className:"flex items-center justify-between mb-4",children:[n(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[s(Ne,{className:"w-5 h-5"}),d.name," Permissions"]}),s(te,{label:`${h.size} granted`,color:"primary",variant:"flat"})]}),"                                                        ",s("div",{className:"max-h-96 overflow-y-auto space-y-3",children:Object.entries(Ee).map(([r,t])=>{const l=t.permissions,m=l.filter(g=>G(d.id,g.name)).length,c=l.length,w=m===c,p=m>0,P=c>0?Math.round(m/c*100):0;return n(Sr,{sx:{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(168, 85, 247, 0.15))":"rgba(255, 255, 255, 0.05)",border:p?"1px solid rgba(102, 126, 234, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px !important","&:before":{display:"none"},"&.Mui-expanded":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(168, 85, 247, 0.25))":"rgba(255, 255, 255, 0.08)",borderColor:p?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.2)"},"&:hover":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(168, 85, 247, 0.2))":"rgba(255, 255, 255, 0.08)"}},children:[s(Er,{expandIcon:s(Ye,{className:"w-5 h-5 text-gray-400"}),sx:{borderRadius:"16px","&.Mui-expanded":{borderRadius:"16px 16px 0 0"},minHeight:"64px","& .MuiAccordionSummary-content":{margin:"12px 0",alignItems:"center"}},children:n("div",{className:"flex items-center justify-between w-full mr-4",children:[n("div",{className:"flex items-center gap-3",children:[n("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ${w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":p?"bg-gradient-to-r from-orange-500 to-amber-500 text-white":"bg-gray-500/20 text-gray-400"}`,children:[P,"%"]}),"                                                                        ",n("div",{children:[s(C,{variant:"subtitle1",className:"font-semibold text-white",children:t.name}),s(C,{variant:"caption",color:"textSecondary",className:"block",children:t.description}),s("div",{className:"flex items-center gap-2 mt-1",children:n(C,{variant:"caption",color:"textSecondary",children:[m," of ",c," permissions granted"]})})]})]}),n("div",{className:"flex items-center gap-2",children:[n("div",{className:"text-right mr-2",children:[s(C,{variant:"caption",color:"textSecondary",className:"block",children:"Module Toggle"}),s("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w?"bg-green-500/20 text-green-400 border border-green-500/30":p?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:w?"Full Access":p?"Partial":"No Access"})]}),"                                                                                    ",s(ir,{checked:w,onChange:g=>{g.stopPropagation(),Ve(r)},disabled:A||(d==null?void 0:d.name)==="Super Administrator"&&!x,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#10b981","&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#10b981"},"& .MuiSwitch-track":{backgroundColor:p?"#f59e0b":"#6b7280"}}})]})]})}),"                                                                        ",s(_r,{sx:{pt:0,pb:3,px:3},children:s("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:l.map(g=>{const X=G(d.id,g.name),se=A||(d==null?void 0:d.name)==="Super Administrator"&&!x;return s("div",{className:`p-3 border rounded-xl transition-all duration-200 ${se?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-white/5"} ${X?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),se||we(g.name)},children:s(lr,{control:s(hr,{checked:X,onChange:Y=>{Y.preventDefault(),Y.stopPropagation(),se||we(g.name)},disabled:se,sx:{color:X?"#10b981":"rgba(255, 255, 255, 0.5)","&.Mui-checked":{color:"#10b981"},"&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}}}),label:n("div",{children:[s(C,{variant:"body2",className:`font-medium ${X?"text-green-400":"text-white"}`,children:g.display_name||g.name}),s(C,{variant:"caption",className:`${X?"text-green-300/70":"text-gray-400"}`,children:g.name})]}),className:"m-0 w-full pointer-events-none"})},g.id)})})})]},r)})})]}):n("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[s(ce,{className:"w-16 h-16 text-gray-400 mb-4"}),s(C,{variant:"h6",color:"textSecondary",children:"Select a role to manage permissions"}),s(C,{variant:"body2",color:"textSecondary",children:"Choose a role from the left panel to view and edit its permissions                                                        "}),"                                                    "]})})})]})})]})]})})})})]})};Tr.layout=e=>s(cr,{children:e});export{Tr as default};
