import{J as ve,r as n,a as K,j as e,b as a,c as _e,F as Z,h as Ce,d as Se,R as Ve,o as Qe}from"./app-BJivnDWt.js";import{u as Xe,a as ke,d as o,B as r,E as Me,F as V,b as h,e as C,G as qe,H as ee,i as te,J as ae,c as Ze,K as Pe,L as et,M as tt}from"./App-DB6XQ5nR.js";import{d as S}from"./dayjs.min-K3I8Wf0l.js";import"./jspdf.es.min-CXKIyyXw.js";import"./jspdf.plugin.autotable-CtA5BUKo.js";import{P as at}from"./PageHeader-BwdAKJjU.js";import{F as E}from"./ExclamationTriangleIcon-Dr4aBRNm.js";import{F as re}from"./UserIcon-CBLvAwYQ.js";import{C as rt}from"./CardHeader-RhEzxvLF.js";import{F as Te}from"./DocumentArrowDownIcon-DpOG2AxB.js";import{F as R}from"./CheckCircleIcon-B9EKSB8_.js";import{C as Fe}from"./CardContent-Bdn1-Dn3.js";import{B as st}from"./Button-BIz7R3KR.js";import{F as nt}from"./XCircleIcon-KuzrRNHX.js";import{s as Le}from"./chunk-TLYTI3QM-XYKYpGTP.js";import{t as $e,a as Ee,b as Re,c as Ye,d as Ae,e as x}from"./chunk-F3UDT23P-D6tUvYww.js";import{p as Ie}from"./chunk-O5I3QTYU-BZXFI1S0.js";import{u as lt}from"./chunk-R6AK6OQ4-BBLslPyF.js";import"./app-Dax45E_a.js";import"./useHasTabbableChild-CJp6mSTG.js";import"./chunk-7F3ZLNJ6-BrNy7kMd.js";import"./index-CokAva9Y.js";const Et=({handleDateChange:N,selectedDate:m,updateTimeSheet:Q,externalFilterData:g,externalEmployee:k})=>{var be,we,Ne;const{auth:u}=ve().props,{url:P}=ve();Xe();const c=ke("(min-width: 1025px)"),M=ke("(min-width: 641px) and (max-width: 1024px)"),[T,z]=n.useState([]),[i,d]=n.useState([]),[f,y]=n.useState([]),[F,W]=n.useState(""),[v,B]=n.useState(0),[Y,H]=n.useState(0),[L,ct]=n.useState(10),[$,se]=n.useState(1),[A,ne]=n.useState(k||""),[O,I]=n.useState(!1),[Ue,je]=n.useState(0),[it,le]=n.useState(null),[oe,dt]=n.useState(!0),[X,ce]=n.useState(new Date),ie=n.useRef(null),de=n.useRef(g||{currentMonth:S().format("YYYY-MM")}),[b,me]=n.useState(g||{currentMonth:S().format("YYYY-MM")}),U=n.useCallback(async()=>{try{return I(!1),await ue(m,$,L,A,b,!0),ce(new Date),!0}catch(t){return console.error("Error refreshing timesheet:",t),!1}finally{I(!0)}},[m,$,L,A,b]),q=n.useCallback(async()=>{if(console.log("Checking for timesheet updates..."),!!m)try{const t=route("check-timesheet-updates",{date:S(m).format("YYYY-MM-DD"),month:b.currentMonth}),l=await fetch(t);if(!l.ok)throw new Error(`HTTP ${l.status}: Failed to check for updates`);const s=await l.json();s.success&&s.last_updated!==ie.current&&s.last_updated&&(ie.current=s.last_updated,U(),le(new Date)),ce(new Date)}catch(t){console.error("Error checking for timesheet updates:",t)}},[m,b.currentMonth]);n.useEffect(()=>{if(!oe)return;q();const t=setInterval(q,5e3);return()=>clearInterval(t)},[oe,q]);const he=n.useMemo(()=>X?X.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):null,[X]);n.useEffect(()=>{JSON.stringify(b)!==JSON.stringify(de.current)&&(de.current={...b},U())},[b,U]),n.useCallback(()=>{je(t=>t+1),U()},[U]);const ue=async(t,l,s,_,p,G=!1)=>{var J,D;const ye=P!=="/attendance-employee"?route("admin.getPresentUsersForDate"):route("getCurrentUserAttendanceForDate");try{I(!1);const w=await K.get(ye,{params:{page:l,perPage:s,employee:_,date:t,currentYear:p!=null&&p.currentMonth?S(p.currentMonth).year():"",currentMonth:p!=null&&p.currentMonth?S(p.currentMonth).format("MM"):"",_t:G?Date.now():void 0}});w.status===200&&(z(w.data.attendances||[]),B(w.data.total||0),H(w.data.last_page||1),se(w.data.current_page||1),le(new Date),W(""),I(!0))}catch(w){W(((D=(J=w.response)==null?void 0:J.data)==null?void 0:D.message)||"An error occurred while retrieving present users data."),I(!0)}},De=async(t,l)=>{if(P==="/attendance-employee"){y([]),d([]);return}try{const s=await K.get(route("admin.getAbsentUsersForDate"),{params:{date:t}});s.status===200&&(y(s.data.absent_users||[]),d(s.data.leaves||[]))}catch(s){console.error("Error fetching absent users:",s),y([]),d([])}},ze=t=>{ne(t.target.value.toLowerCase())},pe=t=>{se(t)};n.useCallback((t,l)=>{me(s=>({...s,[t]:l}))},[]);const We=t=>i.find(l=>String(l.user_id)===String(t)),fe=(t,l)=>{if(!t)return null;try{let s;if(typeof t=="string")if(t.match(/^\d{2}:\d{2}:\d{2}$/)){const _=`${l}T${t}`;s=new Date(_)}else if(t.includes("T")||t.includes(" "))s=new Date(t);else if(t.match(/^\d{2}:\d{2}$/)){const _=`${l}T${t}:00`;s=new Date(_)}else s=new Date(`${l}T${t}`);else s=new Date(t);return isNaN(s.getTime())?(console.warn("Invalid time data:",t),"Invalid time"):s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(s){return console.warn("Error formatting time:",{timeString:t,date:l,error:s}),"Invalid time"}},j=((be=u.permissions)==null?void 0:be.includes("attendance.view"))||!1,Be=((we=u.permissions)==null?void 0:we.includes("attendance.manage"))||!1,He=((Ne=u.permissions)==null?void 0:Ne.includes("attendance.export"))||Be||!1;n.useMemo(()=>f,[f]);const xe=[{name:"Date",uid:"date",icon:V},...j&&P!=="/attendance-employee"?[{name:"Employee",uid:"employee",icon:re}]:[],{name:"Clock In",uid:"clockin_time",icon:h},{name:"Clock Out",uid:"clockout_time",icon:h},{name:"Work Hours",uid:"production_time",icon:h},{name:"Punches",uid:"punch_details",icon:h}],ge=(t,l)=>{var _,p,G;const s=new Date(t.date).toDateString()===new Date().toDateString();switch(l){case"date":return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(V,{className:"w-4 h-4 text-primary"}),e(r,{className:"flex flex-col",children:e("span",{children:new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"})})})]})});case"employee":return e(x,{className:"whitespace-nowrap text-xs sm:text-sm md:text-base",children:e(lt,{avatarProps:{radius:"lg",size:c||M?"md":"sm",src:(_=t.user)==null?void 0:_.profile_image,fallback:e(re,{className:"w-6 h-6"})},description:(p=t.user)==null?void 0:p.phone,name:(G=t.user)==null?void 0:G.name})});case"clockin_time":return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(h,{className:"w-4 h-4 text-success"}),a(r,{className:"flex flex-col",children:[e("span",{children:t.punchin_time?fe(t.punchin_time,t.date)||"Invalid time":"Not clocked in"}),t.punchin_time&&e("span",{className:"text-xs text-default-500",children:"First punch"})]})]})});case"clockout_time":return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(h,{className:"w-4 h-4 text-danger"}),a(r,{className:"flex flex-col",children:[e("span",{children:t.punchout_time?fe(t.punchout_time,t.date)||"Invalid time":t.punchin_time?s?"Still working":"Not Punched Out":"Not started"}),t.punchout_time&&e("span",{className:"text-xs text-default-500",children:"Last punch"})]})]})});case"production_time":const J=t.total_work_minutes>0,D=t.has_incomplete_punch,w=t.punchin_time&&!t.punchout_time&&s;if(J){const Je=Math.floor(t.total_work_minutes/60),Ke=Math.floor(t.total_work_minutes%60);return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(h,{className:`w-4 h-4 ${D?"text-warning":"text-primary"}`}),a(r,{className:"flex flex-col",children:[e("span",{className:"font-medium",children:`${Je}h ${Ke}m`}),e("span",{className:"text-xs text-default-500",children:D?"Partial + In Progress":"Total worked"})]})]})})}else{if(w)return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(h,{className:"w-4 h-4 text-warning"}),a(r,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"In Progress"}),e("span",{className:"text-xs text-default-500",children:"Currently working"})]})]})});if(t.punchin_time&&!t.punchout_time&&!s)return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(E,{className:"w-4 h-4 text-danger"}),a(r,{className:"flex flex-col",children:[e("span",{className:"text-danger",children:"Incomplete punch"}),e("span",{className:"text-xs text-default-500",children:"Missing punch out"})]})]})})}return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(E,{className:"w-4 h-4 text-warning"}),a(r,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"No work time"}),e("span",{className:"text-xs text-default-500",children:"No attendance"})]})]})});case"punch_details":return e(x,{className:"text-xs sm:text-sm md:text-base",children:a(r,{className:"flex items-center gap-2",children:[e(h,{className:"w-4 h-4 text-default-400"}),a(r,{className:"flex flex-col",children:[a("span",{className:"text-xs font-medium",children:[t.punch_count||0," punch",(t.punch_count||0)!==1?"es":""]}),t.complete_punches!==t.punch_count&&a("span",{className:"text-xs text-warning",children:[t.complete_punches," complete"]}),t.complete_punches===t.punch_count&&t.punch_count>0&&e("span",{className:"text-xs text-success",children:"All complete"})]})]})});default:return e(x,{className:"text-xs sm:text-sm md:text-base",children:"N/A"})}},Oe=n.useCallback(async()=>{try{const t=await K.get(route("attendance.exportExcel"),{params:{date:m},responseType:"blob"}),l=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=l,s.setAttribute("download",`Daily_Timesheet_${S(m).format("YYYY_MM_DD")}.xlsx`),document.body.appendChild(s),s.click(),s.remove()}catch(t){console.error("Error downloading Excel:",t),alert("Failed to download attendance excel.")}},[m]),Ge=n.useCallback(async()=>{try{const t=await K.get(route("attendance.exportPdf"),{params:{date:m},responseType:"blob"}),l=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=l,s.setAttribute("download",`Daily_Timesheet_${S(m).format("YYYY_MM_DD")}.pdf`),document.body.appendChild(s),s.click(),s.remove()}catch(t){console.error("Error downloading PDF:",t),alert("Failed to download attendance pdf.")}},[m]);return n.useEffect(()=>{ue(m,$,L,A,b),De(m)},[m,$,L,A,b,Q,Ue]),n.useEffect(()=>{g&&me(g)},[g]),n.useEffect(()=>{k!==void 0&&ne(k)},[k]),P==="/attendance-employee"?e(r,{role:"region","aria-label":"Attendance data table",className:"w-full",children:F?e(_e,{className:"p-4 bg-danger-50 border-danger-200",children:a(r,{className:"flex items-center gap-3",children:[e(E,{className:"w-5 h-5 text-danger"}),e(o,{color:"error",variant:"body1",children:F})]})}):a(Z,{children:[e(Me,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Le,{className:"rounded-lg",isLoaded:O,children:a($e,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-scroll",table:"min-h-[200px]"},children:[e(Ee,{columns:xe,children:t=>e(Re,{align:"start",children:a(r,{className:"flex items-center gap-2",children:[t.icon&&e(t.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:t.name})]})},t.uid)}),e(Ye,{items:T,emptyContent:a(r,{className:"flex flex-col items-center justify-center py-8",children:[e(h,{className:"w-12 h-12 text-default-300 mb-4"}),e(o,{variant:"body1",color:"textSecondary",children:"No attendance records found"})]}),children:t=>e(Ae,{children:l=>ge(t,l)},t.id||t.user_id)})]})})}),v>L&&e(r,{className:"py-4 flex justify-center",children:e(Ie,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:$,total:Y,onChange:pe,"aria-label":"Timesheet pagination"})})]})}):e(r,{sx:{display:"flex",justifyContent:"center",p:2},component:"main",role:"main","aria-label":"Timesheet Management",children:e(C,{container:!0,spacing:2,children:e(C,{item:!0,xs:12,children:e(qe,{in:!0,timeout:500,children:a(Ze,{children:[e(rt,{className:"bg-gradient-to-br from-slate-50/50 to-white/30 backdrop-blur-sm border-b border-white/20",title:e("div",{className:`${c?"p-6":M?"p-4":"p-3"}`,children:a("div",{className:"flex flex-col space-y-4",children:[a("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a("div",{className:"flex items-center gap-3 lg:gap-4",children:[e("div",{className:`
                                                        ${c?"p-3":M?"p-2.5":"p-2"} 
                                                        rounded-xl bg-gradient-to-br from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] border border-[rgba(var(--theme-primary-rgb),0.3)] backdrop-blur-sm
                                                    `,children:e(h,{className:`
                                                                ${c?"w-8 h-8":M?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),a("div",{className:"min-w-0 flex-1",children:[e(o,{variant:c?"h4":M?"h5":"h6",className:`
                                                                font-bold bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] bg-clip-text text-transparent
                                                                ${c?"":"truncate"}
                                                            `,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"Daily Timesheet"}),e(o,{variant:c?"body2":"caption",color:"textSecondary",className:c?"":"truncate",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:new Date(m).toLocaleString("en-US",{month:c?"long":"short",day:"numeric",year:c?"numeric":void 0})})]})]}),"                                                ",a("div",{className:"flex items-center gap-4",children:[he&&a(o,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem",display:{xs:"block",sm:"block"}},children:["Updated: ",he]}),e("div",{className:"flex items-center gap-2",children:He&&a(Z,{children:[e(Ce,{color:"success",variant:"flat",size:c?"md":"sm",startContent:e(Te,{className:`
                                                                            ${c?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-success-rgb),0.1)] to-[rgba(var(--theme-success-rgb),0.2)] hover:from-[rgba(var(--theme-success-rgb),0.2)] hover:to-[rgba(var(--theme-success-rgb),0.3)] border border-[rgba(var(--theme-success-rgb),0.2)] backdrop-blur-sm",onPress:Oe,isDisabled:!O||T.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:c?"Excel":"XLS"}),e(Ce,{color:"danger",variant:"flat",size:c?"md":"sm",startContent:e(Te,{className:`
                                                                            ${c?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-danger-rgb),0.1)] to-[rgba(var(--theme-danger-rgb),0.2)] hover:from-[rgba(var(--theme-danger-rgb),0.2)] hover:to-[rgba(var(--theme-danger-rgb),0.3)] border border-[rgba(var(--theme-danger-rgb),0.2)] backdrop-blur-sm",onPress:Ge,isDisabled:!O||T.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"PDF"})]})})]})]}),c&&a("div",{className:"flex items-center gap-6 pt-2 border-t border-white/10",children:[a("div",{className:"flex items-center gap-2",children:[e(R,{className:"w-4 h-4 text-success"}),a(o,{variant:"caption",color:"textSecondary",children:["Present: ",v]})]}),j&&a("div",{className:"flex items-center gap-2",children:[e(E,{className:"w-4 h-4 text-warning"}),a(o,{variant:"caption",color:"textSecondary",children:["Absent: ",f.length]})]}),a("div",{className:"flex items-center gap-2",children:[e(ee,{className:"w-4 h-4 text-primary"}),a(o,{variant:"caption",color:"textSecondary",children:["Total: ",v+f.length]})]})]})]})}),sx:{padding:0,"& .MuiCardHeader-content":{width:"100%",overflow:"hidden"}}}),e(Se,{}),e(Fe,{children:e(r,{component:"section",role:"search","aria-label":"Timesheet filters",children:e(C,{container:!0,spacing:3,children:j&&a(Z,{children:[e(C,{item:!0,xs:12,sm:6,md:4,children:e(te,{type:"text",label:"Search Employee",placeholder:"Enter employee name",value:A,onChange:ze,startContent:e(ae,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})}),e(C,{item:!0,xs:12,sm:6,md:4,children:e(te,{label:"Select Date",type:"date",variant:"bordered",onChange:N,value:new Date(m).toISOString().slice(0,10)||"",startContent:e(V,{className:"w-4 h-4 text-default-400"}),"aria-label":"Select date for timesheet",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})})]})})})}),e(Se,{}),e(Fe,{children:a(C,{container:!0,spacing:3,children:[e(C,{item:!0,xs:12,md:j?9:12,children:F?e(_e,{className:"p-4 bg-danger-50 border-danger-200",children:a(r,{className:"flex items-center gap-3",children:[e(E,{className:"w-5 h-5 text-danger"}),e(o,{color:"error",variant:"body1",children:F})]})}):a(r,{role:"region","aria-label":"Present employees attendance table",className:"border-r border-gray-200 pr-4",sx:{borderRightColor:"rgba(0, 0, 0, 0.1)"},children:[e(r,{className:"mb-4",children:a(o,{variant:"h6",className:"font-semibold text-blue-600 flex items-center gap-2",children:[e(R,{className:"w-5 h-5"}),"Present Employees (",v,")"]})}),e(Me,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Le,{className:"rounded-lg",isLoaded:O,children:a($e,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-scroll",table:"min-h-[200px]"},children:[e(Ee,{columns:xe,children:t=>e(Re,{align:"start",children:a(r,{className:"flex items-center gap-2",children:[t.icon&&e(t.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:t.name})]})},t.uid)}),e(Ye,{items:T,emptyContent:a(r,{className:"flex flex-col items-center justify-center py-8",children:[e(h,{className:"w-12 h-12 text-default-300 mb-4"}),e(o,{variant:"body1",color:"textSecondary",children:"No attendance records found"})]}),children:t=>e(Ae,{children:l=>ge(t,l)},t.id||t.user_id)})]})})}),v>L&&e(r,{className:"py-4 flex justify-center",children:e(Ie,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:$,total:Y,onChange:pe,"aria-label":"Timesheet pagination"})})]})}),j&&e(C,{item:!0,xs:12,md:3,children:e(ot,{absentUsers:f,selectedDate:m,getUserLeave:We})})]})})]})})})})})},ot=Ve.memo(({absentUsers:N,selectedDate:m,getUserLeave:Q})=>{const[g,k]=n.useState(5),[u,P]=n.useState(""),c=n.useMemo(()=>{if(!u.trim())return N;const i=u.toLowerCase();return N.filter(d=>{var v,B,Y,H;const f=((v=d.name)==null?void 0:v.toLowerCase())||"",y=((B=d.employee_id)==null?void 0:B.toString().toLowerCase())||"",F=((Y=d.email)==null?void 0:Y.toLowerCase())||"",W=((H=d.phone)==null?void 0:H.toString().toLowerCase())||"";return f.includes(i)||y.includes(i)||F.includes(i)||W.includes(i)})},[N,u]),M=()=>{k(i=>i+5)},T=i=>{P(i.target.value),k(5)},z=i=>{switch(i==null?void 0:i.toLowerCase()){case"approved":return e(R,{className:"w-4 h-4 text-success"});case"rejected":return e(nt,{className:"w-4 h-4 text-danger"});default:return e(h,{className:"w-4 h-4 text-warning"})}};return N.length===0?a(r,{className:"h-full",children:[e(at,{title:"Perfect Attendance!",subtitle:`No employees are absent on ${S(m).format("MMMM D, YYYY")}`,icon:e(R,{className:"w-6 h-6"}),variant:"gradient",actionButtons:[{label:"0",variant:"flat",color:"success",icon:e(R,{className:"w-4 h-4"}),className:"bg-green-500/10 text-green-500 border-green-500/20"}]}),a(r,{role:"region","aria-label":"No absent employees today",className:"text-center py-12 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg h-96 flex flex-col items-center justify-center",children:[e(R,{className:"w-12 h-12 text-success mx-auto mb-4"}),e(o,{variant:"body2",color:"success",className:"mb-2 text-sm font-medium",children:"Perfect Attendance!"}),e(o,{variant:"caption",color:"textSecondary",className:"text-xs",children:"No employees are absent today."}),e(o,{variant:"caption",color:"textSecondary",className:"mt-1 block text-xs",children:"All employees are either present or on approved leave."})]})]}):a(r,{className:"h-full",children:[a(r,{className:"mb-4 flex items-center justify-between",children:[a(o,{variant:"h6",className:"font-semibold text-orange-600 flex items-center gap-2 text-sm",children:[e(ee,{className:"w-4 h-4"}),"Absent Today"]}),e(et,{label:N.length,variant:"outlined",color:"warning",size:"small",className:"font-semibold",avatar:e(Pe,{sx:{width:18,height:18,bgcolor:"warning.main",color:"warning.contrastText",fontSize:"0.75rem",marginRight:"-4px"},children:e(ee,{style:{width:12,height:12}})})})]}),e(r,{className:"mb-3 m-2",children:e(te,{type:"text",placeholder:"Search absent employees...",value:u,onChange:T,startContent:e(ae,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search absent employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 h-10",input:"text-sm"}})}),u&&e(r,{className:"mb-2 ",children:a(o,{variant:"caption",color:"textSecondary",className:"text-xs",children:[c.length," of ",N.length," employees found"]})}),u&&c.length===0&&a(r,{className:"text-center py-8 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg",children:[e(ae,{className:"w-8 h-8 text-default-300 mx-auto mb-2"}),a(o,{variant:"body2",color:"textSecondary",className:"text-sm",children:['No employees found matching "',u,'"']})]}),a(r,{role:"region","aria-label":"Absent employees list",className:"overflow-y-auto max-h-[520px]",children:[c.slice(0,g).map(i=>{var f,y;const d=Q(i.id);return e(tt,{in:!0,timeout:"auto",children:e("div",{className:"p-3 m-2 bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/15 transition-all duration-200 rounded-lg",children:a(r,{className:"flex items-start justify-between",children:[a(r,{className:"flex items-center gap-2 flex-1",children:[e(Pe,{src:i.profile_image,alt:i.name,size:"sm",fallback:e(re,{className:"w-4 h-4"})}),a(r,{className:"flex-1 min-w-0",children:["                                            ",e(o,{variant:"body2",fontWeight:"medium",className:"truncate text-sm",children:i.name}),i.employee_id&&a(o,{variant:"caption",color:"textSecondary",className:"block text-xs",children:["ID: ",i.employee_id]}),d?a(r,{className:"flex flex-col gap-1 mt-1",children:[a(o,{variant:"caption",color:"textSecondary",className:"flex items-center gap-1 text-xs",children:[e(V,{className:"w-3 h-3"}),d.from_date===d.to_date?d.from_date:`${d.from_date} - ${d.to_date}`]}),a(o,{variant:"caption",color:"primary",className:"flex items-center gap-1 text-xs",children:[z(d.status),d.leave_type," Leave"]})]}):a(o,{variant:"caption",color:"error",className:"flex items-center gap-1 mt-1 text-xs",children:[e(E,{className:"w-3 h-3"}),"Absent without leave"]})]})]}),d&&e("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 rounded-md px-1.5 py-0.5 ml-2",children:a("div",{className:"flex items-center gap-1",children:[z(d.status),e(o,{variant:"caption",className:`font-semibold text-xs ${((f=d.status)==null?void 0:f.toLowerCase())==="approved"?"text-green-600":((y=d.status)==null?void 0:y.toLowerCase())==="rejected"?"text-red-600":"text-orange-600"}`,children:d.status})]})})]})})},i.id)}),g<c.length&&e(r,{className:"text-center mt-4 pb-4",children:a(st,{variant:"outlined",onClick:M,startIcon:e(Qe,{className:"w-4 h-4"}),size:"small",color:"warning",fullWidth:!0,children:["Show More (",c.length-g," remaining)"]})})]})]})});export{Et as default};
