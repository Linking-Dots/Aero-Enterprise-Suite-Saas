const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D1ZXQ61J.js","assets/features-animation-C7--EtKp.js","assets/app-CiEVawP3.js","assets/app-ih7M3oVU.js","assets/app-CEUmGe7w.css"])))=>i.map(i=>d[i]);
import{a8 as Qe,r as c,v as Xe,B as Ye,c as x,R as he,l as re,D as te,A as Z,a9 as Ze,u as le,n as ne,aa as ce,a4 as et,a0 as ye,_ as tt,Y as Ne,Z as at,w as nt,y as rt,ab as ot,C as it,z as lt,a1 as st,b as s,j as t,i as Q,F as Oe,t as dt,s as oe,Q as ct,f as mt,e as pt}from"./app-CiEVawP3.js";import{_ as ht,o as ut,aO as ft,aP as gt,aQ as bt,aR as Se,aw as xt,aS as wt,aT as vt,aU as yt,as as Nt,aV as St,aW as Ct,u as Le,k as X,i as ie,Y as _t,Z as $t,$ as Ce,X as At,m as kt,b as Me,aX as ue,aY as fe,ak as ge,P as ae,a as _e,h as me,G as Pt,c as Et,J as Ft,al as Dt,am as zt,d as pe,B as Rt,A as jt}from"./App-CewhXpPY.js";import{P as It}from"./PageHeader-D-ssfyVi.js";import{S as Ot}from"./StatsCards-CzQHxz-w.js";import{F as Lt}from"./CogIcon-BO2p0YkH.js";import{a as Mt,F as be}from"./PencilIcon-DZUdw5nb.js";import{F as $e}from"./TrashIcon-DcZHlLIq.js";import{t as Ae}from"./chunk-7ZZXWEXF-B3Xaf-7d.js";import{F as xe,b as Bt,a as Ht,c as Wt}from"./UserPlusIcon-CIRG5cAS.js";import{F as Be}from"./UserIcon-CNkkbYkl.js";import{t as Tt,a as Vt,b as Kt,c as Jt,d as qt,e as Gt}from"./chunk-F3UDT23P-C2xsynIC.js";import{s as ee,l as U}from"./chunk-2GIFKCNQ-Bmg2tnZx.js";import{u as He}from"./chunk-R6AK6OQ4-Bagsb6sI.js";import{F as Ut}from"./FunnelIcon-CeDTqUdD.js";import{F as Qt}from"./TableCellsIcon-DCdI8_Oc.js";import"./app-ih7M3oVU.js";import"./chunk-D5XJWRAV-5oe-TFrV.js";import"./useHasTabbableChild-CqjckYwx.js";import"./chunk-7F3ZLNJ6-Cm1c4Hz5.js";let K=typeof document<"u"&&window.visualViewport;function Xt(){let l=Qe(),[o,r]=c.useState(()=>l?{width:0,height:0}:ke());return c.useEffect(()=>{let n=()=>{r(i=>{let p=ke();return p.width===i.width&&p.height===i.height?i:p})};return K?K.addEventListener("resize",n):window.addEventListener("resize",n),()=>{K?K.removeEventListener("resize",n):window.removeEventListener("resize",n)}},[]),o}function ke(){return{width:K&&(K==null?void 0:K.width)||window.innerWidth,height:K&&(K==null?void 0:K.height)||window.innerHeight}}var Pe=Xe({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...Ye]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),Yt=l=>{const{isSelected:o,isIndeterminate:r,disableAnimation:n,...i}=l;return x.jsx("svg",{"aria-hidden":"true",className:"fill-current",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...i,children:x.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},Zt=c.useLayoutEffect,ea=function(o){var r=he.useRef(o);return Zt(function(){r.current=o}),r},Ee=function(o,r){if(typeof o=="function"){o(r);return}o.current=r},ta=function(o,r){var n=he.useRef();return he.useCallback(function(i){o.current=i,n.current&&Ee(n.current,null),n.current=r,r&&Ee(r,i)},[r])},Fe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},aa=function(o){Object.keys(Fe).forEach(function(r){o.style.setProperty(r,Fe[r],"important")})},De=aa,B=null,ze=function(o,r){var n=o.scrollHeight;return r.sizingStyle.boxSizing==="border-box"?n+r.borderSize:n-r.paddingSize};function na(l,o,r,n){r===void 0&&(r=1),n===void 0&&(n=1/0),B||(B=document.createElement("textarea"),B.setAttribute("tabindex","-1"),B.setAttribute("aria-hidden","true"),De(B)),B.parentNode===null&&document.body.appendChild(B);var i=l.paddingSize,p=l.borderSize,h=l.sizingStyle,N=h.boxSizing;Object.keys(h).forEach(function(w){var b=w;B.style[b]=h[b]}),De(B),B.value=o;var g=ze(B,l);B.value=o,g=ze(B,l),B.value="x";var _=B.scrollHeight-i,f=_*r;N==="border-box"&&(f=f+i+p),g=Math.max(f,g);var $=_*n;return N==="border-box"&&($=$+i+p),g=Math.min($,g),[g,_]}var Re=function(){},ra=function(o,r){return o.reduce(function(n,i){return n[i]=r[i],n},{})},oa=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],ia=!!document.documentElement.currentStyle,la=function(o){var r=window.getComputedStyle(o);if(r===null)return null;var n=ra(oa,r),i=n.boxSizing;if(i==="")return null;ia&&i==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var p=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),h=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:p,borderSize:h}},sa=la;function we(l,o,r){var n=ea(r);c.useLayoutEffect(function(){var i=function(h){return n.current(h)};if(l)return l.addEventListener(o,i),function(){return l.removeEventListener(o,i)}},[])}var da=function(o,r){we(document.body,"reset",function(n){o.current.form===n.target&&r(n)})},ca=function(o){we(window,"resize",o)},ma=function(o){we(document.fonts,"loadingdone",o)},pa=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],ha=function(o,r){var n=o.cacheMeasurements,i=o.maxRows,p=o.minRows,h=o.onChange,N=h===void 0?Re:h,g=o.onHeightChange,_=g===void 0?Re:g,f=ht(o,pa),$=f.value!==void 0,w=c.useRef(null),b=ta(w,r),z=c.useRef(0),v=c.useRef(),y=function(){var P=w.current,I=n&&v.current?v.current:sa(P);if(I){v.current=I;var L=na(I,P.value||P.placeholder||"x",p,i),F=L[0],H=L[1];z.current!==F&&(z.current=F,P.style.setProperty("height",F+"px","important"),_(F,{rowHeight:H}))}},R=function(P){$||y(),N(P)};return c.useLayoutEffect(y),da(w,function(){if(!$){var S=w.current.value;requestAnimationFrame(function(){var P=w.current;P&&S!==P.value&&y()})}}),ca(y),ma(y),c.createElement("textarea",ut({},f,{onChange:R,ref:b}))},ua=c.forwardRef(ha),We=re(({style:l,minRows:o=3,maxRows:r=8,cacheMeasurements:n=!1,disableAutosize:i=!1,onHeightChange:p,...h},N)=>{const{Component:g,label:_,description:f,startContent:$,endContent:w,hasHelper:b,shouldLabelBeOutside:z,shouldLabelBeInside:v,isInvalid:y,errorMessage:R,getBaseProps:S,getLabelProps:P,getInputProps:I,getInnerWrapperProps:L,getInputWrapperProps:F,getHelperWrapperProps:H,getDescriptionProps:W,getErrorMessageProps:G,isClearable:V,getClearButtonProps:J}=ft({...h,ref:N,isMultiline:!0}),[e,u]=c.useState(o>1),[m,j]=c.useState(!1),A=_?x.jsx("label",{...P(),children:_}):null,D=I(),d=(C,E)=>{if(o===1&&u(C>=E.rowHeight*2),r>o){const q=C>=r*E.rowHeight;j(q)}p==null||p(C,E)},a=i?x.jsx("textarea",{...D,style:te(D.style,l??{})}):x.jsx(ua,{...D,cacheMeasurements:n,"data-hide-scroll":Z(!m),maxRows:r,minRows:o,style:te(D.style,l??{}),onHeightChange:d}),k=c.useMemo(()=>V?x.jsx("button",{...J(),children:x.jsx(gt,{})}):null,[V,J]),O=c.useMemo(()=>$||w?x.jsxs("div",{...L(),children:[$,a,w]}):x.jsx("div",{...L(),children:a}),[$,D,w,L]),T=y&&R,M=T||f;return x.jsxs(g,{...S(),children:[z?A:null,x.jsxs("div",{...F(),"data-has-multiple-rows":Z(e),children:[v?A:null,O,k]}),b&&M?x.jsx("div",{...H(),children:T?x.jsx("div",{...G(),children:R}):x.jsx("div",{...W(),children:f})}):null]})});We.displayName="HeroUI.Textarea";var je=We,[fa,se]=Ze({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Te=re((l,o)=>{const{as:r,children:n,className:i,...p}=l,{slots:h,classNames:N,bodyId:g,setBodyMounted:_}=se(),f=le(o),$=r||"div";return c.useEffect(()=>(_(!0),()=>_(!1)),[_]),x.jsx($,{ref:f,className:h.body({class:ne(N==null?void 0:N.body,i)}),id:g,...p,children:n})});Te.displayName="HeroUI.ModalBody";var ga=Te,ba={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:ce.ease},opacity:{duration:.4,ease:ce.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:ce.ease}}},Ie=()=>tt(()=>import("./index-D1ZXQ61J.js"),__vite__mapDeps([0,1,2,3,4])).then(l=>l.default),Ve=l=>{const{as:o,children:r,role:n="dialog",...i}=l,{Component:p,domRef:h,slots:N,classNames:g,motionProps:_,backdrop:f,closeButton:$,hideCloseButton:w,disableAnimation:b,getDialogProps:z,getBackdropProps:v,getCloseButtonProps:y,onClose:R}=se(),S=o||p||"div",P=Xt(),{dialogProps:I}=bt({role:n},h),L=c.isValidElement($)?c.cloneElement($,y()):x.jsx("button",{...y(),children:x.jsx(Yt,{})}),F=c.useCallback(e=>{e.key==="Tab"&&e.nativeEvent.isComposing&&(e.stopPropagation(),e.preventDefault())},[]),H=z(te(I,i)),W=x.jsxs(S,{...H,onKeyDown:et(H.onKeyDown,F),children:[x.jsx(Se,{onDismiss:R}),!w&&L,typeof r=="function"?r(R):r,x.jsx(Se,{onDismiss:R})]}),G=c.useMemo(()=>f==="transparent"?null:b?x.jsx("div",{...v()}):x.jsx(ye,{features:Ie,children:x.jsx(Ne.div,{animate:"enter",exit:"exit",initial:"exit",variants:at.fade,...v()})}),[f,b,v]),V={"--visual-viewport-height":P.height+"px"},J=b?x.jsx("div",{className:N.wrapper({class:g==null?void 0:g.wrapper}),"data-slot":"wrapper",style:V,children:W}):x.jsx(ye,{features:Ie,children:x.jsx(Ne.div,{animate:"enter",className:N.wrapper({class:g==null?void 0:g.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:ba,..._,style:V,children:W})});return x.jsxs("div",{tabIndex:-1,children:[G,J]})};Ve.displayName="HeroUI.ModalContent";var xa=Ve,Ke=re((l,o)=>{const{as:r,children:n,className:i,...p}=l,{slots:h,classNames:N}=se(),g=le(o),_=r||"footer";return x.jsx(_,{ref:g,className:h.footer({class:ne(N==null?void 0:N.footer,i)}),...p,children:n})});Ke.displayName="HeroUI.ModalFooter";var wa=Ke,Je=re((l,o)=>{const{as:r,children:n,className:i,...p}=l,{slots:h,classNames:N,headerId:g,setHeaderMounted:_}=se(),f=le(o),$=r||"header";return c.useEffect(()=>(_(!0),()=>_(!1)),[_]),x.jsx($,{ref:f,className:h.header({class:ne(N==null?void 0:N.header,i)}),id:g,...p,children:n})});Je.displayName="HeroUI.ModalHeader";var va=Je;function ya(l={shouldBlockScroll:!0},o,r){let{overlayProps:n,underlayProps:i}=xt({...l,isOpen:o.isOpen,onClose:o.close},r);return wt({isDisabled:!o.isOpen||!l.shouldBlockScroll}),vt(),c.useEffect(()=>{if(o.isOpen&&r.current)return yt([r.current])},[o.isOpen,r]),{modalProps:te(n),underlayProps:i}}function Na(l){var o,r,n;const i=nt(),[p,h]=rt(l,Pe.variantKeys),{ref:N,as:g,className:_,classNames:f,isOpen:$,defaultOpen:w,onOpenChange:b,motionProps:z,closeButton:v,isDismissable:y=!0,hideCloseButton:R=!1,shouldBlockScroll:S=!0,portalContainer:P,isKeyboardDismissDisabled:I=!1,onClose:L,...F}=p,H=g||"section",W=le(N),G=c.useRef(null),[V,J]=c.useState(!1),[e,u]=c.useState(!1),m=(r=(o=l.disableAnimation)!=null?o:i==null?void 0:i.disableAnimation)!=null?r:!1,j=c.useId(),A=c.useId(),D=c.useId(),d=Nt({isOpen:$,defaultOpen:w,onOpenChange:Y=>{b==null||b(Y),Y||L==null||L()}}),{modalProps:a,underlayProps:k}=ya({isDismissable:y,shouldBlockScroll:S,isKeyboardDismissDisabled:I},d,W),{buttonProps:O}=ot({onPress:d.close},G),{isFocusVisible:T,focusProps:M}=it(),C=ne(f==null?void 0:f.base,_),E=c.useMemo(()=>Pe({...h,disableAnimation:m}),[lt(h),m]),q=(Y={},Ue=null)=>{var ve;return{ref:St(Ue,W),...te(a,F,Y),className:E.base({class:ne(C,Y.className)}),id:j,"data-open":Z(d.isOpen),"data-dismissable":Z(y),"aria-modal":Z(!0),"data-placement":(ve=l==null?void 0:l.placement)!=null?ve:"right","aria-labelledby":V?A:void 0,"aria-describedby":e?D:void 0}},de=c.useCallback((Y={})=>({className:E.backdrop({class:f==null?void 0:f.backdrop}),onClick:()=>d.close(),...k,...Y}),[E,f,k]),Ge=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":Z(T),className:E.closeButton({class:f==null?void 0:f.closeButton}),...te(O,M)});return{Component:H,slots:E,domRef:W,headerId:A,bodyId:D,motionProps:z,classNames:f,isDismissable:y,closeButton:v,hideCloseButton:R,portalContainer:P,shouldBlockScroll:S,backdrop:(n=l.backdrop)!=null?n:"opaque",isOpen:d.isOpen,onClose:d.close,disableAnimation:m,setBodyMounted:u,setHeaderMounted:J,getDialogProps:q,getBackdropProps:de,getCloseButtonProps:Ge}}var qe=re((l,o)=>{const{children:r,...n}=l,i=Na({...n,ref:o}),p=x.jsx(Ct,{portalContainer:i.portalContainer,children:r});return x.jsx(fa,{value:i,children:i.disableAnimation&&i.isOpen?p:x.jsx(st,{children:i.isOpen?p:null})})});qe.displayName="HeroUI.Modal";var Sa=qe;const Ca=({allUsers:l,departments:o,designations:r,attendanceTypes:n,setUsers:i,isMobile:p,isTablet:h})=>{var W,G,V,J;const[N,g]=c.useState(l||[]),[_,f]=c.useState({}),[$,w]=c.useState(!1),[b,z]=c.useState(null),[v,y]=c.useState({});Le(),c.useEffect(()=>{g(l)},[l]);const R=(e,u,m)=>{f(j=>({...j,[`${e}-${u}`]:m}))},S=(e,u)=>_[`${e}-${u}`]||!1,P=async(e,u,m)=>{R(u,e,!0);const j=new Promise(async(A,D)=>{try{let d,a={};switch(e){case"department":d="user.updateDepartment",a={department:m};break;case"designation":d="user.updateDesignation",a={designation:m};break;case"attendance_type":d="user.updateAttendanceType",a={attendance_type_id:m};break;default:d="user.updateDepartment",a={[e]:m}}const k=await fetch(route(d,{id:u}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(a)}),O=await k.json();if(k.ok){const T=N.map(M=>{if(String(M.id)===String(u)){const C={...M};if(e==="department"&&M.department!==m&&(C.designation=null),e==="attendance_type"){C.attendance_type_id=m;const E=n==null?void 0:n.find(q=>q.id===m);E&&(C.attendance_type=E)}else C[e]=m;return C}return M});g(T),i&&i(M=>M.map(C=>{if(String(C.id)===String(u)){const E={...C};if(e==="department"&&C.department!==m&&(E.designation=null),e==="attendance_type"){E.attendance_type_id=m;const q=n==null?void 0:n.find(de=>de.id===m);q&&(E.attendance_type=q)}else E[e]=m;return E}return C})),A([O.messages||O.message||"Updated successfully"])}else D([O.messages||O.message||"Failed to update information."])}catch(d){console.error(`Error updating ${e}:`,d),D(["An unexpected error occurred."])}finally{R(u,e,!1)}});ae.promise(j,{pending:`Updating ${e.replace("_"," ")}...`,success:{render({data:A}){return Array.isArray(A)?A.join(", "):A}},error:{render({data:A}){return Array.isArray(A)?A.join(", "):A}}})},I=async e=>{R(e,"delete",!0);const u=new Promise(async(m,j)=>{try{const A=await fetch(route("profile.delete"),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({user_id:e})}),D=await A.json();if(A.ok){const d=N.filter(a=>a.id!==e);g(d),i&&i(d),m([D.message])}else j([D.message])}catch{j(["An error occurred while deleting user. Please try again."])}finally{R(e,"delete",!1)}});ae.promise(u,{pending:"Deleting user...",success:{render({data:m}){return m.join(", ")}},error:{render({data:m}){return Array.isArray(m)?m.join(", "):m}}})},L=async()=>{try{const e=await fetch(route("user.updateAttendanceType",{id:b.id}),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({attendance_type_id:b.attendance_type_id,attendance_config:v})}),u=await e.json();if(e.ok){const m=N.map(j=>j.id===b.id?{...j,attendance_config:v}:j);g(m),i&&i(m),w(!1),ae.success("Attendance configuration updated successfully!")}else ae.error("Failed to update attendance configuration.")}catch{ae.error("An error occurred while updating configuration.")}},F=(e,u,m)=>{const j=e[u];switch(u){case"sl":return t("div",{className:"flex items-center justify-center",children:t("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:t("span",{className:"text-sm font-semibold text-foreground",children:m+1})})});case"employee":return s("div",{children:[t(He,{avatarProps:{radius:"lg",src:e==null?void 0:e.profile_image,size:p?"sm":"md",fallback:t(Be,{className:"w-4 h-4"})},name:e==null?void 0:e.name,description:p?null:`ID: ${(e==null?void 0:e.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),p&&s("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10",children:[s("div",{className:"flex items-center gap-1",children:[t("span",{className:"font-medium",children:"ID:"}),(e==null?void 0:e.employee_id)||"N/A"]}),s("div",{className:"flex items-center gap-1",children:[t(ge,{className:"w-3 h-3"}),e==null?void 0:e.email]}),(e==null?void 0:e.phone)&&s("div",{className:"flex items-center gap-1",children:[t(xe,{className:"w-3 h-3"}),e==null?void 0:e.phone]})]})]});case"contact":return s("div",{className:"flex flex-col gap-2",children:[s("div",{className:"flex items-center gap-2 text-sm",children:[t(ge,{className:"w-4 h-4 text-default-400"}),t("span",{className:"text-foreground",children:e==null?void 0:e.email})]}),(e==null?void 0:e.phone)&&s("div",{className:"flex items-center gap-2 text-sm",children:[t(xe,{className:"w-4 h-4 text-default-400"}),t("span",{className:"text-foreground",children:e==null?void 0:e.phone})]})]});case"department":return t("div",{className:"flex flex-col gap-2 min-w-[150px]",children:t(ee,{size:"sm",label:"Department","aria-label":`Select department for ${e==null?void 0:e.name}`,placeholder:"Select department",selectedKeys:e.department?new Set([e.department.toString()]):new Set,onSelectionChange:d=>{const a=Array.from(d)[0];a&&P("department",e.id,parseInt(a))},isDisabled:S(e.id,"department"),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",value:"text-foreground",popoverContent:"bg-white/10 backdrop-blur-md border-white/20",label:"text-xs text-default-500"},startContent:S(e.id,"department")?t(oe,{size:"sm"}):t(fe,{className:"w-4 h-4"}),children:o==null?void 0:o.map(d=>t(U,{value:d.id.toString(),textValue:d.name,children:d.name},d.id.toString()))})});case"designation":const A=(r==null?void 0:r.filter(d=>d.department_id===e.department))||[];return t("div",{className:"flex flex-col gap-2 min-w-[150px]",children:t(ee,{size:"sm",label:"Designation","aria-label":`Select designation for ${e==null?void 0:e.name}`,placeholder:"Select designation",selectedKeys:e.designation?new Set([e.designation.toString()]):new Set,onSelectionChange:d=>{const a=Array.from(d)[0];a&&P("designation",e.id,parseInt(a))},isDisabled:!e.department||S(e.id,"designation"),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",value:"text-foreground",popoverContent:"bg-white/10 backdrop-blur-md border-white/20",label:"text-xs text-default-500"},startContent:S(e.id,"designation")?t(oe,{size:"sm"}):t(ue,{className:"w-4 h-4"}),children:A.map(d=>t(U,{value:d.id.toString(),textValue:d.title,children:d.title},d.id.toString()))})});case"attendance_type":const D=()=>{var d;return e.attendance_type_id?new Set([e.attendance_type_id.toString()]):(d=e.attendance_type)!=null&&d.id?new Set([e.attendance_type.id.toString()]):new Set};return t("div",{className:"flex flex-col gap-2 min-w-[150px]",children:t(ee,{size:"sm",label:"Attendance Type","aria-label":`Select attendance type for ${e==null?void 0:e.name}`,placeholder:"Select type",selectedKeys:D(),onSelectionChange:d=>{const a=Array.from(d)[0];a&&P("attendance_type",e.id,parseInt(a))},isDisabled:S(e.id,"attendance_type"),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",value:"text-foreground",popoverContent:"bg-white/10 backdrop-blur-md border-white/20",label:"text-xs text-default-500"},startContent:S(e.id,"attendance_type")?t(oe,{size:"sm"}):t(Me,{className:"w-4 h-4"}),renderValue:d=>{var O;if(!d||d.length===0)return t("span",{className:"text-default-400",children:"Select type"});const a=parseInt((O=Array.from(d)[0])==null?void 0:O.key),k=n==null?void 0:n.find(T=>T.id===a);return k?s("div",{className:"flex items-center gap-2",children:[k.icon&&t("span",{className:"text-sm",children:k.icon}),t("span",{children:k.name})]}):t("span",{className:"text-default-400",children:"Unknown type"})},children:n==null?void 0:n.map(d=>t(U,{value:d.id.toString(),textValue:d.name,children:s("div",{className:"flex items-center gap-2",children:[d.icon&&t("span",{children:d.icon}),t("span",{children:d.name})]})},d.id.toString()))})});case"joining_date":return s("div",{className:"flex items-center gap-2 text-sm",children:[t(kt,{className:"w-4 h-4 text-default-400"}),t("span",{className:"text-foreground",children:(e==null?void 0:e.date_of_joining)||"N/A"})]});case"actions":return p?s(At,{classNames:{content:"bg-white/10 backdrop-blur-md border-white/20"},children:[t(_t,{children:t(Q,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400","aria-label":`Actions for ${e==null?void 0:e.name}`,children:t(Mt,{className:"w-4 h-4"})})}),s($t,{"aria-label":"Employee actions",children:[t(Ce,{startContent:t(be,{className:"w-4 h-4"}),onPress:()=>window.location.href=route("profile",{user:e.id}),children:"Edit Employee"},"edit"),t(Ce,{className:"text-danger",color:"danger",startContent:t($e,{className:"w-4 h-4"}),onPress:()=>I(e.id),isDisabled:S(e.id,"delete"),children:"Delete Employee"},"delete")]})]}):s("div",{className:"relative flex items-center gap-2",children:[t(Ae,{content:"Edit Employee",placement:"top",children:t(Q,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",as:dt,href:route("profile",{user:e.id}),"aria-label":`Edit ${e==null?void 0:e.name}`,children:t(be,{className:"w-4 h-4"})})}),t(Ae,{content:"Delete Employee",color:"danger",placement:"top",children:t(Q,{isIconOnly:!0,size:"sm",variant:"light",className:"text-danger-400 hover:text-danger",onPress:()=>I(e.id),isDisabled:S(e.id,"delete"),"aria-label":`Delete ${e==null?void 0:e.name}`,children:S(e.id,"delete")?t(oe,{size:"sm",color:"danger"}):t($e,{className:"w-4 h-4"})})})]});default:return j||"N/A"}},H=c.useMemo(()=>p?[{name:"Sl",uid:"sl"},{name:"Employee",uid:"employee"},{name:"Department",uid:"department"},{name:"Actions",uid:"actions"}]:h?[{name:"Sl",uid:"sl"},{name:"Employee",uid:"employee"},{name:"Department",uid:"department"},{name:"Designation",uid:"designation"},{name:"Actions",uid:"actions"}]:[{name:"Sl",uid:"sl"},{name:"Employee",uid:"employee"},{name:"Contact",uid:"contact"},{name:"Department",uid:"department"},{name:"Designation",uid:"designation"},{name:"Attendance Type",uid:"attendance_type"},{name:"Join Date",uid:"joining_date"},{name:"Actions",uid:"actions"}],[p,h]);return s(Oe,{children:[t("div",{className:"w-full",children:s(Tt,{"aria-label":"Employees table with custom cells",classNames:{wrapper:"bg-transparent",th:"bg-white/10 backdrop-blur-md text-foreground font-semibold",td:"border-b border-white/10",tbody:"divide-y divide-white/10"},removeWrapper:!0,isHeaderSticky:!0,isCompact:p,className:"min-h-[400px]",children:[t(Vt,{columns:H,children:e=>t(Kt,{align:e.uid==="actions"||e.uid==="sl"?"center":"start",className:"bg-white/10 backdrop-blur-md",width:e.uid==="sl"?60:void 0,children:e.name},e.uid)}),t(Jt,{items:N,emptyContent:"No employees found",children:N.map((e,u)=>t(qt,{className:"hover:bg-white/5 transition-colors duration-200",children:H.map(m=>t(Gt,{className:"py-3",children:F(e,m.uid,u)},m.uid))},e.id))})]})}),t(Sa,{isOpen:$,onClose:()=>w(!1),size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"bg-white/10 backdrop-blur-md border border-white/20",header:"border-b border-white/20",body:"py-6",footer:"border-t border-white/20"},children:s(xa,{children:[s(va,{className:"flex flex-col gap-1",children:[s("div",{className:"flex items-center gap-2",children:[t(Lt,{className:"w-5 h-5"}),"Configure Attendance Settings"]}),s("p",{className:"text-sm text-default-500",children:["Employee: ",b==null?void 0:b.name,(b==null?void 0:b.attendance_type)&&t(X,{size:"sm",variant:"flat",className:"ml-2",children:b.attendance_type.name})]})]}),s(ga,{children:[((W=b==null?void 0:b.attendance_type)==null?void 0:W.slug)==="geo_polygon"&&s("div",{className:"space-y-4",children:[t("h4",{className:"text-lg font-semibold",children:"Polygon Configuration"}),t(je,{label:"Polygon Coordinates (JSON)",placeholder:"Enter polygon coordinates...",value:JSON.stringify(v.polygon||[],null,2),onValueChange:e=>{try{const u=JSON.parse(e);y({...v,polygon:u})}catch{}},description:"Enter polygon coordinates as JSON array: [{'lat': 23.123, 'lng': 90.456}, ...]",classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20"}})]}),((G=b==null?void 0:b.attendance_type)==null?void 0:G.slug)==="wifi_ip"&&s("div",{className:"space-y-4",children:[t("h4",{className:"text-lg font-semibold",children:"WiFi/IP Configuration"}),t(ie,{label:"Allowed IP Addresses",placeholder:"192.168.1.1, 10.0.0.1",value:(v.allowed_ips||[]).join(", "),onValueChange:e=>{const u=e.split(",").map(m=>m.trim()).filter(m=>m);y({...v,allowed_ips:u})},description:"Enter allowed IP addresses separated by commas",classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20"}}),t(ie,{label:"Allowed IP Ranges (CIDR)",placeholder:"192.168.1.0/24, 10.0.0.0/8",value:(v.allowed_ranges||[]).join(", "),onValueChange:e=>{const u=e.split(",").map(m=>m.trim()).filter(m=>m);y({...v,allowed_ranges:u})},description:"Enter IP ranges like: 192.168.1.0/24, 10.0.0.0/8",classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20"}})]}),((V=b==null?void 0:b.attendance_type)==null?void 0:V.slug)==="route_waypoint"&&s("div",{className:"space-y-4",children:[t("h4",{className:"text-lg font-semibold",children:"Route Waypoint Configuration"}),t(ie,{label:"Tolerance (meters)",type:"number",value:((J=v.tolerance)==null?void 0:J.toString())||"200",onValueChange:e=>y({...v,tolerance:parseInt(e)}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20"}}),t(je,{label:"Waypoints (JSON)",placeholder:"Enter waypoints...",value:v.waypointsText||JSON.stringify(v.waypoints||[],null,2),onValueChange:e=>{y(u=>({...u,waypointsText:e}));try{const u=JSON.parse(e);Array.isArray(u)&&y(m=>({...m,waypoints:u,waypointsText:e}))}catch{}},description:"Enter waypoints as JSON array: [{'lat': 23.123, 'lng': 90.456}, ...]",isInvalid:(()=>{try{const e=v.waypointsText||JSON.stringify(v.waypoints||[],null,2);return JSON.parse(e),!1}catch{return!0}})(),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20"}})]})]}),s(wa,{children:[t(Q,{color:"danger",variant:"light",onPress:()=>w(!1),children:"Cancel"}),t(Q,{color:"primary",onPress:L,className:"bg-gradient-to-r from-blue-500 to-purple-500",children:"Save Configuration"})]})]})})]})},_a=({title:l,allUsers:o,departments:r,designations:n,attendanceTypes:i})=>{var A,D,d;const p=Le(),h=_e(p.breakpoints.down("sm")),N=_e(p.breakpoints.down("md")),[g,_]=c.useState(o||[]),[f,$]=c.useState(""),[w,b]=c.useState("all"),[z,v]=c.useState("all"),[y,R]=c.useState("all"),[S,P]=c.useState("table"),[I,L]=c.useState(!1),F=c.useMemo(()=>g.filter(a=>{var C,E,q;const k=f===""||((C=a.name)==null?void 0:C.toLowerCase().includes(f.toLowerCase()))||((E=a.email)==null?void 0:E.toLowerCase().includes(f.toLowerCase()))||((q=a.employee_id)==null?void 0:q.toLowerCase().includes(f.toLowerCase())),O=w==="all"||a.department===parseInt(w),T=z==="all"||a.designation===parseInt(z),M=y==="all"||a.attendance_type_id===parseInt(y);return k&&O&&T&&M}),[g,f,w,z,y]),H=c.useCallback(a=>{$(a)},[]),W=c.useCallback(a=>{b(a),a!=="all"&&v("all")},[]),G=c.useCallback(a=>{v(a)},[]),V=c.useCallback(a=>{R(a)},[]),J=c.useCallback(a=>{_(a)},[]),e=c.useMemo(()=>({total:g.length,withDepartment:g.filter(a=>a.department).length,withDesignation:g.filter(a=>a.designation).length,filtered:F.length}),[g,F]),u=c.useMemo(()=>w==="all"?n:n.filter(a=>a.department_id===parseInt(w)),[n,w]),m=c.useMemo(()=>[{title:"Total Employees",value:e.total,icon:t(me,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Employees"},{title:"With Department",value:e.withDepartment,icon:t(fe,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"With Department"},{title:"With Designation",value:e.withDesignation,icon:t(ue,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"With Designation"},{title:"Filtered",value:e.filtered,icon:t(Ut,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Filtered"}],[e]),j=({user:a,index:k})=>{const O=r==null?void 0:r.find(C=>C.id===a.department),T=n==null?void 0:n.find(C=>C.id===a.designation),M=i==null?void 0:i.find(C=>C.id===a.attendance_type_id);return t(pt,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer",onPress:()=>window.location.href=route("profile",{user:a.id}),children:t(mt,{className:"p-4",children:s("div",{className:"flex items-start gap-3",children:[t(He,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:"md",fallback:t(Be,{className:"w-4 h-4"})},name:a==null?void 0:a.name,description:`ID: ${(a==null?void 0:a.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left text-sm",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),s("div",{className:"flex-1 min-w-0",children:[t("div",{className:"flex items-center justify-end mb-2",children:t(Q,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:C=>{C.stopPropagation(),window.location.href=route("profile",{user:a.id})},children:t(be,{className:"w-4 h-4"})})}),s("div",{className:"space-y-2",children:[s("div",{className:"flex flex-col gap-1 text-xs",children:[s("div",{className:"flex items-center gap-1 text-default-500",children:[t(ge,{className:"w-3 h-3"}),t("span",{className:"truncate",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&s("div",{className:"flex items-center gap-1 text-default-500",children:[t(xe,{className:"w-3 h-3"}),t("span",{children:a==null?void 0:a.phone})]})]}),s("div",{className:"flex flex-wrap gap-1",children:[O&&t(X,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:t(fe,{className:"w-3 h-3"}),children:O.name}),T&&t(X,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:t(ue,{className:"w-3 h-3"}),children:T.title})]}),M&&t(X,{size:"sm",variant:"bordered",className:"text-xs",startContent:t(Me,{className:"w-3 h-3"}),children:M.name})]})]})]})})})};return s(Oe,{children:[t(ct,{title:l}),t(Rt,{sx:{display:"flex",justifyContent:"center",p:2},children:t(Pt,{in:!0,timeout:800,children:t(Et,{children:t(It,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:t(me,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:h?"Add":"Add Employee",icon:t(Wt,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:s("div",{className:"p-4 sm:p-6",children:[t(Ot,{stats:m,className:"mb-6"}),s("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t("div",{className:"flex-1",children:t(ie,{label:"Search Employees",variant:"bordered",placeholder:"Search by name, email, or employee ID...",value:f,onValueChange:H,startContent:t(Ft,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:h?"sm":"md"})}),s("div",{className:"flex gap-2 items-end",children:[s(Bt,{variant:"bordered",className:"bg-white/5",children:[s(Q,{isIconOnly:h,color:S==="table"?"primary":"default",onPress:()=>P("table"),className:S==="table"?"bg-blue-500/20":"",children:[t(Qt,{className:"w-4 h-4"}),!h&&t("span",{className:"ml-1",children:"Table"})]}),s(Q,{isIconOnly:h,color:S==="grid"?"primary":"default",onPress:()=>P("grid"),className:S==="grid"?"bg-blue-500/20":"",children:[t(Dt,{className:"w-4 h-4"}),!h&&t("span",{className:"ml-1",children:"Grid"})]})]}),s(Q,{isIconOnly:h,variant:"bordered",onPress:()=>L(!I),className:I?"bg-purple-500/20":"bg-white/5",children:[t(Ht,{className:"w-4 h-4"}),!h&&t("span",{className:"ml-1",children:"Filters"})]})]})]}),I&&t(zt,{in:!0,timeout:300,children:s("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[s(ee,{label:"Department",variant:"bordered",selectedKeys:w!=="all"?[w]:[],onSelectionChange:a=>{const k=Array.from(a)[0]||"all";W(k)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[t(U,{value:"all",children:"All Departments"},"all"),r==null?void 0:r.map(a=>t(U,{value:a.id.toString(),children:a.name},a.id.toString()))]}),s(ee,{label:"Designation",variant:"bordered",selectedKeys:z!=="all"?[z]:[],onSelectionChange:a=>{const k=Array.from(a)[0]||"all";G(k)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[t(U,{value:"all",children:"All Designations"},"all"),u==null?void 0:u.map(a=>t(U,{value:a.id.toString(),children:a.title},a.id.toString()))]}),!h&&s(ee,{label:"Attendance Type",variant:"bordered",selectedKeys:y!=="all"?[y]:[],onSelectionChange:a=>{const k=Array.from(a)[0]||"all";V(k)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[t(U,{value:"all",children:"All Attendance Types"},"all"),i==null?void 0:i.map(a=>t(U,{value:a.id.toString(),children:a.name},a.id.toString()))]})]}),(f||w!=="all"||z!=="all"||y!=="all")&&s("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[f&&s(X,{variant:"flat",color:"primary",size:"sm",onClose:()=>$(""),children:["Search: ",f]}),w!=="all"&&s(X,{variant:"flat",color:"secondary",size:"sm",onClose:()=>b("all"),children:["Department: ",(A=r==null?void 0:r.find(a=>a.id===parseInt(w)))==null?void 0:A.name]}),z!=="all"&&s(X,{variant:"flat",color:"warning",size:"sm",onClose:()=>v("all"),children:["Designation: ",(D=n==null?void 0:n.find(a=>a.id===parseInt(z)))==null?void 0:D.title]}),y!=="all"&&s(X,{variant:"flat",color:"success",size:"sm",onClose:()=>R("all"),children:["Attendance: ",(d=i==null?void 0:i.find(a=>a.id===parseInt(y)))==null?void 0:d.name]})]})]})}),s("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[t("div",{className:"p-4 border-b border-white/10",children:s(pe,{variant:"h6",className:"font-semibold text-foreground",children:[S==="table"?"Employee Table":"Employee Grid",s("span",{className:"text-sm text-default-500 ml-2",children:["(",F.length," ",F.length===1?"employee":"employees",")"]})]})}),t("div",{className:"max-h-[60vh] overflow-y-auto p-4",children:S==="table"?t(Ca,{allUsers:F,departments:r,designations:n,attendanceTypes:i,setUsers:J,isMobile:h,isTablet:N}):s("div",{children:[t("div",{className:`grid gap-4 ${h?"grid-cols-1":N?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:F.map((a,k)=>t(j,{user:a,index:k},a.id))}),F.length===0&&s("div",{className:"text-center py-8",children:[t(me,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),t(pe,{variant:"body1",color:"textSecondary",children:"No employees found"}),t(pe,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]})]})})]})]})})})})})]})};_a.layout=l=>t(jt,{children:l});export{_a as default};
