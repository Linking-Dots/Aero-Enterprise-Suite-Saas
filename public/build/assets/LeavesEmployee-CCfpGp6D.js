import{V as E,j as n,a as e,M as H,F as V}from"./app-DvzcsS5J.js";import{r as t,e as q,h as z,B as l,f as J,a as f,G as A,T as x,D as K}from"./vendor-DrHmFQFl.js";import{G as B,A as N}from"./App-BhpBsmfq.js";import{L as Q,D as W,a as X}from"./DeleteLeaveForm-DPpadXo5.js";import{d as Z}from"./dayjs.min-DVDxNhg-.js";import{A as $}from"./Add-id6j6Uy5.js";import"./Edit-CtMoSlB4.js";import"./chunk-QEQ4EHOG-Cnv3QZd2.js";import"./DOMLayoutDelegate-Be0YFCgH.js";import"./useLabel-NnqZEut0.js";import"./chunk-NCVCYSZZ-DOsrEWVx.js";import"./chunk-YRZGWF2W-wyJ6pehp.js";import"./chunk-KBN3H6OQ-CflUwqGK.js";import"./useFormValidationState-HbQXXc6L.js";import"./chunk-MRXO6UUP-Dq6wPGLS.js";import"./chunk-KQ7OR4H5-Dz8xZID-.js";import"./chunk-TLBGAR4N-z-9EDjwd.js";import"./GlassDialog-DpQAAim6.js";import"./LoadingButton-CUeR6bzk.js";const ee=({title:u,allUsers:C})=>{const{auth:i}=E().props,{props:P}=E();console.log(i);const[m,d]=t.useState(null),[o,h]=t.useState(P.leavesData),[j,L]=t.useState(),[te,S]=t.useState(0),[ae,D]=t.useState(0),[I,M]=t.useState(null),[v,se]=t.useState(""),[p,T]=t.useState(Z().format("YYYY-MM")),[g,re]=t.useState(30),[y,oe]=t.useState(1),[G,b]=t.useState(),[ne,k]=t.useState(""),_=a=>d(a),w=t.useCallback((a,r)=>{M(a),d(r)},[]),F=t.useCallback(()=>{d(null),M(null)},[]),U=a=>{console.log(a.target.value),T(a.target.value)},Y=async()=>{var a,r;try{const s=await axios.get(route("leaves.paginate"),{params:{page:y,perPage:g,employee:v,month:p}});if(console.log(p),s.status===200){const{data:c,total:R,last_page:O}=s.data.leaves;L(c),S(R),D(O)}}catch(s){console.error("Error fetching leaves data:",s),k(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"Error retrieving data.")}};return t.useEffect(()=>{Y()},[p,y,g,v]),n(V,{children:[e(H,{title:u}),["add_leave","edit_leave"].includes(m)&&e(Q,{setTotalRows:S,setLastPage:D,setLeaves:L,perPage:g,employee:v,currentPage:y,selectedMonth:p,allUsers:C,open:!0,setLeavesData:h,closeModal:()=>d(null),leavesData:o,currentLeave:m==="edit_leave"?G:null,handleMonthChange:U}),m==="delete_leave"&&e(W,{open:!0,handleClose:F,leaveIdToDelete:I,setLeavesData:h}),e(l,{sx:{display:"flex",justifyContent:"center",p:2},children:e(q,{in:!0,children:n(B,{children:[e(z,{title:"Leaves",sx:{padding:"24px"},action:e(l,{display:"flex",gap:2,children:e(J,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e($,{}),onClick:()=>_("add_leave"),children:"Add Leave"})})}),e(f,{children:e(A,{container:!0,spacing:2,children:o.leaveTypes.map(a=>{var r,s;return e(A,{item:!0,xs:6,sm:6,md:3,children:e(B,{children:e(f,{children:n(l,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center",children:[e(x,{variant:"h6",sx:{mb:2},children:a.type})," ",n(l,{display:"flex",alignItems:"center",children:[n(l,{children:["Used:",e(x,{variant:"h4",children:o.leaveCountsByUser[i.user.id]?(r=o.leaveCountsByUser[i.user.id].find(c=>c.leave_type===a.type))==null?void 0:r.days_used:0})]}),e(K,{orientation:"vertical",flexItem:!0,sx:{mx:2}})," ",n(l,{children:["Remaining:",e(x,{variant:"h4",children:o.leaveCountsByUser[i.user.id]?(s=o.leaveCountsByUser[i.user.id].find(c=>c.leave_type===a.type))==null?void 0:s.remaining_days:0})]})]})]})})})},a.type)})})}),e(f,{children:e(X,{setLeavesData:h,handleClickOpen:w,setCurrentLeave:b,openModal:_,allLeaves:j,allUsers:C})})]})})})]})};ee.layout=u=>e(N,{children:u});export{ee as default};
