import{J as Pe,r as u,a as e,j as t,M as Ge,h as E,F as ge,b as W,Q as He,g as Ve,f as qe}from"./app-DDhVNfvV.js";import{u as Se,G as Qe,F as Ue}from"./GlassCard-B8deHOrc.js";import{P as Je}from"./PageHeader-qfMvUU9K.js";import{S as Ke}from"./StatsCards-CaEaffu4.js";import{n as Xe,o as Ze,p as X,q as ea,a as ae,b as te,u as re,I as Fe,i as D,j as ve,z as aa,D as ta,B as k,c as ra,G as sa,d as la,v as na,h as oa,A as ia}from"./App-CULBC9Jb.js";import{d as oe}from"./dayjs.min-Dao2E2MD.js";import{N as da}from"./NoDataMessage-DUtrP5yS.js";import{a as Y,F as ca}from"./UserGroupIcon-CFQYzcyB.js";import{F as xe}from"./EyeIcon-B-1DdV8E.js";import{F as se}from"./PencilIcon-BtapQh-d.js";import{F as we}from"./TrashIcon-rGR8b_v2.js";import{F as ma}from"./EllipsisVerticalIcon-0SYcdA89.js";import{c as Ie}from"./DocumentTextIcon-QwzC9WoH.js";import{F as le}from"./CheckCircleIcon-BkPxWqsz.js";import{F as Te}from"./MapPinIcon-B6NgYK5R.js";import{F as ke}from"./BuildingOfficeIcon-BXNAJj1w.js";import{a as ha,b as ua,c as pa,d as fa,e as ba,t as ga}from"./chunk-F3UDT23P-Bon0qFEG.js";import{p as Ae}from"./chunk-O5I3QTYU-BlPqa12Y.js";import{t as Z}from"./chunk-7ZZXWEXF-D8xxaoD-.js";import{c as A}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import{u as va}from"./chunk-R6AK6OQ4-DKmNo5vD.js";import{G as xa}from"./GlassDialog-BbPdd5-L.js";import{D as Ee}from"./DialogTitle-DVsFppiK.js";import{T as S,B as ne}from"./logo-DoLGM3I0.js";import{F as Re}from"./XMarkIcon-CRGrHH6E.js";import{D as V}from"./Divider-anknaL5v.js";import{T as L,I as Ne,F as ee}from"./TextField-DHyBbceL.js";import{S as ye,M as H}from"./Select-G4UAMmZq.js";import{D as Me,a as ze}from"./DialogContent-DzqEob6e.js";import{B as q}from"./Button-PH-Yt16S.js";import{F as wa}from"./ExclamationTriangleIcon-3tpAB86s.js";import{A as _e}from"./Alert-CzNvw6o_.js";import{C as Be}from"./CircularProgress-ukpRde3Q.js";import{D as Na}from"./Dialog-B0tTkTVF.js";import{F as ya}from"./DocumentArrowDownIcon-C7bxjW28.js";import{b as _a}from"./chunk-57V4RE7B-SGFU28YJ.js";import{F as Da}from"./TableCellsIcon-Dy_hxx65.js";import{i as Ca}from"./chunk-6MDMHKHV-DNEscIMF.js";import{s as De,l as j}from"./chunk-2GIFKCNQ-B1Kwyu4F.js";import"./app-CYwLuuRk.js";import"./create-visual-element-DIA5r6xh.js";import"./chunk-D5XJWRAV-BEd1Mod5.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserIcon-BZDmR83e.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./ClockIcon-UBQM4q2z.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./KeyIcon-CAZJdP6I.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./useHasTabbableChild-BMncZCCk.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./index-CokAva9Y.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./useFormReset-Dv_1w4_q.js";import"./Popover-DGnHN2Gx.js";import"./useSlot-vNKPmkVG.js";import"./useLabel-C1JBDqVQ.js";import"./useListState-D8r1zUCw.js";const Pa=({departments:b,onEdit:h,onDelete:F,onView:s,loading:g,isMobile:i,isTablet:x,pagination:f,onPageChange:n,onRowsPerPageChange:I,canEditDepartment:l=!1,canDeleteDepartment:y=!1})=>{var T,R;const{auth:_}=Pe().props,d=l||((T=_.permissions)==null?void 0:T.includes("departments.update"))||!1,p=y||((R=_.permissions)==null?void 0:R.includes("departments.delete"))||!1,w=u.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:i},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:i},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:i||x},{name:"ACTIONS",uid:"actions"}].filter(N=>!N.hide),[i,x]),o=(r,N)=>{switch(N){case"name":return e(va,{avatarProps:{radius:"lg",fallback:e(ke,{className:"w-4 h-4"}),size:i?"sm":"md"},name:r.name,description:r.parent?r.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e("div",{children:r.code?e(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:r.code}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e("div",{children:r.manager?t("div",{className:"flex flex-col",children:[e("span",{className:"text-sm",children:r.manager.name}),!i&&r.manager.email&&e("span",{className:"text-xs text-default-400",children:r.manager.email})]}):e("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return t("div",{className:"flex items-center gap-2",children:[e(te,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.employee_count||0})]});case"location":return e("div",{className:"flex items-center gap-2",children:r.location?t(ge,{children:[e(Te,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.location})]}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e(A,{size:"sm",variant:r.is_active?"solid":"bordered",color:r.is_active?"success":"danger",startContent:r.is_active?e(le,{className:"w-3 h-3"}):e(ae,{className:"w-3 h-3"}),children:r.is_active?"Active":"Inactive"});case"established":return t("div",{className:"flex items-center gap-2",children:[e(Ie,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:r.established_date?oe(r.established_date).format("MMM D, YYYY"):e("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e("div",{className:"flex justify-end items-center",children:i?t(ea,{children:[e(Xe,{children:e(E,{isIconOnly:!0,size:"sm",variant:"light",children:e(ma,{className:"w-4 h-4"})})}),t(Ze,{"aria-label":"Department actions",children:[e(X,{startContent:e(xe,{className:"w-4 h-4"}),onPress:()=>s(r),children:"View Details"},"view"),d&&e(X,{startContent:e(se,{className:"w-4 h-4"}),onPress:()=>h(r),children:"Edit Department"},"edit"),p&&e(X,{className:"text-danger",color:"danger",startContent:e(we,{className:"w-4 h-4"}),isDisabled:r.employee_count>0,onPress:()=>F(r),children:"Delete Department"},"delete")]})]}):t(ge,{children:[e(Z,{content:"View Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>s(r),children:e(xe,{className:"w-4 h-4"})})}),d&&e(Z,{content:"Edit Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>h(r),children:e(se,{className:"w-4 h-4"})})}),p&&e(Z,{content:r.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:r.employee_count>0,onPress:()=>F(r),children:e(we,{className:"w-4 h-4"})})})]})});default:return e("span",{children:r[N]})}},z=()=>!b||!b.data||g?null:t("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[t("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(f.currentPage-1)*f.perPage+1," to ",Math.min(f.currentPage*f.perPage,b.total)," of ",b.total," departments"]}),e(Ae,{total:Math.ceil(b.total/f.perPage),initialPage:f.currentPage,page:f.currentPage,onChange:n,size:i?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!g&&(!b||!b.data||b.data.length===0)?e("div",{className:"w-full",children:e(da,{message:"No departments found",icon:e(Y,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e("div",{className:"w-full",children:t(ga,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:z(),children:[e(ha,{columns:w,children:r=>e(ua,{children:r.name},r.uid)}),e(pa,{items:b.data||[],emptyContent:!g&&"No departments found",loadingContent:e(Ge,{}),isLoading:g,children:r=>e(fa,{children:N=>e(ba,{children:o(r,N)})},r.id)})]})})},Ce=({open:b,onClose:h,onSuccess:F,department:s=null,managers:g=[],parentDepartments:i=[]})=>{var z,T,R,r,N;const x=Se(),f=re(x.breakpoints.down("md")),[n,I]=u.useState(!1),[l,y]=u.useState({}),_={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[d,p]=u.useState(_);u.useEffect(()=>{p(s?{name:s.name||"",code:s.code||"",description:s.description||"",parent_id:s.parent_id||null,manager_id:s.manager_id||null,location:s.location||"",is_active:s.is_active??!0,established_date:s.established_date?oe(s.established_date).format("YYYY-MM-DD"):""}:_),y({})},[s,b]);const w=m=>{const{name:C,value:c,type:P,checked:G}=m.target;p(M=>({...M,[C]:P==="checkbox"?G:c})),l[C]&&y(M=>({...M,[C]:null}))},o=async()=>{var m,C;I(!0),y({});try{const c={...d,established_date:d.established_date||null};let P;s!=null&&s.id?(P=await W.put(`/departments/${s.id}`,c),k.success("Department updated successfully")):(P=await W.post("/departments",c),k.success("Department created successfully")),F(P.data.department),h()}catch(c){if(console.error("Error saving department:",c),(C=(m=c.response)==null?void 0:m.data)!=null&&C.errors){y(c.response.data.errors);const P=Object.values(c.response.data.errors)[0];P&&k.error(P[0])}else k.error("An error occurred while saving the department")}finally{I(!1)}};return t(xa,{open:b,onClose:n?void 0:h,maxWidth:"md",fullWidth:!0,fullScreen:f,"aria-labelledby":"department-form-dialog",children:[t(Ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e(S,{variant:"h6",component:"div",children:s?"Edit Department":"Create New Department"}),e(Fe,{edge:"end",color:"inherit",onClick:h,disabled:n,"aria-label":"close",children:e(Re,{className:"w-5 h-5"})})]}),e(V,{}),e(Me,{sx:{pt:2},children:t(D,{container:!0,spacing:3,children:[e(D,{item:!0,xs:12,children:e(S,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:d.name,onChange:w,error:!!l.name,helperText:((z=l.name)==null?void 0:z[0])||"",disabled:n})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"code",label:"Department Code",fullWidth:!0,value:d.code||"",onChange:w,error:!!l.code,helperText:((T=l.code)==null?void 0:T[0])||"Unique identifier (e.g., HR001, FIN002)",disabled:n})}),e(D,{item:!0,xs:12,children:e(L,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:d.description||"",onChange:w,error:!!l.description,helperText:((R=l.description)==null?void 0:R[0])||"",disabled:n})}),e(D,{item:!0,xs:12,sx:{mt:2},children:e(S,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e(D,{item:!0,xs:12,md:6,children:t(ve,{fullWidth:!0,error:!!l.parent_id,children:[e(Ne,{id:"parent-department-label",children:"Parent Department"}),t(ye,{labelId:"parent-department-label",name:"parent_id",value:d.parent_id||"",onChange:w,label:"Parent Department",disabled:n,children:[e(H,{value:"",children:e("em",{children:"None (Top-Level Department)"})}),i.map(m=>(s==null?void 0:s.id)!==m.id&&e(H,{value:m.id,children:m.name},m.id))]}),l.parent_id&&e(ee,{children:l.parent_id[0]})]})}),e(D,{item:!0,xs:12,md:6,children:t(ve,{fullWidth:!0,error:!!l.manager_id,children:[e(Ne,{id:"manager-label",children:"Department Manager"}),t(ye,{labelId:"manager-label",name:"manager_id",value:d.manager_id||"",onChange:w,label:"Department Manager",disabled:n,children:[e(H,{value:"",children:e("em",{children:"Not Assigned"})}),g.map(m=>e(H,{value:m.id,children:m.name},m.id))]}),l.manager_id&&e(ee,{children:l.manager_id[0]})]})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"location",label:"Location",fullWidth:!0,value:d.location||"",onChange:w,error:!!l.location,helperText:((r=l.location)==null?void 0:r[0])||"Physical location of the department",disabled:n})}),e(D,{item:!0,xs:12,md:6,children:e(L,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:d.established_date||"",onChange:w,error:!!l.established_date,helperText:((N=l.established_date)==null?void 0:N[0])||"",disabled:n,InputLabelProps:{shrink:!0}})}),t(D,{item:!0,xs:12,children:[e(aa,{control:e(ta,{checked:d.is_active,onChange:w,name:"is_active",color:"success",disabled:n}),label:"Department is active"}),l.is_active&&e(ee,{error:!0,children:l.is_active[0]})]})]})}),e(V,{}),t(ze,{sx:{px:3,py:2},children:[e(q,{onClick:h,disabled:n,color:"inherit",children:"Cancel"}),e(q,{onClick:o,variant:"contained",color:"primary",disabled:n,children:n?"Saving...":s?"Update Department":"Create Department"})]})]})},Sa=({open:b,onClose:h,onSuccess:F,department:s})=>{const[g,i]=u.useState(!1),[x,f]=u.useState(null),n=async()=>{var I,l,y,_;if(s){i(!0),f(null);try{await W.delete(`/departments/${s.id}`),k.success("Department deleted successfully"),F(),h()}catch(d){if(console.error("Error deleting department:",d),(l=(I=d.response)==null?void 0:I.data)!=null&&l.message)f(d.response.data.message),k.error(d.response.data.message);else if((_=(y=d.response)==null?void 0:y.data)!=null&&_.errors){const p=Object.values(d.response.data.errors)[0];f(p),k.error(p)}else f("An error occurred while deleting the department"),k.error("An error occurred while deleting the department")}finally{i(!1)}}};return s?t(Na,{open:b,onClose:g?void 0:h,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-department-dialog",children:[t(Ee,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(S,{variant:"h6",children:"Delete Department"}),e(Fe,{edge:"end",color:"inherit",onClick:h,disabled:g,"aria-label":"close",children:e(Re,{className:"w-5 h-5"})})]}),e(V,{}),e(Me,{children:t(ne,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(ne,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(wa,{className:"w-8 h-8 text-yellow-500"}),t(S,{variant:"body1",children:["Are you sure you want to delete the department ",e("strong",{children:s.name}),"?"]})]}),s.employee_count>0&&t(_e,{severity:"warning",sx:{mt:2},children:["This department has ",s.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),x&&e(_e,{severity:"error",sx:{mt:2},children:x}),e(S,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e(V,{}),t(ze,{sx:{px:3,py:2},children:[e(q,{onClick:h,disabled:g,color:"inherit",children:"Cancel"}),e(q,{onClick:n,variant:"contained",color:"error",disabled:g||s.employee_count>0,startIcon:g&&e(Be,{size:20,color:"inherit"}),children:g?"Deleting...":"Delete Department"})]})]}):null},Yt=({title:b,departments:h,managers:F,parentDepartments:s,stats:g,filters:i})=>{var ce,me,he,ue,pe,fe;const{auth:x}=Pe().props,f=Se(),n=re(f.breakpoints.down("sm")),I=re(f.breakpoints.down("md")),[l,y]=u.useState(h||{data:[]}),[_,d]=u.useState(!1),[p,w]=u.useState({type:null,department:null}),[o,z]=u.useState({search:(i==null?void 0:i.search)||"",status:(i==null?void 0:i.status)||"all",parentDepartment:(i==null?void 0:i.parentDepartment)||"all"}),[T,R]=u.useState(!1),[r,N]=u.useState("table"),[m,C]=u.useState({currentPage:(h==null?void 0:h.current_page)||1,perPage:(h==null?void 0:h.per_page)||10}),[c,P]=u.useState(g||{total:0,active:0,inactive:0,parent_departments:0}),G=((ce=x.permissions)==null?void 0:ce.includes("departments.create"))||!1,M=((me=x.permissions)==null?void 0:me.includes("departments.update"))||!1,Q=((he=x.permissions)==null?void 0:he.includes("departments.delete"))||!1,$e=M||((ue=x.permissions)==null?void 0:ue.includes("departments.update"))||!1;Q||(pe=x.permissions)!=null&&pe.includes("departments.delete");const U=u.useCallback(async()=>{d(!0);try{const a=await W.get(route("api.departments"),{params:{page:m.currentPage,per_page:m.perPage,search:o.search,status:o.status,parent_department:o.parentDepartment}});y(a.data.departments)}catch(a){console.error("Error fetching departments:",a),k.error("Failed to load departments data")}finally{d(!1)}},[m.currentPage,m.perPage,o.search,o.status,o.parentDepartment]),J=u.useCallback(async()=>{try{const a=await W.get(route("departments.stats"));if(a.status===200){const{stats:v}=a.data;P(v)}}catch(a){console.error("Error fetching department stats:",a)}},[]);u.useEffect(()=>{U(),J()},[U,J]);const B=(a,v)=>{z(O=>({...O,[a]:v})),C(O=>({...O,currentPage:1}))},ie=a=>{C(v=>({...v,currentPage:a})),window.scrollTo({top:0,behavior:"smooth"})},Oe=a=>{C({currentPage:1,perPage:a})},$=(a,v=null)=>{w({type:a,department:v})},K=()=>{w({type:null,department:null})},de=()=>{U(),J()},je=({department:a,index:v})=>{const O=a.manager,be=a.parent;return e(qe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>$("view_department",a),children:t(Ve,{className:"p-4 flex flex-col h-full",children:[t("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary flex-shrink-0",children:e(ke,{className:"w-5 h-5"})}),e("div",{className:"flex-1 min-w-0",children:t("div",{className:"flex items-start justify-between",children:[t("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:a.name}),e("p",{className:"text-default-500 text-xs",children:a.code||"No Code"})]}),$e&&e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:We=>{We.stopPropagation(),$("edit_department",a)},children:e(se,{className:"w-4 h-4"})})]})})]}),t("div",{className:"flex-1 flex flex-col gap-3",children:[a.location&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Te,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:a.location})]}),a.established_date&&t("div",{className:"flex items-center gap-2 text-sm",children:[e(Ie,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:oe(a.established_date).format("MMM D, YYYY")})]}),t("div",{className:"flex items-center gap-2 text-sm",children:[e(te,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),t("span",{className:"text-default-600 text-xs",children:[a.employee_count||0," ",a.employee_count===1?"Employee":"Employees"]})]})]}),t("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(A,{size:"sm",variant:a.is_active?"solid":"bordered",color:a.is_active?"success":"danger",className:"text-xs",startContent:a.is_active?e(le,{className:"w-3 h-3"}):e(ae,{className:"w-3 h-3"}),children:a.is_active?"Active":"Inactive"}),be&&e(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(Y,{className:"w-3 h-3"}),children:be.name}),O&&e(A,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(te,{className:"w-3 h-3"}),children:O.name})]})]})})},Le=u.useMemo(()=>[{title:"Total Departments",value:(c==null?void 0:c.total)||0,icon:e(Y,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:(c==null?void 0:c.active)||0,icon:e(le,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:(c==null?void 0:c.inactive)||0,icon:e(ae,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:(c==null?void 0:c.parent_departments)||0,icon:e(ca,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[c]),Ye=u.useMemo(()=>{const a=[];return G&&a.push({label:n?"Add":"Add Department",icon:e(ra,{className:"w-4 h-4"}),onPress:()=>$("add_department"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),a.push({label:n?"":"Export",isIconOnly:n,icon:e(ya,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),a},[G,n]);return t(ia,{children:[e(He,{title:b}),e(ne,{sx:{display:"flex",justifyContent:"center",p:2},children:e(sa,{in:!0,timeout:800,children:e(Qe,{children:e(Je,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e(Y,{className:"w-8 h-8"}),variant:"default",actionButtons:Ye,children:t("div",{className:"p-4 sm:p-6",children:[e(Ke,{stats:Le,className:"mb-6"}),t("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(Ca,{label:"Search Departments",variant:"bordered",placeholder:"Search by name, code, or location...",value:o.search,onValueChange:a=>B("search",a),startContent:e(la,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:n?"sm":"md"})}),t("div",{className:"flex gap-2 items-end",children:[t(_a,{variant:"bordered",className:"bg-white/5",children:[t(E,{isIconOnly:n,color:r==="table"?"primary":"default",onPress:()=>N("table"),className:r==="table"?"bg-blue-500/20":"",children:[e(Da,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Table"})]}),t(E,{isIconOnly:n,color:r==="grid"?"primary":"default",onPress:()=>N("grid"),className:r==="grid"?"bg-blue-500/20":"",children:[e(na,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Grid"})]})]}),t(E,{isIconOnly:n,variant:"bordered",onPress:()=>R(!T),className:T?"bg-purple-500/20":"bg-white/5",children:[e(oa,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),T&&e(Ue,{in:!0,timeout:300,children:t("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t(De,{label:"Status",variant:"bordered",selectedKeys:o.status!=="all"?[o.status]:[],onSelectionChange:a=>{const v=Array.from(a)[0]||"all";B("status",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(j,{value:"all",children:"All Statuses"},"all"),e(j,{value:"active",children:"Active Only"},"active"),e(j,{value:"inactive",children:"Inactive Only"},"inactive")]}),t(De,{label:"Parent Department",variant:"bordered",selectedKeys:o.parentDepartment!=="all"?[o.parentDepartment]:[],onSelectionChange:a=>{const v=Array.from(a)[0]||"all";B("parentDepartment",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(j,{value:"all",children:"All Parent Departments"},"all"),e(j,{value:"none",children:"Top-Level Departments"},"none"),s==null?void 0:s.map(a=>e(j,{value:a.id.toString(),children:a.name},a.id.toString()))]})]}),(o.search||o.status!=="all"||o.parentDepartment!=="all")&&t("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[o.search&&t(A,{variant:"flat",color:"primary",size:"sm",onClose:()=>B("search",""),children:["Search: ",o.search]}),o.status!=="all"&&t(A,{variant:"flat",color:"secondary",size:"sm",onClose:()=>B("status","all"),children:["Status: ",o.status==="active"?"Active":"Inactive"]}),o.parentDepartment!=="all"&&t(A,{variant:"flat",color:"warning",size:"sm",onClose:()=>B("parentDepartment","all"),children:["Parent: ",o.parentDepartment==="none"?"None (Top-Level)":(fe=s==null?void 0:s.find(a=>a.id===parseInt(o.parentDepartment)))==null?void 0:fe.name]})]})]})}),t("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:t(S,{variant:"h6",className:"font-semibold text-foreground",children:[r==="table"?"Department Table":"Department Grid",t("span",{className:"text-sm text-default-500 ml-2",children:["(",l.total||0," ",l.total===1?"department":"departments",")"]})]})}),_?t("div",{className:"text-center py-8",children:[e(Be,{size:40}),e(S,{className:"mt-4",color:"textSecondary",children:"Loading departments data..."})]}):r==="table"?e(Pa,{departments:l,loading:_,onEdit:M?a=>$("edit_department",a):void 0,onDelete:Q?a=>$("delete_department",a):void 0,onView:a=>$("view_department",a),isMobile:n,isTablet:I,pagination:m,onPageChange:ie,onRowsPerPageChange:Oe,canEditDepartment:M,canDeleteDepartment:Q}):t("div",{className:"p-4",children:[l.data&&l.data.length>0?e("div",{className:`grid gap-4 ${n?"grid-cols-1":I?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:l.data.map((a,v)=>e(je,{department:a,index:v},a.id))}):t("div",{className:"text-center py-8",children:[e(Y,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(S,{variant:"body1",color:"textSecondary",children:"No departments found"}),e(S,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),l.data&&l.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Ae,{total:Math.ceil(l.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:ie,size:n?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(p.type==="add_department"||p.type==="edit_department")&&e(Ce,{open:!0,onClose:K,onSuccess:de,department:p.type==="edit_department"?p.department:null,managers:F,parentDepartments:s}),p.type==="delete_department"&&e(Sa,{open:!0,onClose:K,onSuccess:de,department:p.department}),p.type==="view_department"&&e(Ce,{open:!0,onClose:K,onSuccess:()=>{},department:p.department,managers:F,parentDepartments:s,readOnly:!0})]})};export{Yt as default};
