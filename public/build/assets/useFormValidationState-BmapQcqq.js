import{e as U,g as y,h as B}from"./App-DJVeLFFD.js";import{r as d}from"./vendor-C3l6kYDa.js";var H=a=>(a==null?void 0:a.length)<=4?a:a==null?void 0:a.slice(0,3),J=(...a)=>{let e=" ";for(const t of a)if(typeof t=="string"&&t.length>0){e=t;break}return e},N={},x={};function K(a,e,...t){var i;const r=`[Next UI]${e?` [${e}]`:" "}: ${a}`;if(!(typeof console>"u")&&!x[r]&&(x[r]=!0,((i=process==null?void 0:N)==null?void 0:i.NODE_ENV)!=="production"))return console.warn(r,t)}function W(a,e,t){let{validationBehavior:i,focus:u}=a;U(()=>{if(i==="native"&&(t!=null&&t.current)){let n=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(n),t.current.hasAttribute("title")||(t.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(k(t.current))}});let r=y(()=>{e.resetValidation()}),c=y(n=>{var l;e.displayValidation.isInvalid||e.commitValidation();let s=t==null||(l=t.current)===null||l===void 0?void 0:l.form;if(!n.defaultPrevented&&t&&s&&j(s)===t.current){var f;u?u():(f=t.current)===null||f===void 0||f.focus(),B("keyboard")}n.preventDefault()}),v=y(()=>{e.commitValidation()});d.useEffect(()=>{let n=t==null?void 0:t.current;if(!n)return;let l=n.form;return n.addEventListener("invalid",c),n.addEventListener("change",v),l==null||l.addEventListener("reset",r),()=>{n.removeEventListener("invalid",c),n.removeEventListener("change",v),l==null||l.removeEventListener("reset",r)}},[t,c,v,r,i])}function R(a){let e=a.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function k(a){return{isInvalid:!a.validity.valid,validationDetails:R(a),validationErrors:a.validationMessage?[a.validationMessage]:[]}}function j(a){for(let e=0;e<a.elements.length;e++){let t=a.elements[e];if(!t.validity.valid)return t}return null}const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...D,customError:!0,valid:!1},m={isInvalid:!1,validationDetails:D,validationErrors:[]},F=d.createContext({}),L="__formValidationState"+Date.now();function X(a){if(a[L]){let{realtimeValidation:e,displayValidation:t,updateValidation:i,resetValidation:u,commitValidation:r}=a[L];return{realtimeValidation:e,displayValidation:t,updateValidation:i,resetValidation:u,commitValidation:r}}return Q(a)}function Q(a){let{isInvalid:e,validationState:t,name:i,value:u,builtinValidation:r,validate:c,validationBehavior:v="aria"}=a;t&&(e||(e=t==="invalid"));let n=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:A}:null,l=d.useMemo(()=>w(q(c,u)),[c,u]);r!=null&&r.validationDetails.valid&&(r=null);let s=d.useContext(F),f=d.useMemo(()=>i?Array.isArray(i)?i.flatMap(o=>I(s[o])):I(s[i]):[],[s,i]),[C,_]=d.useState(s),[M,V]=d.useState(!1);s!==C&&(_(s),V(!1));let b=d.useMemo(()=>w(M?[]:f),[M,f]),S=d.useRef(m),[p,E]=d.useState(m),$=d.useRef(m),O=()=>{if(!T)return;g(!1);let o=l||r||S.current;h(o,$.current)||($.current=o,E(o))},[T,g]=d.useState(!1);return d.useEffect(O),{realtimeValidation:n||b||l||r||m,displayValidation:v==="native"?n||b||p:n||b||l||r||p,updateValidation(o){v==="aria"&&!h(p,o)?E(o):S.current=o},resetValidation(){let o=m;h(o,$.current)||($.current=o,E(o)),v==="native"&&g(!1),V(!0)},commitValidation(){v==="native"&&g(!0),V(!0)}}}function I(a){return a?Array.isArray(a)?a:[a]:[]}function q(a,e){if(typeof a=="function"){let t=a(e);if(t&&typeof t!="boolean")return I(t)}return[]}function w(a){return a.length?{isInvalid:!0,validationErrors:a,validationDetails:A}:null}function h(a,e){return a===e?!0:a&&e&&a.isInvalid===e.isInvalid&&a.validationErrors.length===e.validationErrors.length&&a.validationErrors.every((t,i)=>t===e.validationErrors[i])&&Object.entries(a.validationDetails).every(([t,i])=>e.validationDetails[t]===i)}export{X as $,W as a,J as b,m as c,L as d,H as s,K as w};
