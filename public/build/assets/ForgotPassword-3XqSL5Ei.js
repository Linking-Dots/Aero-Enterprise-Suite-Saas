import{v as C,w as q,r as f,b as l,j as e,Q as _,t as S,F as w,h as x,a2 as M}from"./app-ICdw8XZW.js";import{ap as E,aq as j,u as N,f as h,e as R,B as a,l as T,i as v,g as O,T as V,A as D}from"./App-xKIEJnfh.js";import{P}from"./Password-ZTW7N3A_.js";import{C as F}from"./CardContent-DGIH-NyB.js";import"./app-CA3O2NZp.js";var c={},y;function K(){if(y)return c;y=1;var r=E();Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var n=r(j()),i=C();return c.default=(0,n.default)((0,i.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),c}var W=K();const k=q(W);var m={},b;function L(){if(b)return m;b=1;var r=E();Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var n=r(j()),i=C();return m.default=(0,n.default)((0,i.jsx)("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey"),m}var A=L();const H=q(A);function Y(){N();const[r,n]=f.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[i,p]=f.useState(!1),[o,u]=f.useState({}),[d,g]=f.useState(1),I=s=>{s.preventDefault(),p(!0),d===1?axios.post(route("password.send-otp"),{email:r.email}).then(t=>{u({}),g(2)}).catch(t=>{console.error(t),console.error("Password reset OTP request failed:",t.response.data.errors),u(t.response.data.errors)}).finally(()=>{p(!1)}):d===2?axios.post(route("password.verify"),{email:r.email,otp:r.otp}).then(t=>{u({}),g(3)}).catch(t=>{console.error(t),console.error("OTP verification failed:",t.response.data.errors),u(t.response.data.errors)}).finally(()=>{p(!1)}):d===3&&axios.post(route("password.reset-custom"),{email:r.email,newPassword:r.newPassword,newPassword_confirmation:r.confirmPassword}).then(t=>{M.get(route("login"))}).catch(t=>{console.error(t),console.error("Password reset failed:",t.response.data.errors),u(t.response.data.errors)}).finally(()=>{p(!1)})};return l(D,{children:[e(_,{title:"Forgot Password"}),e(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:e(h,{container:!0,spacing:2,justifyContent:"center",children:e(h,{item:!0,xs:12,md:8,lg:6,xl:5,children:e(R,{children:l(F,{children:[e(a,{textAlign:"center",children:e(S,{style:{alignItems:"center",display:"inline-flex"},href:route("dashboard"),className:"d-inline-block auth-logo",children:e("img",{src:T,alt:"Logo",className:"h-24 md:h-40 sm:h-40 xs:h-10"})})}),e(a,{mt:4,children:l("form",{onSubmit:I,children:[d===1&&l(w,{children:[e(a,{mb:3,children:e(v,{isClearable:!0,type:"email",label:"Enter your email address",variant:"underlined",id:"email",name:"email",value:r.email||"",onChange:s=>{n({...r,email:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!o.email,errorMessage:o.email,placeholder:"you@example.com",labelPlacement:"outside",startContent:e(k,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(x,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:i,children:"Send OTP"})})]}),d===2&&l(w,{children:[e(a,{mb:3,children:e(v,{isClearable:!0,type:"text",label:"Enter OTP sent to your email",variant:"underlined",id:"otp",name:"otp",value:r.otp||"",onChange:s=>{n({...r,otp:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!o.otp,errorMessage:o.otp,placeholder:"Enter the OTP",labelPlacement:"outside",startContent:e(H,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(x,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:i,children:"Verify OTP"})})]}),d===3&&l(w,{children:[e(a,{mb:4,children:e(v,{label:"New Password",id:"newPassword",name:"newPassword",variant:"underlined",startContent:e(P,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),type:"password",value:r.newPassword||"",onChange:s=>{n({...r,newPassword:s.target.value})},required:!0,isInvalid:!!o.newPassword,errorMessage:o.newPassword,placeholder:"Enter new password",labelPlacement:"outside"})}),e(a,{mb:4,children:e(v,{isClearable:!0,type:"password",label:"Confirm New Password",variant:"underlined",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword||"",onChange:s=>{n({...r,confirmPassword:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!o.confirmPassword,errorMessage:o.confirmPassword,placeholder:"Confirm new password",labelPlacement:"outside",startContent:e(P,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(x,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:i,children:"Reset Password"})})]})]})})]})})})})}),e("footer",{children:e(O,{children:e(h,{container:!0,justifyContent:"center",children:e(h,{item:!0,xs:12,textAlign:"center",children:l(V,{variant:"body2",color:"text.secondary",children:["Â© ",new Date().getFullYear()," Emam Hosen. Crafted with ",e("i",{className:"mdi mdi-heart text-danger"})]})})})})})]})}export{Y as default};
