import{r as T,J as D,b as d,j as e,Q as H,F as y}from"./app-_fBEAKGv.js";import{G as j,k as p,l as I,R as E,B as w,A as Q}from"./App-D7mnl0rW.js";import{u as U,G as $,T as N,B as J}from"./logo-Doov_oAp.js";import{C as q}from"./CardHeader-C0sjRh_R.js";import{C as A}from"./CardContent-Cgmaqpts.js";import{T as x,I as B}from"./TextField-DtCy84kv.js";import{S as M,M as v}from"./Select-CovYC41-.js";import{B as F}from"./Button-D-EfDwIb.js";import{T as z}from"./TableContainer-BzBvakJe.js";import{T as K,a as O,b as L,c as s,d as V}from"./TableRow-D_xe4Z0a.js";import{C as _}from"./CircularProgress-C4tAYJkY.js";import"./app-CX8GSXRI.js";import"./EnvelopeIcon-Bzg3iM2a.js";import"./UserIcon-zPmqLCda.js";import"./ShieldCheckIcon-CFNet5UT.js";import"./chunk-6MDMHKHV-DPPAXvv7.js";import"./create-visual-element-COMdWoDg.js";import"motion-dom";import"./Popover-QXU3_HMD.js";const X=({title:f})=>{const C={type:"",days:"",eligibility:"",carry_forward:"",earned_leave:"",special_conditions:""},[b,k]=T.useState(D().props.leaveTypes),[o,m]=T.useState(C),[P,S]=T.useState(!1),r=U(),g=a=>{const{name:l,value:t}=a.target;m({...o,[l]:t})},R=async()=>{const a=new Promise(async(l,t)=>{var i,c;try{const n=await axios.post("/add-leave-type",o);n.status===201?(k([...b,{...o,id:n.data.id}]),m(C),l(["Leave type added successfully."])):t(["Failed to add leave type. Please try again."])}catch(n){console.error(n),t([((c=(i=n.response)==null?void 0:i.data)==null?void 0:c.message)||"Failed to add leave type. Please try again."])}});w.promise(a,{pending:{render(){return d("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Adding leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:l}){return e(y,{children:l.map((t,i)=>e("div",{children:t},i))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:l}){return e(y,{children:l})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},W=async a=>{const l=b.find(t=>t.id===a);m(l),S(!0)},G=()=>{const a=new Promise(async(l,t)=>{var i,c;try{const n=await axios.put(`/update-leave-type/${o.id}`,o);if(n.status===200){const u=b.map(h=>h.id===o.id?{...o,id:n.data.id}:h);k(u),m(C),S(!1),l(["Leave type updated successfully."])}else t(["Failed to update leave type. Please try again."])}catch(n){console.error(n),t([((c=(i=n.response)==null?void 0:i.data)==null?void 0:c.message)||"Failed to update leave type. Please try again."])}});w.promise(a,{pending:{render(){return d("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Updating leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:l}){return e(y,{children:l.map((t,i)=>e("div",{children:t},i))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:l}){return e(y,{children:l})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},Y=async a=>{const l=new Promise(async(t,i)=>{var c,n;try{const u=await axios.delete(`/delete-leave-type/${a}`);u.status===200?(k(b.filter(h=>h.id!==a)),t([u.data.message||"Leave type deleted successfully."])):i(["Failed to delete leave type. Please try again."])}catch(u){console.error(u),i([((n=(c=u.response)==null?void 0:c.data)==null?void 0:n.message)||"Failed to delete leave type. Please try again."])}});w.promise(l,{pending:{render(){return d("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:t}){return e(y,{children:t.map((i,c)=>e("div",{children:i},c))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:t}){return e(y,{children:t})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})};return d(y,{children:[e(H,{title:f}),e(J,{sx:{display:"flex",justifyContent:"center",p:2},children:e(j,{in:!0,children:d($,{children:[e(q,{title:"Leave Settings",sx:{padding:"24px"}}),e(A,{children:d(p,{container:!0,spacing:1,alignItems:"center",children:[e(p,{item:!0,xs:6,sm:3,md:3,children:e(x,{fullWidth:!0,label:"Leave Type",name:"type",value:o.type,onChange:g})}),e(p,{item:!0,xs:6,sm:3,md:3,children:e(x,{fullWidth:!0,label:"Number of Days",name:"days",type:"number",value:o.days,onChange:g})}),e(p,{item:!0,xs:6,sm:3,md:3,children:d(I,{fullWidth:!0,children:[e(B,{id:"carry-forward-label",children:"Carry Forward"}),d(M,{variant:"outlined",labelId:"carry-forward-label",label:"Carry Forward",name:"carry_forward",value:o.carry_forward,onChange:g,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(v,{value:!0,children:"Yes"}),e(v,{value:!1,children:"No"})]})]})}),e(p,{item:!0,xs:6,sm:3,md:3,children:d(I,{fullWidth:!0,children:[e(B,{id:"earned-leave-label",children:"Earned Leave"}),d(M,{variant:"outlined",labelId:"earned-leave-label",label:"Earned Leave",name:"earned_leave",value:o.earned_leave,onChange:g,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(v,{value:!0,children:"Yes"}),e(v,{value:!1,children:"No"})]})]})}),e(p,{item:!0,xs:12,sm:6,md:6,children:e(x,{fullWidth:!0,label:"Eligibility Criteria",name:"eligibility",value:o.eligibility,onChange:g})}),e(p,{item:!0,xs:12,sm:6,md:6,children:e(x,{fullWidth:!0,label:"Special Conditions",name:"special_conditions",value:o.special_conditions,onChange:g})}),e(p,{item:!0,xs:12,sm:12,md:12,sx:{display:"flex",justifyContent:"center"},children:e(F,{sx:{height:"100%"},variant:"outlined",color:"primary",onClick:P?G:R,children:P?"Update Leave Type":"Add Leave Type"})})]})}),e(A,{children:e(z,{style:{maxHeight:"84vh",overflowY:"auto"},children:d(K,{children:[e(O,{children:d(L,{children:[e(s,{children:"Type"}),e(s,{children:"Days"}),e(s,{children:"Eligibility"}),e(s,{children:"Carry Forward"}),e(s,{children:"Earned Leave"}),e(s,{children:"Special Conditions"}),e(s,{children:"Actions"})]})}),e(V,{children:b.length>0?b.map(a=>d(L,{children:[e(s,{children:a.type}),e(s,{children:a.days}),e(s,{children:a.eligibility}),e(s,{children:d(N,{children:[e(E,{checked:!0,sx:{color:a.carry_forward?"green":"red","&.Mui-checked":{color:a.carry_forward?"green":"red"}},disabled:!0}),a.carry_forward?"Yes":"No"]})}),e(s,{children:d(N,{children:[e(E,{checked:!0,sx:{color:a.earned_leave?"green":"red","&.Mui-checked":{color:a.earned_leave?"green":"red"}},disabled:!0}),a.earned_leave?"Yes":"No"]})}),e(s,{children:a.special_conditions?a.special_conditions:"N/A"}),d(s,{children:[e(F,{variant:"outlined",color:"primary",onClick:()=>W(a.id),sx:{marginRight:1},children:"Edit"}),e(F,{variant:"outlined",color:"secondary",onClick:()=>Y(a.id),children:"Delete"})]})]},a.id)):e(L,{children:e(s,{colSpan:7,align:"center",children:"No leave types available."})})})]})})})]})})})]})};X.layout=f=>e(Q,{children:f});export{X as default};
