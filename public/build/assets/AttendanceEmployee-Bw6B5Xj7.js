import{R as M,J as k,r as o,b as C,a as t,j as n,Q as A,d as R,F as $}from"./app-DDhVNfvV.js";import{u as g,F as f,a as B,G as N,A as T}from"./App-CULBC9Jb.js";import{P as W}from"./PageHeader-qfMvUU9K.js";import{S as H}from"./StatsCards-CaEaffu4.js";import{T as L}from"./TimeSheetTable-qe5QROrP.js";import{u as Y,G as P}from"./GlassCard-B8deHOrc.js";import{F as j}from"./CheckCircleIcon-BkPxWqsz.js";import{F as E}from"./ExclamationTriangleIcon-3tpAB86s.js";import{F as G}from"./ChartBarIcon-CzsPYg0y.js";import{F as m}from"./ClockIcon-UBQM4q2z.js";import{F as Q}from"./UserIcon-BZDmR83e.js";import{C as _}from"./CardHeader-BPTzkM70.js";import{B as c,T as z}from"./logo-DoLGM3I0.js";import{C as I}from"./CardContent-783YhD2K.js";import{F as O}from"./PresentationChartLineIcon-BNoIiPag.js";import{i as J}from"./chunk-6MDMHKHV-DNEscIMF.js";import"./app-CYwLuuRk.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./BuildingOfficeIcon-BXNAJj1w.js";import"./KeyIcon-CAZJdP6I.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./XMarkIcon-CRGrHH6E.js";import"./useFormReset-Dv_1w4_q.js";import"./chunk-J7I6W5JF-Dj4B-Czi.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./chunk-D5XJWRAV-BEd1Mod5.js";import"./dayjs.min-Dao2E2MD.js";import"./Button-PH-Yt16S.js";import"./DocumentArrowDownIcon-C7bxjW28.js";import"./chunk-TLYTI3QM-Dj5Yyjz6.js";import"./chunk-F3UDT23P-Bon0qFEG.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./useHasTabbableChild-BMncZCCk.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./chunk-O5I3QTYU-BlPqa12Y.js";import"./index-CokAva9Y.js";import"./chunk-R6AK6OQ4-DKmNo5vD.js";import"./create-visual-element-DIA5r6xh.js";import"./useLabel-C1JBDqVQ.js";const U=M.memo(({title:i,totalWorkingDays:V,presentDays:q,absentDays:K,lateArrivals:X})=>{const{auth:Z}=k().props,d=Y(),b=g(d.breakpoints.down("sm"));g(d.breakpoints.down("md"));const[p,y]=o.useState(new Date),[v,h]=o.useState(!1),[tt,et]=o.useState(!1),[r,w]=o.useState({currentMonth:new Date().toISOString().slice(0,7)}),[a,D]=o.useState({totalWorkingDays:0,totalDaysInMonth:0,holidaysCount:0,weekendsCount:0,presentDays:0,absentDays:0,lateArrivals:0,attendancePercentage:0,averageWorkHours:0,overtimeHours:0,totalWorkHours:0,totalLeaveDays:0,leaveBreakdown:{},month:"",generated_at:null}),x=e=>{const l=e.target.value;y(new Date(l)),h(s=>!s)},F=o.useCallback((e,l)=>{w(s=>({...s,[e]:l})),h(s=>!s)},[]),u=o.useCallback(async()=>{try{const e=await C.get(route("attendance.myMonthlyStats"),{params:{currentYear:r.currentMonth?new Date(r.currentMonth).getFullYear():new Date().getFullYear(),currentMonth:r.currentMonth?String(new Date(r.currentMonth).getMonth()+1).padStart(2,"0"):String(new Date().getMonth()+1).padStart(2,"0")}});e.data.success&&D(e.data.data)}catch(e){console.error("Failed to fetch monthly stats:",e)}},[r.currentMonth]);o.useEffect(()=>{u()},[u]);const S=[{title:"Working Days",value:a.totalWorkingDays,icon:t(f,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:`Total for ${a.month||"this month"}`},{title:"Present Days",value:a.presentDays,icon:t(j,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Days attended this month"},{title:"Absent Days",value:a.absentDays,icon:t(B,{}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Days missed this month"},{title:"Late Arrivals",value:a.lateArrivals,icon:t(E,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Times late this month"},{title:"Attendance Rate",value:`${a.attendancePercentage}%`,icon:t(G,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Your monthly performance"},{title:"Avg Work Hours",value:`${a.averageWorkHours}h`,icon:t(m,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Daily average this month"},{title:"Overtime",value:`${a.overtimeHours}h`,icon:t(m,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Extra hours this month"},{title:"Leave Days",value:a.totalLeaveDays,icon:t(Q,{}),color:"text-amber-400",iconBg:"bg-amber-500/20",description:"Leaves taken this month"}];return n($,{children:["            ",t(A,{title:i||"My Attendance"}),t(c,{sx:{display:"flex",justifyContent:"center",p:2},children:t(N,{in:!0,children:t(P,{children:t(W,{title:"My Attendance",subtitle:"View your attendance records and timesheet details",icon:t(O,{className:"w-8 h-8"}),variant:"default",children:n("div",{className:"p-6",children:[t(H,{stats:S,className:"mb-6"}),t("div",{className:"mb-6",children:t("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:t("div",{className:"w-full sm:w-auto sm:min-w-[200px]",children:t(J,{label:"Month/Year",type:"month",value:r.currentMonth,onChange:e=>F("currentMonth",e.target.value),startContent:t(f,{className:"w-4 h-4"}),variant:"bordered",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:b?"sm":"md"})})})}),n("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t(_,{title:n(c,{className:"flex items-center gap-3",children:[t(m,{className:"w-6 h-6 text-primary"}),t(z,{variant:"h5",component:"h1",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},fontWeight:600},children:"My Attendance Records"})]}),sx:{padding:"24px"}}),t(R,{}),t(I,{children:t(c,{sx:{maxHeight:"84vh",overflowY:"auto"},children:t(L,{selectedDate:p,handleDateChange:x,updateTimeSheet:v,externalFilterData:r},`${p}-${r.currentMonth}`)})})]})]})})})})})]})});U.layout=i=>t(T,{children:i});export{U as default};
