import{r as l,a,j as r,Q as ge,h as u,F as ye,b as k}from"./app-DDhVNfvV.js";import{u as B,F as be,G as we,d as _e,c as xe,B as w,A as ve}from"./App-CULBC9Jb.js";import{u as Ne,G as Ce,F as Fe}from"./GlassCard-B8deHOrc.js";import{P as Se}from"./PageHeader-qfMvUU9K.js";import{S as De}from"./StatsCards-CaEaffu4.js";import{u as O}from"./index-DlwYAVEC.js";import{m as E,a as L,b as U,c as j,d as G}from"./chunk-3BLMMOBU-CpY4Bk7j.js";import{F as q}from"./GlobeAltIcon-BeSAdHAC.js";import{F as Q}from"./ClockIcon-UBQM4q2z.js";import{F as He}from"./BuildingOfficeIcon-BXNAJj1w.js";import{F as ke}from"./PencilIcon-BtapQh-d.js";import{F as Oe}from"./TrashIcon-rGR8b_v2.js";import{F as Ae}from"./CheckCircleIcon-BkPxWqsz.js";import{F as Ye}from"./ExclamationTriangleIcon-3tpAB86s.js";import{F as Re}from"./FunnelIcon-BqiU4MFX.js";import{T as ze,B as Te}from"./logo-DoLGM3I0.js";import{d as W}from"./chunk-QPIV372F-CAhvMft5.js";import{t as V}from"./chunk-7ZZXWEXF-D8xxaoD-.js";import{c as h}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import{i as I}from"./chunk-6MDMHKHV-DNEscIMF.js";import{s as K,l as A}from"./chunk-2GIFKCNQ-B1Kwyu4F.js";import{t as $e,a as Me,b as Pe,c as Be,d as Ee,e as Le}from"./chunk-F3UDT23P-Bon0qFEG.js";import{t as Ue}from"./chunk-RIE4DNUQ-CQCaDTp2.js";import"./app-CYwLuuRk.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./UserIcon-BZDmR83e.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./KeyIcon-CAZJdP6I.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./XMarkIcon-CRGrHH6E.js";import"./useFormReset-Dv_1w4_q.js";import"./create-visual-element-DIA5r6xh.js";import"./chunk-D5XJWRAV-BEd1Mod5.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./useLabel-C1JBDqVQ.js";import"./useListState-D8r1zUCw.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./useHasTabbableChild-BMncZCCk.js";const je=({title:_,holidays:J,stats:n})=>{const Y=Ne(),f=B(Y.breakpoints.down("sm"));B(Y.breakpoints.down("md"));const[g,x]=l.useState(J),[m,R]=l.useState(""),[i,z]=l.useState(new Date().getFullYear().toString()),[T,X]=l.useState(!1),{isOpen:Z,onOpen:ee,onClose:ae}=O(),{isOpen:te,onOpen:re,onClose:oe}=O(),{isOpen:le,onOpen:ie,onClose:v}=O(),[o,y]=l.useState(null),[d,c]=l.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[$,b]=l.useState(!1),se=l.useMemo(()=>[{title:"Total Holidays",value:n.total_holidays,icon:a(q,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${n.this_year_holidays} this year`},{title:"Upcoming",value:n.upcoming_holidays,icon:a(Q,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:n.this_month_holidays,icon:a(be,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-n.total_holidays,icon:a(He,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-n.total_holidays)/365*100)}% of year`}],[n]),N=l.useMemo(()=>g.filter(e=>{const t=e.title.toLowerCase().includes(m.toLowerCase()),s=i==="all"||new Date(e.from_date).getFullYear().toString()===i;return t&&s}),[g,m,i]),ne=l.useMemo(()=>[...new Set(g.map(t=>new Date(t.from_date).getFullYear()))].sort((t,s)=>s-t),[g]),C=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],de=async()=>{b(!0);try{const e=o?await k.put(route("holiday.update",o.id),d):await k.post(route("holiday.store"),d);e.data.success&&(x(o?t=>t.map(s=>s.id===o.id?e.data.holiday:s):t=>[...t,e.data.holiday]),w.success(o?"Holiday updated successfully!":"Holiday created successfully!"),F())}catch{w.error("Failed to save holiday. Please try again.")}finally{b(!1)}},ce=async()=>{if(o){b(!0);try{await k.delete(route("holiday.destroy",o.id)),x(e=>e.filter(t=>t.id!==o.id)),w.success("Holiday deleted successfully!"),v(),y(null)}catch{w.error("Failed to delete holiday. Please try again.")}finally{b(!1)}}},F=()=>{ae(),oe(),y(null),c({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},me=e=>{y(e),c({title:e.title,from_date:e.from_date,to_date:e.to_date,description:e.description||"",type:e.type||"public",is_recurring:e.is_recurring||!1}),re()},pe=e=>{y(e),ie()},ue=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],he=l.useCallback((e,t)=>{const s=e[t],p=new Date(e.from_date),S=new Date(e.to_date),M=Math.ceil((S-p)/(1e3*60*60*24))+1,D=p>new Date,H=p<=new Date&&S>=new Date;switch(t){case"title":return r("div",{className:"flex flex-col",children:[a("p",{className:"text-bold text-small capitalize",children:e.title}),e.description&&a("p",{className:"text-bold text-tiny capitalize text-default-400",children:e.description})]});case"dates":return r("div",{className:"flex flex-col",children:[a("span",{className:"text-small",children:p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:p.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),e.from_date!==e.to_date&&r("span",{className:"text-tiny text-default-400",children:["to ",S.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return r(h,{size:"sm",variant:"flat",children:[M," ",M===1?"day":"days"]});case"type":const P=C.find(fe=>fe.key===e.type)||C[0];return a(h,{size:"sm",color:P.color,variant:"flat",children:P.label});case"status":return a(h,{size:"sm",color:H?"success":D?"warning":"default",variant:"flat",startContent:H?a(Ae,{className:"w-3 h-3"}):D?a(Q,{className:"w-3 h-3"}):a(Ye,{className:"w-3 h-3"}),children:H?"Ongoing":D?"Upcoming":"Past"});case"actions":return r("div",{className:"relative flex items-center gap-2",children:[a(V,{content:"Edit holiday",children:a("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>me(e),children:a(ke,{className:"w-4 h-4"})})}),a(V,{color:"danger",content:"Delete holiday",children:a("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>pe(e),children:a(Oe,{className:"w-4 h-4"})})})]});default:return s}},[]);return r(ye,{children:[a(ge,{title:_}),a(Te,{sx:{display:"flex",justifyContent:"center",p:2},children:a(we,{in:!0,timeout:800,children:a(Ce,{children:a(Se,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:a(q,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:f?"Add":"Add Holiday",icon:a(xe,{className:"w-4 h-4"}),onClick:ee,className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:r("div",{className:"p-4 sm:p-6",children:[a(De,{stats:se,className:"mb-6"}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[a("div",{className:"flex-1",children:a(I,{label:"Search Holidays",variant:"bordered",placeholder:"Search by holiday name...",value:m,onValueChange:R,startContent:a(_e,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:f?"sm":"md"})}),r("div",{className:"flex gap-2 items-end",children:[r(K,{label:"Year",variant:"bordered",selectedKeys:[i],onSelectionChange:e=>z(Array.from(e)[0]),className:"w-32",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[a(A,{value:"all",children:"All Years"},"all"),ne.map(e=>a(A,{value:e.toString(),children:e},e.toString()))]}),r(u,{isIconOnly:f,variant:"bordered",onPress:()=>X(!T),className:T?"bg-purple-500/20":"bg-white/5",children:[a(Re,{className:"w-4 h-4"}),!f&&a("span",{className:"ml-1",children:"Filters"})]})]})]}),(m||i!==new Date().getFullYear().toString())&&a(Fe,{in:!0,timeout:300,children:r("div",{className:"mb-4 flex flex-wrap gap-2",children:[m&&r(h,{variant:"flat",color:"primary",size:"sm",onClose:()=>R(""),children:["Search: ",m]}),i!==new Date().getFullYear().toString()&&r(h,{variant:"flat",color:"secondary",size:"sm",onClose:()=>z(new Date().getFullYear().toString()),children:["Year: ",i==="all"?"All Years":i]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[a("div",{className:"p-4 border-b border-white/10",children:r(ze,{variant:"h6",className:"font-semibold text-foreground",children:["Company Holidays",r("span",{className:"text-sm text-default-500 ml-2",children:["(",N.length," ",N.length===1?"holiday":"holidays",")"]})]})}),r($e,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[a(Me,{columns:ue,children:e=>a(Pe,{align:e.uid==="actions"?"center":"start",children:e.name},e.uid)}),a(Be,{items:N,children:e=>a(Ee,{children:t=>a(Le,{children:he(e,t)})},e.id)})]})]})]})})})})}),a(G,{isOpen:Z||te,onClose:F,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b-[1px] border-[#292f46]",footer:"border-t-[1px] border-[#292f46]"},children:r(E,{children:[a(L,{className:"flex flex-col gap-1",children:o?"Edit Holiday":"Add New Holiday"}),r(U,{children:[r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a(I,{label:"Holiday Title",placeholder:"Enter holiday name",value:d.title,onChange:e=>c(t=>({...t,title:e.target.value})),isRequired:!0}),a(K,{label:"Holiday Type",selectedKeys:[d.type],onSelectionChange:e=>c(t=>({...t,type:Array.from(e)[0]})),children:C.map(e=>a(A,{value:e.key,children:e.label},e.key))}),a(W,{label:"From Date",value:d.from_date,onChange:e=>c(t=>({...t,from_date:e})),isRequired:!0}),a(W,{label:"To Date",value:d.to_date,onChange:e=>c(t=>({...t,to_date:e})),isRequired:!0})]}),a(Ue,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:d.description,onChange:e=>c(t=>({...t,description:e.target.value})),rows:3})]}),r(j,{children:[a(u,{color:"danger",variant:"light",onPress:F,children:"Cancel"}),a(u,{color:"primary",onPress:de,isLoading:$,children:o?"Update Holiday":"Add Holiday"})]})]})}),a(G,{isOpen:le,onClose:v,size:"md",backdrop:"blur",children:r(E,{children:[a(L,{className:"flex flex-col gap-1",children:"Confirm Delete"}),r(U,{children:[r("p",{children:['Are you sure you want to delete the holiday "',o==null?void 0:o.title,'"?']}),a("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),r(j,{children:[a(u,{color:"default",variant:"light",onPress:v,children:"Cancel"}),a(u,{color:"danger",onPress:ce,isLoading:$,children:"Delete Holiday"})]})]})})]})};je.layout=_=>a(ve,{children:_});export{je as default};
