import{J as I,x as L,r as c,b as V,j as a,a as e,Q as Y,A as S,c as z,F as w,t as h}from"./app-DDhVNfvV.js";import{A as B}from"./AuthLayout-Cp3HghuQ.js";import{B as M}from"./Button-CFwZKY9U.js";import{C as Q}from"./Checkbox-CktAvFwq.js";import{F as T}from"./BuildingOfficeIcon-BXNAJj1w.js";import{m as r}from"./GlassCard-B8deHOrc.js";import{F as J}from"./CheckCircleIcon-BkPxWqsz.js";import{F as K}from"./EnvelopeIcon-jGHS91X9.js";import{F as _}from"./UserIcon-BZDmR83e.js";import{F as G}from"./InformationCircleIcon-D0VUrEF1.js";import{F as O}from"./EyeSlashIcon-BVaW8PT4.js";import{F as X}from"./EyeIcon-B-1DdV8E.js";import{F as Z}from"./LockClosedIcon-CNT0kaEE.js";import{T as ee}from"./logo-DoLGM3I0.js";import{i as A}from"./chunk-6MDMHKHV-DNEscIMF.js";import"./app-CYwLuuRk.js";import"./create-visual-element-DIA5r6xh.js";import"./index-I7bPq2YP.js";import"./useFormReset-Dv_1w4_q.js";import"./useLabel-C1JBDqVQ.js";import"./useLabels-Blg_QI1U.js";import"./chunk-M3MASYO7-DaLySJZS.js";function Ce({status:d,canResetPassword:E}){var F,C,R;const{props:te}=I(),{data:l,setData:f,post:$,processing:y,errors:m,reset:P}=L({email:"",password:"",remember:!1}),[W,k]=c.useState(!1),[x,D]=c.useState(!1),[n,v]=c.useState(null),[U,N]=c.useState(!1),[u,g]=c.useState(!1),i=()=>{if(typeof window>"u")return!1;const t=window.location.hostname,o=window.location.pathname;return t==="127.0.0.1"||t==="localhost"?o.startsWith("/tenant/"):!["aero-hr.com","aero-hr.local","aero.com"].includes(t)},s=(()=>{if(!i())return null;const t=window.location.hostname,o=window.location.pathname;if(t==="127.0.0.1"||t==="localhost"){const b=o.match(/\/tenant\/([^\/]+)/);return b?{domain:b[1],name:b[1]}:null}const p=t.split(".");return p.length>=3?{domain:p[0],name:p[0]}:null})(),j=()=>i()&&s?route("tenant.password.request",{tenant:s.domain}):route("central.password.request");c.useEffect(()=>{if(d){k(!0);const t=setTimeout(()=>k(!1),8e3);return()=>clearTimeout(t)}},[d]),c.useEffect(()=>{if(!i()&&l.email&&l.email.includes("@")){const t=setTimeout(()=>{q(l.email)},500);return()=>clearTimeout(t)}else v(null)},[l.email]);const q=async t=>{if(!(!t||!t.includes("@"))){N(!0);try{const o=await V.post(route("check-user-type"),{email:t});v(o.data)}catch(o){console.error("Error checking user type:",o)}finally{N(!1)}}},H=t=>{t.preventDefault(),g(!0);const o=i()&&s?route("tenant.login.store",{tenant:s.domain}):route("central.login.store");$(o,{onFinish:()=>{P("password"),g(!1)},onSuccess:()=>{},onError:()=>{g(!1)}})};return a(B,{title:i()?`Welcome back to ${(s==null?void 0:s.name)||"Your Company"}`:"Welcome back",children:[e(Y,{title:"Log in"}),i()&&s&&e(r.div,{className:"mb-6 p-4 rounded-xl border bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:a("div",{className:"flex items-center",children:[e(T,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3"}),a("div",{children:[a("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[s.name," Employee Portal"]}),e("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Sign in with your company credentials"})]})]})}),e(S,{children:d&&W&&e(r.div,{className:"mb-6 p-4 rounded-xl border",style:{background:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.3)",backdropFilter:"blur(10px)"},initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.4,type:"spring"},children:a("div",{className:"flex items-center",children:[e(r.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:500},children:e(J,{className:"w-5 h-5 text-green-500"})}),e("div",{className:"ml-3",children:e(r.p,{className:"text-sm font-medium text-green-800",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.3},children:d})})]})})}),a("form",{onSubmit:H,className:"auth-form-spacing",children:[e(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:a("div",{className:"relative",children:[e(A,{type:"email",label:"Email address",placeholder:"Enter your email",value:l.email,onChange:t=>f("email",t.target.value),isInvalid:!!m.email,errorMessage:m.email,autoComplete:"username",autoFocus:!0,required:!0,startContent:e(K,{className:"w-4 h-4 text-default-400 pointer-events-none flex-shrink-0"}),endContent:U&&e(z,{className:"w-4 h-4 text-default-400 animate-spin"}),classNames:{base:"w-full",mainWrapper:"w-full",input:["bg-transparent","text-black dark:text-white","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-200/50","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-200/70","dark:hover:bg-default/70","group-data-[focused=true]:bg-default-200/50","dark:group-data-[focused=true]:bg-default/60","!cursor-text"]}}),e(S,{children:!i()&&n&&e(r.div,{className:"mt-2 p-3 rounded-lg border",style:{background:n.type==="tenant"?"rgba(59, 130, 246, 0.1)":"rgba(34, 197, 94, 0.1)",borderColor:n.type==="tenant"?"rgba(59, 130, 246, 0.3)":"rgba(34, 197, 94, 0.3)"},initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.3},children:a("div",{className:"flex items-start",children:[e("div",{className:"flex-shrink-0",children:n.type==="tenant"?e(T,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5"}):n.type==="central"?e(_,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5"}):e(G,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 mt-0.5"})}),e("div",{className:"ml-2",children:n.type==="tenant"?a(w,{children:[e("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Employee Account Detected"}),a("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:["You'll be redirected to ",(F=n.tenant)==null?void 0:F.name," after signing in"]}),a("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Portal: ",(C=n.tenant)==null?void 0:C.domain,".aero-hr.com"]})]}):n.type==="central"?a(w,{children:[e("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Admin Account Detected"}),e("p",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:"You'll access the admin dashboard"})]}):a(w,{children:[e("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Account Not Found"}),a("p",{className:"text-xs text-gray-700 dark:text-gray-300 mt-1",children:["Please check your email or ",e(h,{href:route("register"),className:"text-blue-600 hover:underline",children:"create an account"})]})]})})]})})})]})}),e(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e(A,{type:x?"text":"password",label:"Password",placeholder:"Enter your password",value:l.password,onChange:t=>f("password",t.target.value),isInvalid:!!m.password,errorMessage:m.password,autoComplete:"current-password",required:!0,startContent:e(Z,{className:"w-4 h-4 text-default-400 pointer-events-none flex-shrink-0"}),endContent:e("button",{className:"focus:outline-none",type:"button",onClick:()=>D(!x),children:x?e(O,{className:"w-4 h-4 text-default-400 pointer-events-none"}):e(X,{className:"w-4 h-4 text-default-400 pointer-events-none"})}),classNames:{base:"w-full",mainWrapper:"w-full",input:["bg-transparent","text-black dark:text-white","placeholder:text-default-700/50 dark:placeholder:text-white/60"],innerWrapper:"bg-transparent",inputWrapper:["shadow-xl","bg-default-200/50","dark:bg-default/60","backdrop-blur-xl","backdrop-saturate-200","hover:bg-default-200/70","dark:hover:bg-default/70","group-data-[focused=true]:bg-default-200/50","dark:group-data-[focused=true]:bg-default/60","!cursor-text"]}})}),a(r.div,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e(Q,{checked:l.remember,onChange:t=>f("remember",t.target.checked),label:"Remember me",description:"Keep me signed in for 30 days"}),E&&e(r.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e(h,{href:j(),className:"text-sm font-medium transition-colors duration-200 hover:underline",style:{color:"var(--theme-primary)"},children:"Forgot password?"})})]}),e(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e(M,{type:"submit",variant:"primary",size:"lg",className:"w-full",loading:y||u,disabled:y||u,children:y||u?u&&!i()&&(n==null?void 0:n.type)==="tenant"?`Redirecting to ${(R=n.tenant)==null?void 0:R.name}...`:"Signing in...":i()?"Sign in to Company Portal":"Sign in"})}),e(r.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:i()?a("div",{className:"space-y-2",children:[a("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Not an employee of ",s==null?void 0:s.name,"?"]}),e(r.span,{whileHover:{scale:1.05},className:"inline-block",children:e(h,{href:"/",className:"text-sm font-medium transition-colors duration-200 hover:underline",style:{color:"var(--theme-primary)"},children:"Visit main site to register your company"})})]}):a("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Don't have an account?"," ",e(r.span,{whileHover:{scale:1.05},className:"inline-block",children:e(h,{href:route("register"),className:"font-medium transition-colors duration-200 hover:underline",style:{color:"var(--theme-primary)"},children:"Sign up here"})})]})}),e(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:1.2},className:"mt-3",children:e(ee,{variant:"caption",color:"text.secondary",textAlign:"center",display:"block",sx:{opacity:.6,fontSize:{xs:"0.65rem",sm:"0.7rem"}},children:"Â© 2025 Emam Hosen. All rights reserved."})})]})]})}export{Ce as default};
