import{V as D,j as l,a as e,M as A,F}from"./app-Bk6T6a1Z.js";import{r as t,e as O,h as H,a as m,G as p,B as i,T as c,D as N,t as V}from"./vendor-CTZgMKHz.js";import{G as P,A as q}from"./App-1aAsQhD1.js";import{L as J}from"./LeaveEmployeeTable-DW8c8jNb.js";import"./GlassDialog-BGU4oX6I.js";import{d as K}from"./dayjs.min-CfzcSMzt.js";import{i as Q}from"./chunk-JZOL6GD7-CZj75rmD.js";import"./Edit-D8i8ckpX.js";import"./chunk-7H6JMIKS-MYaz1G54.js";import"./chunk-YBBOLEEC-Bbk1ElHq.js";import"./chunk-NCVCYSZZ-C3ruttWu.js";import"./chunk-7F3ZLNJ6-BN_r0i0A.js";import"./chunk-YRZGWF2W-O0Jeb4rD.js";import"./chunk-CKQ4RPMV-DBgpTSea.js";import"./chunk-MT6723RH-DFz_3CUc.js";import"./chunk-LY4WDGUU-BvaK1Llp.js";import"./chunk-TLBGAR4N-VqrslCk4.js";const W=({title:u,allUsers:j})=>{var E;const{auth:d}=D().props;D();const[h,B]=t.useState([]),[r,I]=t.useState([]),[X,g]=t.useState(null),[Z,T]=t.useState(0),[$,U]=t.useState(0),[ee,v]=t.useState(null),[x,te]=t.useState(""),[y,_]=t.useState(K().year()),[C,ae]=t.useState(30),[S,se]=t.useState(1),[re,G]=t.useState(),[L,b]=t.useState(""),[M,f]=t.useState(!1),w=a=>g(a),R=t.useCallback((a,n)=>{v(a),g(n)},[]);t.useCallback(()=>{g(null),v(null)},[]);const Y=a=>{_(a.target.value)},k=async()=>{var a,n;try{const s=await axios.get(route("leaves.paginate"),{params:{page:S,perPage:C,employee:x,year:y}});if(console.log(s),s.status===200){const{leaves:o,leavesData:z}=s.data;B(o.data),I(z),T(o.total),U(o.last_page),b(!1),f(!1)}}catch(s){console.error("Error fetching leaves data:",s),b(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Error retrieving data."),f(!1)}};return t.useEffect(()=>{f(!0),console.log("User Effect Running"),k()},[y,S,C,x]),l(F,{children:[e(A,{title:u}),e(i,{sx:{display:"flex",justifyContent:"center",p:2},children:e(O,{in:!0,children:l(P,{children:[e(H,{title:"Leaves",sx:{padding:"24px"}}),e(m,{children:e(p,{container:!0,spacing:2,children:e(p,{item:!0,xs:12,sm:6,md:4,children:e(Q,{label:"Select Year",type:"year",variant:"bordered",onChange:Y,value:y})})})}),e(m,{children:e(p,{container:!0,spacing:2,children:(E=r==null?void 0:r.leaveTypes)==null?void 0:E.map(a=>{var n,s;return e(p,{item:!0,xs:12,sm:6,md:3,children:e(P,{children:e(m,{children:l(i,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center",children:[e(c,{variant:"h6",sx:{mb:2,fontSize:{xs:"1rem",sm:"1.25rem",md:"1.5rem",lg:"1.75rem"}},children:a.type}),l(i,{display:"flex",alignItems:"center",children:[l(i,{children:["Used:",e(c,{variant:"h4",sx:{fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"}},children:r.leaveCountsByUser[d.user.id]?(n=r.leaveCountsByUser[d.user.id].find(o=>o.leave_type===a.type))==null?void 0:n.days_used:0})]}),e(N,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),l(i,{children:["Remaining:",e(c,{variant:"h4",sx:{fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"}},children:r.leaveCountsByUser[d.user.id]?(s=r.leaveCountsByUser[d.user.id].find(o=>o.leave_type===a.type))==null?void 0:s.remaining_days:0})]})]})]})})})},a.type)})})}),e(m,{children:M?l(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:[e(V,{sx:{p:1}}),e(c,{variant:"body1",align:"center",children:"Loading leaves data..."})]}):h&&h.length>0?e(J,{handleClickOpen:R,setCurrentLeave:G,openModal:w,leaves:h,allUsers:j}):L?e(c,{variant:"body1",align:"center",children:L}):e(c,{variant:"body1",align:"center",children:"No leaves data found."})})]})})})]})};W.layout=u=>e(q,{children:u});export{W as default};
