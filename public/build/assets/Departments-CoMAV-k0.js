import{r as d,b as a,j as e,J as Pe,s as He,h as E,F as ge,a as Y,Q as Ve,e as Qe,c as qe}from"./app-ICdw8XZW.js";import{T as _,aN as W,as as Ue,at as Je,au as Z,av as Ke,o as Se,m as A,h as ae,ax as Fe,u as ke,a as te,aO as Ie,I as Te,f as P,q as ve,aP as Ze,aQ as Xe,n as T,B as re,am as ea,G as aa,e as ta,i as ra,ai as sa,aA as la,R as na,A as oa}from"./App-xKIEJnfh.js";import{P as ia}from"./PageHeader-C-n7yLRm.js";import{S as da}from"./StatsCards-D7x2ogj2.js";import{d as oe}from"./dayjs.min-CTpDfE_v.js";import{F as xe}from"./EyeIcon-Cq2msZB0.js";import{a as se,F as ca}from"./PencilIcon-BoMELbc6.js";import{F as we}from"./TrashIcon-6Qn0Ks3i.js";import{F as le}from"./CheckCircleIcon-9uvhSzaX.js";import{F as ne}from"./XCircleIcon-CDAj9LiC.js";import{F as Ae}from"./MapPinIcon-Pq5R6yZz.js";import{a as ma,b as ha,c as ua,d as pa,e as fa,t as ba}from"./chunk-F3UDT23P-Dzih6ugh.js";import{p as Ee}from"./chunk-O5I3QTYU-JuO97IC0.js";import{t as X}from"./chunk-7ZZXWEXF-UZIMEnKN.js";import{u as ga}from"./chunk-R6AK6OQ4-e2LNdSxP.js";import{D as Re}from"./DialogTitle-FtEY60tO.js";import{D as V}from"./Divider-DCc_5i-_.js";import{T as L,F as ee}from"./TextField-gRWRJFLH.js";import{I as Ne}from"./InputLabel-l_RaM-SP.js";import{S as ye}from"./Select-CqGdc7ri.js";import{M as H}from"./MenuItem-Cz-a5JZM.js";import{a as Me,b as Be,D as $e}from"./DialogContent-C99NR7Vt.js";import{B as Q}from"./Button-ePhGwwaI.js";import{F as va}from"./ExclamationTriangleIcon-C5VlXpkt.js";import{A as _e}from"./Alert-D4N9cznb.js";import{C as Oe}from"./CircularProgress-CRTMx9g5.js";import{F as xa}from"./PlusIcon-DdUPUHsP.js";import{F as wa}from"./DocumentArrowDownIcon-fIHqZNSI.js";import{b as Na,F as ya}from"./AdjustmentsHorizontalIcon-CAmh_VFc.js";import{F as _a}from"./TableCellsIcon-JXzDIW--.js";import{s as De,l as z}from"./chunk-2GIFKCNQ-r13Ot1aH.js";import"./app-CA3O2NZp.js";import"./chunk-D5XJWRAV-ChYyTb80.js";import"./chunk-MZRCPRP2-CuDTLPCF.js";import"./LiveAnnouncer-QpWtHmnK.js";import"./useHasTabbableChild-C1gNMPSd.js";import"./chunk-7F3ZLNJ6-bb6GUB3a.js";import"./index-CokAva9Y.js";import"./dividerClasses-lSRERl2-.js";import"./Popover-Cy1RIh6q.js";import"./List-96IwU692.js";import"./listItemTextClasses-CGb7pYu3.js";import"./useSlot-BsD0OkWG.js";import"./chunk-2PG5BJX6-BKh2F0Oz.js";function Da({title:p,titleId:o,...x},s){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":o},x),p?d.createElement("title",{id:o},p):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"}))}const Ca=d.forwardRef(Da),Pa=({message:p="No data available",description:o="Try adjusting your search or filters",icon:x=null})=>a("div",{className:"text-center py-8",children:[e("div",{className:"mx-auto mb-2",children:x||e(Ca,{className:"w-12 h-12 mx-auto text-default-300"})}),e(_,{variant:"body1",color:"textSecondary",children:p}),o&&e(_,{variant:"caption",color:"textSecondary",children:o})]}),Sa=({departments:p,onEdit:o,onDelete:x,onView:s,loading:g,isMobile:c,isTablet:w,pagination:b,onPageChange:n,onRowsPerPageChange:k,canEditDepartment:l=!1,canDeleteDepartment:D=!1})=>{var I,R;const{auth:C}=Pe().props,m=l||((I=C.permissions)==null?void 0:I.includes("departments.update"))||!1,f=D||((R=C.permissions)==null?void 0:R.includes("departments.delete"))||!1,N=d.useMemo(()=>[{name:"DEPARTMENT",uid:"name"},{name:"CODE",uid:"code",hide:c},{name:"MANAGER",uid:"manager"},{name:"EMPLOYEES",uid:"employees"},{name:"LOCATION",uid:"location",hide:c},{name:"STATUS",uid:"status"},{name:"ESTABLISHED",uid:"established",hide:c||w},{name:"ACTIONS",uid:"actions"}].filter(y=>!y.hide),[c,w]),i=(r,y)=>{switch(y){case"name":return e(ga,{avatarProps:{radius:"lg",fallback:e(Fe,{className:"w-4 h-4"}),size:c?"sm":"md"},name:r.name,description:r.parent?r.parent.name:"Top-level department",classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}});case"code":return e("div",{children:r.code?e(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",children:r.code}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"manager":return e("div",{children:r.manager?a("div",{className:"flex flex-col",children:[e("span",{className:"text-sm",children:r.manager.name}),!c&&r.manager.email&&e("span",{className:"text-xs text-default-400",children:r.manager.email})]}):e("span",{className:"text-default-400 text-xs",children:"Not assigned"})});case"employees":return a("div",{className:"flex items-center gap-2",children:[e(ae,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.employee_count||0})]});case"location":return e("div",{className:"flex items-center gap-2",children:r.location?a(ge,{children:[e(Ae,{className:"w-4 h-4 text-default-400"}),e("span",{children:r.location})]}):e("span",{className:"text-default-400 text-xs",children:"-"})});case"status":return e(A,{size:"sm",variant:r.is_active?"solid":"bordered",color:r.is_active?"success":"danger",startContent:r.is_active?e(le,{className:"w-3 h-3"}):e(ne,{className:"w-3 h-3"}),children:r.is_active?"Active":"Inactive"});case"established":return a("div",{className:"flex items-center gap-2",children:[e(Se,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-sm",children:r.established_date?oe(r.established_date).format("MMM D, YYYY"):e("span",{className:"text-default-400 text-xs",children:"-"})})]});case"actions":return e("div",{className:"flex justify-end items-center",children:c?a(Ke,{children:[e(Ue,{children:e(E,{isIconOnly:!0,size:"sm",variant:"light",children:e(ca,{className:"w-4 h-4"})})}),a(Je,{"aria-label":"Department actions",children:[e(Z,{startContent:e(xe,{className:"w-4 h-4"}),onPress:()=>s(r),children:"View Details"},"view"),m&&e(Z,{startContent:e(se,{className:"w-4 h-4"}),onPress:()=>o(r),children:"Edit Department"},"edit"),f&&e(Z,{className:"text-danger",color:"danger",startContent:e(we,{className:"w-4 h-4"}),isDisabled:r.employee_count>0,onPress:()=>x(r),children:"Delete Department"},"delete")]})]}):a(ge,{children:[e(X,{content:"View Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:()=>s(r),children:e(xe,{className:"w-4 h-4"})})}),m&&e(X,{content:"Edit Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-blue-500",onPress:()=>o(r),children:e(se,{className:"w-4 h-4"})})}),f&&e(X,{content:r.employee_count>0?"Cannot delete department with employees":"Delete Department",children:e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-danger",isDisabled:r.employee_count>0,onPress:()=>x(r),children:e(we,{className:"w-4 h-4"})})})]})});default:return e("span",{children:r[y]})}},B=()=>!p||!p.data||g?null:a("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10",children:[a("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(b.currentPage-1)*b.perPage+1," to ",Math.min(b.currentPage*b.perPage,p.total)," of ",p.total," departments"]}),e(Ee,{total:Math.ceil(p.total/b.perPage),initialPage:b.currentPage,page:b.currentPage,onChange:n,size:c?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]});return!g&&(!p||!p.data||p.data.length===0)?e("div",{className:"w-full",children:e(Pa,{message:"No departments found",icon:e(W,{className:"w-12 h-12 text-default-300"}),description:"Try adjusting your search or filters"})}):e("div",{className:"w-full",children:a(ba,{"aria-label":"Departments table",removeWrapper:!0,classNames:{base:"bg-transparent",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs",td:"border-b border-white/5 py-3"},bottomContent:B(),children:[e(ma,{columns:N,children:r=>e(ha,{children:r.name},r.uid)}),e(ua,{items:p.data||[],emptyContent:!g&&"No departments found",loadingContent:e(He,{}),isLoading:g,children:r=>e(pa,{children:y=>e(fa,{children:i(r,y)})},r.id)})]})})},Ce=({open:p,onClose:o,onSuccess:x,department:s=null,managers:g=[],parentDepartments:c=[]})=>{var B,I,R,r,y;const w=ke(),b=te(w.breakpoints.down("md")),[n,k]=d.useState(!1),[l,D]=d.useState({}),C={name:"",code:"",description:"",parent_id:null,manager_id:null,location:"",is_active:!0,established_date:""},[m,f]=d.useState(C);d.useEffect(()=>{f(s?{name:s.name||"",code:s.code||"",description:s.description||"",parent_id:s.parent_id||null,manager_id:s.manager_id||null,location:s.location||"",is_active:s.is_active??!0,established_date:s.established_date?oe(s.established_date).format("YYYY-MM-DD"):""}:C),D({})},[s,p]);const N=u=>{const{name:S,value:h,type:F,checked:G}=u.target;f(M=>({...M,[S]:F==="checkbox"?G:h})),l[S]&&D(M=>({...M,[S]:null}))},i=async()=>{var u,S;k(!0),D({});try{const h={...m,established_date:m.established_date||null};let F;s!=null&&s.id?(F=await Y.put(`/departments/${s.id}`,h),T.success("Department updated successfully")):(F=await Y.post("/departments",h),T.success("Department created successfully")),x(F.data.department),o()}catch(h){if(console.error("Error saving department:",h),(S=(u=h.response)==null?void 0:u.data)!=null&&S.errors){D(h.response.data.errors);const F=Object.values(h.response.data.errors)[0];F&&T.error(F[0])}else T.error("An error occurred while saving the department")}finally{k(!1)}};return a($e,{open:p,onClose:n?void 0:o,maxWidth:"md",fullWidth:!0,fullScreen:b,"aria-labelledby":"department-form-dialog",children:[a(Re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e(_,{variant:"h6",component:"div",children:s?"Edit Department":"Create New Department"}),e(Te,{edge:"end",color:"inherit",onClick:o,disabled:n,"aria-label":"close",children:e(Ie,{className:"w-5 h-5"})})]}),e(V,{}),e(Me,{sx:{pt:2},children:a(P,{container:!0,spacing:3,children:[e(P,{item:!0,xs:12,children:e(_,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Basic Information"})}),e(P,{item:!0,xs:12,md:6,children:e(L,{name:"name",label:"Department Name",fullWidth:!0,required:!0,value:m.name,onChange:N,error:!!l.name,helperText:((B=l.name)==null?void 0:B[0])||"",disabled:n})}),e(P,{item:!0,xs:12,md:6,children:e(L,{name:"code",label:"Department Code",fullWidth:!0,value:m.code||"",onChange:N,error:!!l.code,helperText:((I=l.code)==null?void 0:I[0])||"Unique identifier (e.g., HR001, FIN002)",disabled:n})}),e(P,{item:!0,xs:12,children:e(L,{name:"description",label:"Description",fullWidth:!0,multiline:!0,rows:3,value:m.description||"",onChange:N,error:!!l.description,helperText:((R=l.description)==null?void 0:R[0])||"",disabled:n})}),e(P,{item:!0,xs:12,sx:{mt:2},children:e(_,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:"Organizational Information"})}),e(P,{item:!0,xs:12,md:6,children:a(ve,{fullWidth:!0,error:!!l.parent_id,children:[e(Ne,{id:"parent-department-label",children:"Parent Department"}),a(ye,{labelId:"parent-department-label",name:"parent_id",value:m.parent_id||"",onChange:N,label:"Parent Department",disabled:n,children:[e(H,{value:"",children:e("em",{children:"None (Top-Level Department)"})}),c.map(u=>(s==null?void 0:s.id)!==u.id&&e(H,{value:u.id,children:u.name},u.id))]}),l.parent_id&&e(ee,{children:l.parent_id[0]})]})}),e(P,{item:!0,xs:12,md:6,children:a(ve,{fullWidth:!0,error:!!l.manager_id,children:[e(Ne,{id:"manager-label",children:"Department Manager"}),a(ye,{labelId:"manager-label",name:"manager_id",value:m.manager_id||"",onChange:N,label:"Department Manager",disabled:n,children:[e(H,{value:"",children:e("em",{children:"Not Assigned"})}),g.map(u=>e(H,{value:u.id,children:u.name},u.id))]}),l.manager_id&&e(ee,{children:l.manager_id[0]})]})}),e(P,{item:!0,xs:12,md:6,children:e(L,{name:"location",label:"Location",fullWidth:!0,value:m.location||"",onChange:N,error:!!l.location,helperText:((r=l.location)==null?void 0:r[0])||"Physical location of the department",disabled:n})}),e(P,{item:!0,xs:12,md:6,children:e(L,{name:"established_date",label:"Established Date",type:"date",fullWidth:!0,value:m.established_date||"",onChange:N,error:!!l.established_date,helperText:((y=l.established_date)==null?void 0:y[0])||"",disabled:n,InputLabelProps:{shrink:!0}})}),a(P,{item:!0,xs:12,children:[e(Ze,{control:e(Xe,{checked:m.is_active,onChange:N,name:"is_active",color:"success",disabled:n}),label:"Department is active"}),l.is_active&&e(ee,{error:!0,children:l.is_active[0]})]})]})}),e(V,{}),a(Be,{sx:{px:3,py:2},children:[e(Q,{onClick:o,disabled:n,color:"inherit",children:"Cancel"}),e(Q,{onClick:i,variant:"contained",color:"primary",disabled:n,children:n?"Saving...":s?"Update Department":"Create Department"})]})]})},Fa=({open:p,onClose:o,onSuccess:x,department:s})=>{const[g,c]=d.useState(!1),[w,b]=d.useState(null),n=async()=>{var k,l,D,C;if(s){c(!0),b(null);try{await Y.delete(`/departments/${s.id}`),T.success("Department deleted successfully"),x(),o()}catch(m){if(console.error("Error deleting department:",m),(l=(k=m.response)==null?void 0:k.data)!=null&&l.message)b(m.response.data.message),T.error(m.response.data.message);else if((C=(D=m.response)==null?void 0:D.data)!=null&&C.errors){const f=Object.values(m.response.data.errors)[0];b(f),T.error(f)}else b("An error occurred while deleting the department"),T.error("An error occurred while deleting the department")}finally{c(!1)}}};return s?a($e,{open:p,onClose:g?void 0:o,maxWidth:"sm",fullWidth:!0,"aria-labelledby":"delete-department-dialog",children:[a(Re,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(_,{variant:"h6",children:"Delete Department"}),e(Te,{edge:"end",color:"inherit",onClick:o,disabled:g,"aria-label":"close",children:e(Ie,{className:"w-5 h-5"})})]}),e(V,{}),e(Me,{children:a(re,{sx:{display:"flex",flexDirection:"column",gap:2},children:[a(re,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(va,{className:"w-8 h-8 text-yellow-500"}),a(_,{variant:"body1",children:["Are you sure you want to delete the department ",e("strong",{children:s.name}),"?"]})]}),s.employee_count>0&&a(_e,{severity:"warning",sx:{mt:2},children:["This department has ",s.employee_count," employees assigned to it. You cannot delete a department with active employees. Please reassign these employees to other departments first."]}),w&&e(_e,{severity:"error",sx:{mt:2},children:w}),e(_,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"This action cannot be undone. All associated data will be permanently removed."})]})}),e(V,{}),a(Be,{sx:{px:3,py:2},children:[e(Q,{onClick:o,disabled:g,color:"inherit",children:"Cancel"}),e(Q,{onClick:n,variant:"contained",color:"error",disabled:g||s.employee_count>0,startIcon:g&&e(Oe,{size:20,color:"inherit"}),children:g?"Deleting...":"Delete Department"})]})]}):null},xt=({title:p,departments:o,managers:x,parentDepartments:s,stats:g,filters:c})=>{var ce,me,he,ue,pe,fe;const{auth:w}=Pe().props,b=ke(),n=te(b.breakpoints.down("sm")),k=te(b.breakpoints.down("md")),[l,D]=d.useState(o||{data:[]}),[C,m]=d.useState(!1),[f,N]=d.useState({type:null,department:null}),[i,B]=d.useState({search:(c==null?void 0:c.search)||"",status:(c==null?void 0:c.status)||"all",parentDepartment:(c==null?void 0:c.parentDepartment)||"all"}),[I,R]=d.useState(!1),[r,y]=d.useState("table"),[u,S]=d.useState({currentPage:(o==null?void 0:o.current_page)||1,perPage:(o==null?void 0:o.per_page)||10}),[h,F]=d.useState(g||{total:0,active:0,inactive:0,parent_departments:0}),G=((ce=w.permissions)==null?void 0:ce.includes("departments.create"))||!1,M=((me=w.permissions)==null?void 0:me.includes("departments.update"))||!1,q=((he=w.permissions)==null?void 0:he.includes("departments.delete"))||!1,je=M||((ue=w.permissions)==null?void 0:ue.includes("departments.update"))||!1;q||(pe=w.permissions)!=null&&pe.includes("departments.delete");const U=d.useCallback(async()=>{m(!0);try{const t=await Y.get(route("api.departments"),{params:{page:u.currentPage,per_page:u.perPage,search:i.search,status:i.status,parent_department:i.parentDepartment}});D(t.data.departments)}catch(t){console.error("Error fetching departments:",t),T.error("Failed to load departments data")}finally{m(!1)}},[u.currentPage,u.perPage,i.search,i.status,i.parentDepartment]),J=d.useCallback(async()=>{try{const t=await Y.get(route("departments.stats"));if(t.status===200){const{stats:v}=t.data;F(v)}}catch(t){console.error("Error fetching department stats:",t)}},[]);d.useEffect(()=>{U(),J()},[U,J]);const $=(t,v)=>{B(j=>({...j,[t]:v})),S(j=>({...j,currentPage:1}))},ie=t=>{S(v=>({...v,currentPage:t})),window.scrollTo({top:0,behavior:"smooth"})},ze=t=>{S({currentPage:1,perPage:t})},O=(t,v=null)=>{N({type:t,department:v})},K=()=>{N({type:null,department:null})},de=()=>{U(),J()},Le=({department:t,index:v})=>{const j=t.manager,be=t.parent;return e(qe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>O("view_department",t),children:a(Qe,{className:"p-4 flex flex-col h-full",children:[a("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex justify-center items-center h-10 w-10 rounded-lg bg-primary/20 text-primary flex-shrink-0",children:e(Fe,{className:"w-5 h-5"})}),e("div",{className:"flex-1 min-w-0",children:a("div",{className:"flex items-start justify-between",children:[a("div",{children:[e("h3",{className:"font-semibold text-foreground text-sm line-clamp-1",children:t.name}),e("p",{className:"text-default-500 text-xs",children:t.code||"No Code"})]}),je&&e(E,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground ml-2",onPress:Ge=>{Ge.stopPropagation(),O("edit_department",t)},children:e(se,{className:"w-4 h-4"})})]})})]}),a("div",{className:"flex-1 flex flex-col gap-3",children:[t.location&&a("div",{className:"flex items-center gap-2 text-sm",children:[e(Ae,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs line-clamp-1",children:t.location})]}),t.established_date&&a("div",{className:"flex items-center gap-2 text-sm",children:[e(Se,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:oe(t.established_date).format("MMM D, YYYY")})]}),a("div",{className:"flex items-center gap-2 text-sm",children:[e(ae,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),a("span",{className:"text-default-600 text-xs",children:[t.employee_count||0," ",t.employee_count===1?"Employee":"Employees"]})]})]}),a("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[e(A,{size:"sm",variant:t.is_active?"solid":"bordered",color:t.is_active?"success":"danger",className:"text-xs",startContent:t.is_active?e(le,{className:"w-3 h-3"}):e(ne,{className:"w-3 h-3"}),children:t.is_active?"Active":"Inactive"}),be&&e(A,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(W,{className:"w-3 h-3"}),children:be.name}),j&&e(A,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(ae,{className:"w-3 h-3"}),children:j.name})]})]})})},We=d.useMemo(()=>[{title:"Total Departments",value:(h==null?void 0:h.total)||0,icon:e(W,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All departments"},{title:"Active",value:(h==null?void 0:h.active)||0,icon:e(le,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Active departments"},{title:"Inactive",value:(h==null?void 0:h.inactive)||0,icon:e(ne,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Inactive departments"},{title:"Parent Departments",value:(h==null?void 0:h.parent_departments)||0,icon:e(ea,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Top-level departments"}],[h]),Ye=d.useMemo(()=>{const t=[];return G&&t.push({label:n?"Add":"Add Department",icon:e(xa,{className:"w-4 h-4"}),onPress:()=>O("add_department"),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}),t.push({label:n?"":"Export",isIconOnly:n,icon:e(wa,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-primary-rgb),0.3)] bg-[rgba(var(--theme-primary-rgb),0.05)] hover:bg-[rgba(var(--theme-primary-rgb),0.1)]"}),t},[G,n]);return a(oa,{children:[e(Ve,{title:p}),e(re,{sx:{display:"flex",justifyContent:"center",p:2},children:e(aa,{in:!0,timeout:800,children:e(ta,{children:e(ia,{title:"Department Management",subtitle:"Manage company departments, hierarchies, and organizational structure",icon:e(W,{className:"w-8 h-8"}),variant:"default",actionButtons:Ye,children:a("div",{className:"p-4 sm:p-6",children:[e(da,{stats:We,className:"mb-6"}),a("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(ra,{label:"Search Departments",variant:"bordered",placeholder:"Search by name, code, or location...",value:i.search,onValueChange:t=>$("search",t),startContent:e(sa,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:n?"sm":"md"})}),a("div",{className:"flex gap-2 items-end",children:[a(Na,{variant:"bordered",className:"bg-white/5",children:[a(E,{isIconOnly:n,color:r==="table"?"primary":"default",onPress:()=>y("table"),className:r==="table"?"bg-blue-500/20":"",children:[e(_a,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Table"})]}),a(E,{isIconOnly:n,color:r==="grid"?"primary":"default",onPress:()=>y("grid"),className:r==="grid"?"bg-blue-500/20":"",children:[e(la,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Grid"})]})]}),a(E,{isIconOnly:n,variant:"bordered",onPress:()=>R(!I),className:I?"bg-purple-500/20":"bg-white/5",children:[e(ya,{className:"w-4 h-4"}),!n&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),I&&e(na,{in:!0,timeout:300,children:a("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[a("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[a(De,{label:"Status",variant:"bordered",selectedKeys:i.status!=="all"?[i.status]:[],onSelectionChange:t=>{const v=Array.from(t)[0]||"all";$("status",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(z,{value:"all",children:"All Statuses"},"all"),e(z,{value:"active",children:"Active Only"},"active"),e(z,{value:"inactive",children:"Inactive Only"},"inactive")]}),a(De,{label:"Parent Department",variant:"bordered",selectedKeys:i.parentDepartment!=="all"?[i.parentDepartment]:[],onSelectionChange:t=>{const v=Array.from(t)[0]||"all";$("parentDepartment",v)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(z,{value:"all",children:"All Parent Departments"},"all"),e(z,{value:"none",children:"Top-Level Departments"},"none"),s==null?void 0:s.map(t=>e(z,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(i.search||i.status!=="all"||i.parentDepartment!=="all")&&a("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&a(A,{variant:"flat",color:"primary",size:"sm",onClose:()=>$("search",""),children:["Search: ",i.search]}),i.status!=="all"&&a(A,{variant:"flat",color:"secondary",size:"sm",onClose:()=>$("status","all"),children:["Status: ",i.status==="active"?"Active":"Inactive"]}),i.parentDepartment!=="all"&&a(A,{variant:"flat",color:"warning",size:"sm",onClose:()=>$("parentDepartment","all"),children:["Parent: ",i.parentDepartment==="none"?"None (Top-Level)":(fe=s==null?void 0:s.find(t=>t.id===parseInt(i.parentDepartment)))==null?void 0:fe.name]})]})]})}),a("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:a(_,{variant:"h6",className:"font-semibold text-foreground",children:[r==="table"?"Department Table":"Department Grid",a("span",{className:"text-sm text-default-500 ml-2",children:["(",l.total||0," ",l.total===1?"department":"departments",")"]})]})}),C?a("div",{className:"text-center py-8",children:[e(Oe,{size:40}),e(_,{className:"mt-4",color:"textSecondary",children:"Loading departments data..."})]}):r==="table"?e(Sa,{departments:l,loading:C,onEdit:M?t=>O("edit_department",t):void 0,onDelete:q?t=>O("delete_department",t):void 0,onView:t=>O("view_department",t),isMobile:n,isTablet:k,pagination:u,onPageChange:ie,onRowsPerPageChange:ze,canEditDepartment:M,canDeleteDepartment:q}):a("div",{className:"p-4",children:[l.data&&l.data.length>0?e("div",{className:`grid gap-4 ${n?"grid-cols-1":k?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:l.data.map((t,v)=>e(Le,{department:t,index:v},t.id))}):a("div",{className:"text-center py-8",children:[e(W,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(_,{variant:"body1",color:"textSecondary",children:"No departments found"}),e(_,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),l.data&&l.data.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Ee,{total:Math.ceil(l.total/u.perPage),initialPage:u.currentPage,page:u.currentPage,onChange:ie,size:n?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})}),(f.type==="add_department"||f.type==="edit_department")&&e(Ce,{open:!0,onClose:K,onSuccess:de,department:f.type==="edit_department"?f.department:null,managers:x,parentDepartments:s}),f.type==="delete_department"&&e(Fa,{open:!0,onClose:K,onSuccess:de,department:f.department}),f.type==="view_department"&&e(Ce,{open:!0,onClose:K,onSuccess:()=>{},department:f.department,managers:x,parentDepartments:s,readOnly:!0})]})};export{xt as default};
