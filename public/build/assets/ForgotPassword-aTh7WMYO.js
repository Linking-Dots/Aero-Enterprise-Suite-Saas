import{j as o,a as e,M as T,U as _,F as x,h as k}from"./app-CsDeKUeK.js";import{u as E,r as i,G as m,a as j,B as a,d as I,T as M}from"./vendor-DKMPpwuQ.js";import{G as O,l as W,b as g,d as q,A as F}from"./App-j3jr1u1w.js";import{d as A,a as b}from"./Password-BYGh6hOj.js";import{d as v,a as y}from"./VisibilityOff-BwzO5wfH.js";import{i as p}from"./chunk-IR2E3HZF-Bx1nsLur.js";import"./useFormValidationState-Dyoive6Y.js";import"./useLabel-O1tmEyvH.js";function V(){E();const[t,c]=i.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[f,C]=i.useState(!1),[h,N]=i.useState(!1),[w,u]=i.useState(!1),[n,d]=i.useState({}),[l,P]=i.useState(1),S=s=>{s.preventDefault(),u(!0),l===1?axios.post(route("password.email"),{email:t.email}).then(r=>{d({}),P(2)}).catch(r=>{console.error(r),console.error("Password reset OTP request failed:",r.response.data.errors),d(r.response.data.errors)}).finally(()=>{u(!1)}):l===2?axios.post(route("password.verify"),{email:t.email,otp:t.otp}).then(r=>{d({}),P(3)}).catch(r=>{console.error(r),console.error("OTP verification failed:",r.response.data.errors),d(r.response.data.errors)}).finally(()=>{u(!1)}):l===3&&axios.post(route("password.reset"),{email:t.email,newPassword:t.newPassword,newPassword_confirmation:t.confirmPassword}).then(r=>{k.get(route("login"))}).catch(r=>{console.error(r),console.error("Password reset failed:",r.response.data.errors),d(r.response.data.errors)}).finally(()=>{u(!1)})};return o(F,{children:[e(T,{title:"Forgot Password"}),e(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:e(m,{container:!0,spacing:2,justifyContent:"center",children:e(m,{item:!0,xs:12,md:8,lg:6,xl:5,children:e(O,{children:o(j,{children:[e(a,{textAlign:"center",children:e(_,{style:{alignItems:"center",display:"inline-flex"},href:route("dashboard"),className:"d-inline-block auth-logo",children:e("img",{src:W,alt:"Logo",className:"h-24 md:h-40 sm:h-40 xs:h-10"})})}),e(a,{mt:4,children:o("form",{onSubmit:S,children:[l===1&&o(x,{children:[e(a,{mb:3,children:e(p,{isClearable:!0,type:"email",label:"Enter your email address",variant:"underlined",id:"email",name:"email",value:t.email||"",onChange:s=>{c({...t,email:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.email,errorMessage:n.email,placeholder:"you@example.com",labelPlacement:"outside",startContent:e(A,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(g,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:w,children:"Send OTP"})})]}),l===2&&o(x,{children:[e(a,{mb:3,children:e(p,{isClearable:!0,type:"text",label:"Enter OTP sent to your email",variant:"underlined",id:"otp",name:"otp",value:t.otp||"",onChange:s=>{c({...t,otp:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.otp,errorMessage:n.otp,placeholder:"Enter the OTP",labelPlacement:"outside",startContent:e(q,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(g,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:w,children:"Verify OTP"})})]}),l===3&&o(x,{children:[e(a,{mb:4,children:e(p,{label:"New Password",id:"newPassword",name:"newPassword",variant:"underlined",startContent:e(b,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),endContent:e("button",{className:"focus:outline-none",type:"button",onClick:()=>C(!f),"aria-label":"toggle password visibility",children:f?e(v,{className:"text-2xl text-default-400 pointer-events-none"}):e(y,{className:"text-2xl text-default-400 pointer-events-none"})}),type:f?"text":"password",value:t.newPassword||"",onChange:s=>{c({...t,newPassword:s.target.value})},required:!0,isInvalid:!!n.newPassword,errorMessage:n.newPassword,placeholder:"Enter new password",labelPlacement:"outside"})}),e(a,{mb:4,children:e(p,{isClearable:!0,type:h?"text":"password",label:"Confirm New Password",variant:"underlined",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword||"",onChange:s=>{c({...t,confirmPassword:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.confirmPassword,errorMessage:n.confirmPassword,placeholder:"Confirm new password",labelPlacement:"outside",startContent:e(b,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),endContent:e("button",{className:"focus:outline-none",type:"button",onClick:()=>N(!h),"aria-label":"toggle password visibility",children:h?e(v,{className:"text-2xl text-default-400 pointer-events-none"}):e(y,{className:"text-2xl text-default-400 pointer-events-none"})})})}),e(a,{mt:4,children:e(g,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:w,children:"Reset Password"})})]})]})})]})})})})}),e("footer",{children:e(I,{children:e(m,{container:!0,justifyContent:"center",children:e(m,{item:!0,xs:12,textAlign:"center",children:o(M,{variant:"body2",color:"text.secondary",children:["Â© ",new Date().getFullYear()," Emam Hosen. Crafted with ",e("i",{className:"mdi mdi-heart text-danger"})]})})})})})]})}export{V as default};
