import{V as C,j as r,a as e,M as T,F as U}from"./app-D0nw11-W.js";import{r as s,e as b,h as k,B as n,f as E,a as u,G as L,T as v,D as F}from"./vendor-TQEDv41K.js";import{G as g,A as O}from"./App-ssU5KC34.js";import{L as _,D as w,a as H}from"./DeleteLeaveForm-Ca0iAl-p.js";import{A as R}from"./Add-DbiM9qkn.js";import"./Delete-P6VCfh9X.js";import"./chunk-QEQ4EHOG-l3I5UE5j.js";import"./DOMLayoutDelegate-C6ve1q38.js";import"./useLabel-Ct9GBkfd.js";import"./chunk-NCVCYSZZ-D0CT_U16.js";import"./chunk-YRZGWF2W-JOnZCDB4.js";import"./chunk-KBN3H6OQ-C9ZX646S.js";import"./useFormValidationState-DHA-he-t.js";import"./chunk-KQ7OR4H5-QQw3Lgg5.js";import"./chunk-TLBGAR4N-BfLbJI2V.js";import"./GlassDialog-RVV3y6ig.js";import"./LoadingButton-DIfkXEVD.js";const V=({title:p,allUsers:D})=>{const{auth:i}=C().props,[l,o]=s.useState(null),[a,d]=s.useState(C().props.leavesData),[A,B]=s.useState(a.allLeaves),[I,h]=s.useState(null),[M,j]=s.useState();s.useEffect(()=>{B(a.allLeaves)},[a]);const y=t=>{o(t)},G=s.useCallback((t,c)=>{h(t),o(c)},[]),S=s.useCallback(()=>{o(null),h(null)},[]),f=()=>{o(null)};return r(U,{children:[e(T,{title:p}),l==="add_leave"&&e(_,{open:l==="add_leave",setLeavesData:d,closeModal:f,leavesData:a}),l==="edit_leave"&&e(_,{open:l==="edit_leave",setLeavesData:d,closeModal:f,leavesData:a,currentLeave:M}),l==="delete_leave"&&e(w,{open:l==="delete_leave",handleClose:S,leaveIdToDelete:I,setLeavesData:d}),e(n,{sx:{display:"flex",justifyContent:"center",p:2},children:e(b,{in:!0,children:r(g,{children:[e(k,{title:"Leaves",sx:{padding:"24px"},action:e(n,{display:"flex",gap:2,children:e(E,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(R,{}),onClick:()=>y("add_leave"),children:"Add Leave"})})}),e(u,{children:e(L,{container:!0,spacing:2,children:a.leaveTypes.map(t=>{var c,x;return e(L,{item:!0,xs:6,sm:6,md:3,children:e(g,{children:e(u,{children:r(n,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center",children:[e(v,{variant:"h6",sx:{mb:2},children:t.type})," ",r(n,{display:"flex",alignItems:"center",children:[r(n,{children:["Used:",e(v,{variant:"h4",children:a.leaveCountsByUser[i.user.id]?(c=a.leaveCountsByUser[i.user.id].find(m=>m.leave_type===t.type))==null?void 0:c.days_used:0})]}),e(F,{orientation:"vertical",flexItem:!0,sx:{mx:2}})," ",r(n,{children:["Remaining:",e(v,{variant:"h4",children:a.leaveCountsByUser[i.user.id]?(x=a.leaveCountsByUser[i.user.id].find(m=>m.leave_type===t.type))==null?void 0:x.remaining_days:0})]})]})]})})})},t.type)})})}),e(u,{children:e(H,{setLeavesData:d,handleClickOpen:G,setCurrentLeave:j,openModal:y,allLeaves:A,allUsers:D})})]})})})]})};V.layout=p=>e(O,{children:p});export{V as default};
