import{V as J,j as m,a as e,M as K,F as N}from"./app-B7dlnk2H.js";import{r as t,e as Q,h as X,f as Z,a as C,G as v,T as S,B as $}from"./vendor-DrHmFQFl.js";import{d as U}from"./Search-CgsQc0gH.js";import{A as ee,G as te}from"./App-CFbuokWX.js";import{L as ae,D as se,a as oe}from"./DeleteLeaveForm-DQcY1PlX.js";import{d as re}from"./dayjs.min-DVDxNhg-.js";import{A as ne}from"./Add-id6j6Uy5.js";import{i as x}from"./chunk-IR2E3HZF-CHkvH2d5.js";import"./Edit-CtMoSlB4.js";import"./chunk-QEQ4EHOG-DN0svgQ5.js";import"./DOMLayoutDelegate-CgDYLXhB.js";import"./useLabel-BydoFeoE.js";import"./chunk-NCVCYSZZ-DY9-Lh41.js";import"./chunk-YRZGWF2W-BrjnZ63j.js";import"./chunk-KBN3H6OQ-Bw4Hhm9e.js";import"./useFormValidationState-DPhVI9we.js";import"./chunk-MRXO6UUP-BP6jF2RE.js";import"./chunk-KQ7OR4H5-Bslgpmgo.js";import"./chunk-TLBGAR4N-DsWC6QGo.js";import"./GlassDialog-DQG0VLYy.js";import"./LoadingButton-CUeR6bzk.js";const le=({title:l,allUsers:h})=>{const{auth:de,props:M}=J(),[d,o]=t.useState(null),[b,i]=t.useState(M.leavesData),[g,D]=t.useState(),[E,T]=t.useState(0),[_,A]=t.useState(0),[P,f]=t.useState(null),[c,j]=t.useState(""),[r,w]=t.useState(re().format("YYYY-MM")),[p,G]=t.useState(30),[u,k]=t.useState(1),[F,Y]=t.useState(),[L,B]=t.useState(""),y=a=>o(a),I=t.useCallback((a,n)=>{f(a),o(n)},[]),O=t.useCallback(()=>{o(null),f(null)},[]),R=a=>j(a.target.value.toLowerCase()),H=a=>w(a.target.value),V=async()=>{var a,n;try{const s=await axios.get(route("leaves.paginate"),{params:{page:u,perPage:p,employee:c,month:r}});if(console.log(r),s.status===200){const{data:W,total:q,last_page:z}=s.data.leaves;D(W),T(q),A(z)}}catch(s){console.error("Error fetching leaves data:",s),B(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Error retrieving data.")}};return t.useEffect(()=>{V()},[r,u,p,c]),m(N,{children:[e(K,{title:l}),["add_leave","edit_leave"].includes(d)&&e(ae,{allUsers:h,open:!0,setLeavesData:i,closeModal:()=>o(null),leavesData:b,currentLeave:d==="edit_leave"?F:null}),d==="delete_leave"&&e(se,{open:!0,handleClose:O,leaveIdToDelete:P,setLeavesData:i}),e($,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Q,{in:!0,children:m(te,{children:[e(X,{title:"Leaves",sx:{padding:"24px"},action:e(Z,{title:"Add Leave",variant:"outlined",color:"success",startIcon:e(ne,{}),onClick:()=>y("add_leave"),children:"Add Leave"})}),e(C,{children:m(v,{container:!0,spacing:2,children:[e(v,{item:!0,xs:12,sm:6,md:4,children:e(x,{label:"Search",fullWidth:!0,variant:"bordered",placeholder:"Employee...",value:c,onChange:R,endContent:e(U,{})})}),e(v,{item:!0,xs:12,sm:6,md:4,children:e(x,{label:"Select Month",type:"month",variant:"bordered",onChange:H,value:r})})]})}),e(C,{children:g?e(oe,{totalRows:E,lastPage:_,setCurrentPage:k,setPerPage:G,perPage:p,currentPage:u,handleClickOpen:I,setCurrentLeave:Y,openModal:y,allLeaves:g,allUsers:h,setLeavesData:i}):L?e(S,{variant:"body1",align:"center",children:L}):e(S,{variant:"body1",align:"center",children:"Loading leaves data..."})})]})})})]})};le.layout=l=>e(ee,{children:l});export{le as default};
