import{r as n,c as z,j as r,a as oe,b as a,Q as Qe,F as we,p as Ge}from"./app-MneRgble.js";import{x as ue,y as pe,n as ge,_ as be,aw as Je,o as W,M as Xe,s as Y,p as ie,q as he,ae as Ye,ag as Ze,u as Ke,a as Ce,H as ce,ax as Ne,ay as er,P as T,B as de,f as ae,d as C,G as rr,c as sr,am as Re,i as or,J as ar,k as te,I as Se,az as tr,aA as nr,A as ir}from"./App-BrsLpbpS.js";import{P as lr}from"./PageHeader--cmLnyXU.js";import{S as cr}from"./StatsCards-B0sYI762.js";import{F as dr}from"./FunnelIcon-C1x54K-I.js";import{a as Pe,b as ke,c as Ae}from"./DialogContent-Dv6mkc8K.js";import{F as Me}from"./PlusIcon-CPgPxOra.js";import{D as _e}from"./DialogTitle-DrjqK3oU.js";import{T as me}from"./TextField-CWvCjHs2.js";import{B as $e}from"./Button-BdQwlRYB.js";import{L as Fe}from"./LoadingButton-AwONpn_K.js";import{F as mr}from"./ExclamationTriangleIcon-CacgxJeX.js";import{F as ur}from"./PencilSquareIcon-DaqCpf0U.js";import{F as pr}from"./TrashIcon-HbnGpiWi.js";import{u as gr}from"./useSlot-C5BMByKB.js";import{C as br}from"./Checkbox-CB1jHLbj.js";import{F as hr}from"./DocumentArrowDownIcon-DdgdCKwc.js";import{F as fr}from"./PresentationChartLineIcon-BQ3E2mjd.js";import"./app-CPPT5dG3.js";import"./chunk-D5XJWRAV-ChxxBE-2.js";import"./Select-DQceXIeZ.js";import"./Popover-BWGS9Ybx.js";import"./List-C5mxN75U.js";import"./CircularProgress-yciCqxzj.js";const De=n.createContext({});function xr(s){return pe("MuiAccordion",s)}const ne=ue("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),vr=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],yr=s=>{const{classes:t,square:u,expanded:l,disabled:v,disableGutters:F}=s;return he({root:["root",!u&&"rounded",l&&"expanded",v&&"disabled",!F&&"gutters"],region:["region"]},xr,t)},wr=Y(Ye,{name:"MuiAccordion",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:u}=s;return[{[`& .${ne.region}`]:t.region},t.root,!u.square&&t.rounded,!u.disableGutters&&t.gutters]}})(({theme:s})=>{const t={duration:s.transitions.duration.shortest};return{position:"relative",transition:s.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(s.vars||s).palette.divider,transition:s.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${ne.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${ne.disabled}`]:{backgroundColor:(s.vars||s).palette.action.disabledBackground}}},({theme:s})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(s.vars||s).shape.borderRadius,borderTopRightRadius:(s.vars||s).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(s.vars||s).shape.borderRadius,borderBottomRightRadius:(s.vars||s).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${ne.expanded}`]:{margin:"16px 0"}}}]})),Cr=n.forwardRef(function(t,u){const l=ge({props:t,name:"MuiAccordion"}),{children:v,className:F,defaultExpanded:b=!1,disabled:A=!1,disableGutters:I=!1,expanded:y,onChange:M,square:_=!1,slots:G={},slotProps:R={},TransitionComponent:E,TransitionProps:h}=l,D=be(l,vr),[f,j]=Je({controlled:y,default:b,name:"Accordion",state:"expanded"}),S=n.useCallback(x=>{j(!f),M&&M(x,!f)},[f,M,j]),[N,...Z]=n.Children.toArray(v),V=n.useMemo(()=>({expanded:f,disabled:A,disableGutters:I,toggle:S}),[f,A,I,S]),P=W({},l,{square:_,disabled:A,disableGutters:I,expanded:f}),O=yr(P),K=W({transition:E},G),q=W({transition:h},R),[B,ee]=gr("transition",{elementType:Xe,externalForwardedProps:{slots:K,slotProps:q},ownerState:P});return z.jsxs(wr,W({className:ie(O.root,F),ref:u,ownerState:P,square:_},D,{children:[z.jsx(De.Provider,{value:V,children:N}),z.jsx(B,W({in:f,timeout:"auto"},ee,{children:z.jsx("div",{"aria-labelledby":N.props.id,id:N.props["aria-controls"],role:"region",className:O.region,children:Z})}))]}))});function Nr(s){return pe("MuiAccordionDetails",s)}ue("MuiAccordionDetails",["root"]);const Rr=["className"],Sr=s=>{const{classes:t}=s;return he({root:["root"]},Nr,t)},Pr=Y("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(s,t)=>t.root})(({theme:s})=>({padding:s.spacing(1,2,2)})),kr=n.forwardRef(function(t,u){const l=ge({props:t,name:"MuiAccordionDetails"}),{className:v}=l,F=be(l,Rr),b=l,A=Sr(b);return z.jsx(Pr,W({className:ie(A.root,v),ref:u,ownerState:b},F))});function Ar(s){return pe("MuiAccordionSummary",s)}const Q=ue("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Mr=["children","className","expandIcon","focusVisibleClassName","onClick"],_r=s=>{const{classes:t,expanded:u,disabled:l,disableGutters:v}=s;return he({root:["root",u&&"expanded",l&&"disabled",!v&&"gutters"],focusVisible:["focusVisible"],content:["content",u&&"expanded",!v&&"contentGutters"],expandIconWrapper:["expandIconWrapper",u&&"expanded"]},Ar,t)},$r=Y(Ze,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(s,t)=>t.root})(({theme:s})=>{const t={duration:s.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:s.spacing(0,2),transition:s.transitions.create(["min-height","background-color"],t),[`&.${Q.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${Q.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`&:hover:not(.${Q.disabled})`]:{cursor:"pointer"},variants:[{props:u=>!u.disableGutters,style:{[`&.${Q.expanded}`]:{minHeight:64}}}]}}),Fr=Y("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(s,t)=>t.content})(({theme:s})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:s.transitions.create(["margin"],{duration:s.transitions.duration.shortest}),[`&.${Q.expanded}`]:{margin:"20px 0"}}}]})),Dr=Y("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(s,t)=>t.expandIconWrapper})(({theme:s})=>({display:"flex",color:(s.vars||s).palette.action.active,transform:"rotate(0deg)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shortest}),[`&.${Q.expanded}`]:{transform:"rotate(180deg)"}})),jr=n.forwardRef(function(t,u){const l=ge({props:t,name:"MuiAccordionSummary"}),{children:v,className:F,expandIcon:b,focusVisibleClassName:A,onClick:I}=l,y=be(l,Mr),{disabled:M=!1,disableGutters:_,expanded:G,toggle:R}=n.useContext(De),E=f=>{R&&R(f),I&&I(f)},h=W({},l,{expanded:G,disabled:M,disableGutters:_}),D=_r(h);return z.jsxs($r,W({focusRipple:!1,disableRipple:!0,disabled:M,component:"div","aria-expanded":G,className:ie(D.root,F),focusVisibleClassName:ie(D.focusVisible,A),onClick:E,ref:u,ownerState:h},y,{children:[z.jsx(Fr,{className:D.content,ownerState:h,children:v}),b&&z.jsx(Dr,{className:D.expandIconWrapper,ownerState:h,children:b})]}))}),Br=({title:s,roles:t=[],permissions:u=[],permissions_grouped:l={},role_has_permissions:v=[],enterprise_modules:F={},can_manage_super_admin:b=!1})=>{console.log("RoleManagement Props:",{roles:t,permissions:u,permissionsGrouped:l,rolePermissions:v,canManageSuperAdmin:b});const A=Ke(),I=Ce(A.breakpoints.down("sm"));Ce(A.breakpoints.down("md"));const[y,M]=n.useState(t),[_,G]=n.useState(u),[R,E]=n.useState(v),[h,D]=n.useState(y.length>0?y[0].id:null),[f,j]=n.useState(new Set),[S,N]=n.useState(!1),[Z,V]=n.useState(!1),[P,O]=n.useState(null),[K,q]=n.useState(!1),[B,ee]=n.useState(null),[x,fe]=n.useState(""),[$,xe]=n.useState("all"),[re,H]=n.useState({name:"",description:"",permissions:[],hierarchy_level:10}),c=y.find(e=>e.id===h);n.useEffect(()=>{if(h){const e=le(h);j(new Set(e))}},[h,R]);const U=n.useMemo(()=>({totalRoles:y.length,totalPermissions:_.length,activeRole:(c==null?void 0:c.name)||"None Selected",grantedPermissions:f.size}),[y,_,c,f]),je=n.useMemo(()=>[{title:"Total Roles",value:U.totalRoles,icon:r(ce,{}),color:"text-blue-600",iconBg:"bg-blue-500/20",description:"System roles"},{title:"Permissions",value:U.totalPermissions,icon:r(Ne,{}),color:"text-green-600",iconBg:"bg-green-500/20",description:"Available permissions"},{title:"Active Role",value:U.activeRole==="None Selected"?"None":U.activeRole,icon:r(er,{}),color:"text-purple-600",iconBg:"bg-purple-500/20",description:"Currently selected",customStyle:U.activeRole==="None Selected"?{fontSize:"1rem"}:{}},{title:"Granted",value:U.grantedPermissions,icon:r(dr,{}),color:"text-orange-600",iconBg:"bg-orange-500/20",description:"Active permissions"}],[U]);n.useMemo(()=>{if(!l)return[];let e=[];return Object.entries(l).forEach(([o,i])=>{if($==="all"||$===o){const d=i.permissions.filter(m=>x===""||m.name.toLowerCase().includes(x.toLowerCase())||m.display_name.toLowerCase().includes(x.toLowerCase()));e=[...e,...d]}}),e},[l,x,$]);const Be=n.useMemo(()=>{if(!l)return{};const e={};return Object.entries(l).forEach(([o,i])=>{if($==="all"||$===o){const d=i.permissions.filter(m=>x===""||m.name.toLowerCase().includes(x.toLowerCase())||m.display_name.toLowerCase().includes(x.toLowerCase()));d.length>0&&(e[o]={...i,permissions:d})}}),e},[l,x,$]),Te=n.useMemo(()=>l?Object.keys(l).sort():[],[l]),le=n.useCallback(e=>R.filter(o=>o.role_id===e).map(o=>o.permission_id),[R]),L=(e,o)=>{const i=R.filter(m=>m.role_id===e),d=_.find(m=>m.name===o);return d&&i.some(m=>m.permission_id===d.id)};n.useCallback(e=>!c||!l[e]?!1:l[e].permissions.every(i=>L(c.id,i.name)),[c,l,L]),n.useCallback(e=>!c||!l[e]?!1:l[e].permissions.some(i=>L(c.id,i.name)),[c,l,L]);const Ie=e=>e.name==="Super Administrator"?b:!0,Ee=n.useCallback(e=>{D(e);const o=R.filter(i=>i.role_id===e).map(i=>i.permission_id);j(new Set(o))},[R]),Le=n.useCallback(e=>{fe(e)},[]),We=n.useCallback(e=>{xe(e)},[]),ze=n.useCallback(()=>{V(!0)},[]),ve=n.useCallback(()=>{V(!1),O(null),H({name:"",description:"",permissions:[],hierarchy_level:10})},[]),ye=n.useCallback(async e=>{var o,i;if(!(!c||S)){N(!0);try{const d=L(c.id,e),m=d?"revoke":"grant";if(console.log(`Toggling permission: ${e}, action: ${m}, role: ${c.name}`),(await oe.post("/admin/roles/update-permission",{role_id:c.id,permission:e,action:m})).status===200){const p=_.find(k=>k.name===e);p&&(d?(E(k=>k.filter(g=>!(g.role_id===c.id&&g.permission_id===p.id))),j(k=>{const g=new Set(k);return g.delete(p.id),g})):(E(k=>[...k,{role_id:c.id,permission_id:p.id}]),j(k=>new Set([...k,p.id])))),T.success(`Permission ${m}ed successfully`)}}catch(d){console.error("Error updating permission:",d),T.error(((i=(o=d.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update permission")}finally{N(!1)}}},[c,S,L,_,E,j]),Ue=n.useCallback(async e=>{var o,i;if(!(!c||S)){N(!0);try{console.log(`Toggling module permissions for: ${e}, role: ${c.name}`);const d=await oe.post("/admin/roles/update-module",{roleId:c.id,module:e,action:"toggle"});if(d.status===200){E(d.data.role_has_permissions);const m=d.data.role_has_permissions.filter(w=>w.role_id===c.id).map(w=>w.permission_id);j(new Set(m)),T.success("Module permissions updated successfully")}}catch(d){console.error("Error updating module permissions:",d),T.error(((i=(o=d.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update module permissions")}finally{N(!1)}}},[c,S]),Ve=async()=>{var e,o;N(!0);try{const i=P?`/admin/roles/${P.id}`:"/admin/roles",m=await oe[P?"put":"post"](i,re);m.status===200&&(P?(M(w=>w.map(p=>p.id===P.id?m.data.role:p)),T.success("Role updated successfully")):(M(w=>[...w,m.data.role]),T.success("Role created successfully")),V(!1),O(null),H({name:"",description:"",permissions:[],hierarchy_level:10}))}catch(i){console.error("Error saving role:",i),T.error(((o=(e=i.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to save role")}finally{N(!1)}},Oe=async()=>{var e,o;if(B){N(!0);try{(await oe.delete(`/admin/roles/${B.id}`)).status===200&&(M(d=>d.filter(m=>m.id!==B.id)),h===B.id&&D(y.length>1?y[0].id:null),T.success("Role deleted successfully"))}catch(i){console.error("Error deleting role:",i),T.error(((o=(e=i.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete role")}finally{N(!1),q(!1),ee(null)}}},qe=e=>{O(e),H({name:e.name,description:e.description||"",permissions:le(e.id),hierarchy_level:e.hierarchy_level||10}),V(!0)},He=e=>{ee(e),q(!0)};return a(we,{children:[r(Qe,{title:s}),Z&&a(Pe,{open:Z,onClose:ve,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[r(_e,{children:a(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[r(Me,{className:"w-6 h-6"}),P?"Edit Role":"Create New Role"]})}),r(ke,{children:a(ae,{container:!0,spacing:3,sx:{mt:1},children:[r(ae,{item:!0,xs:12,sm:6,children:r(me,{fullWidth:!0,label:"Role Name",value:re.name,onChange:e=>H(o=>({...o,name:e.target.value})),required:!0})}),a(ae,{item:!0,xs:12,sm:6,children:["                                ",r(me,{fullWidth:!0,label:"Hierarchy Level",type:"number",value:re.hierarchy_level,onChange:e=>H(o=>({...o,hierarchy_level:parseInt(e.target.value)})),helperText:"Role priority level (1-50, lower numbers = higher priority)",inputProps:{min:1,max:50},disabled:!b})]}),r(ae,{item:!0,xs:12,children:r(me,{fullWidth:!0,label:"Description",multiline:!0,rows:3,value:re.description,onChange:e=>H(o=>({...o,description:e.target.value}))})})]})}),a(Ae,{sx:{p:3},children:[r($e,{onClick:ve,children:"Cancel"}),r(Fe,{variant:"contained",onClick:Ve,loading:S,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%)"}},children:P?"Update Role":"Create Role"})]})]}),K&&a(Pe,{open:K,onClose:()=>q(!1),PaperProps:{sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"24px"}},children:[r(_e,{children:a(de,{sx:{display:"flex",alignItems:"center",gap:2},children:[r(mr,{className:"w-6 h-6 text-red-500"}),"Confirm Delete"]})}),r(ke,{children:a(C,{children:['Are you sure you want to delete the role "',B==null?void 0:B.name,'"? This action cannot be undone.']})}),a(Ae,{sx:{p:3},children:[r($e,{onClick:()=>q(!1),children:"Cancel"}),r(Fe,{variant:"contained",color:"error",onClick:Oe,loading:S,children:"Delete Role"})]})]}),r(de,{className:"min-h-screen p-2 sm:p-4 md:p-6",sx:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)"},children:r(rr,{in:!0,timeout:800,children:a("div",{className:"max-w-7xl mx-auto",children:["                        ",r(sr,{children:a(lr,{title:"Role Management",subtitle:"Manage roles, permissions, and access control",icon:r(fr,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Create Role",icon:r(Me,{className:"w-4 h-4"}),onPress:ze,className:"bg-gradient-to-r from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] hover:from-[rgba(var(--theme-primary-rgb),0.3)] hover:to-[rgba(var(--theme-secondary-rgb),0.3)] border border-[rgba(var(--theme-primary-rgb),0.3)]"},{label:"Export",icon:r(hr,{className:"w-4 h-4"}),variant:"bordered",className:"border-[rgba(var(--theme-success-rgb),0.3)] bg-[rgba(var(--theme-success-rgb),0.05)] hover:bg-[rgba(var(--theme-success-rgb),0.1)]"}],children:["                                ",a("div",{className:"p-6",children:[r(cr,{stats:je}),r(Re,{in:!0,timeout:1200,children:r("div",{className:"mb-6",children:a("div",{className:"flex flex-col gap-4",children:[a("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[r("div",{className:"w-full sm:flex-1",children:r(or,{label:"Search Permissions",variant:"bordered",placeholder:"Search permissions by name or module...",value:x,onValueChange:Le,startContent:r(ar,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:I?"sm":"md"})}),r("div",{className:"flex gap-2 w-full sm:w-auto",children:r("div",{className:"flex-1 sm:min-w-[150px]",children:a("select",{className:"w-full px-3 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",value:$,onChange:e=>We(e.target.value),children:[r("option",{value:"all",children:"All Modules"}),Te.map(e=>r("option",{value:e,children:e},e))]})})})]}),(x||$!=="all")&&a("div",{className:"flex flex-wrap gap-2",children:[x&&a(te,{variant:"flat",color:"primary",size:"sm",onClose:()=>fe(""),children:["Search: ",x]}),$!=="all"&&a(te,{variant:"flat",color:"secondary",size:"sm",onClose:()=>xe("all"),children:["Module: ",$]})]})]})})}),r(Re,{in:!0,timeout:1400,children:a("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r("div",{className:"lg:col-span-1",children:a("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:[r("div",{className:"flex items-center justify-between mb-4",children:a(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[r(ce,{className:"w-5 h-5"}),"Roles (",y.length,")"]})}),r("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:y.map(e=>r("div",{className:`p-3 rounded-lg border transition-all duration-200 cursor-pointer ${h===e.id?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-400/50":"bg-white/5 border-white/10 hover:bg-white/10"}`,onClick:()=>Ee(e.id),children:a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center gap-3",children:[r("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${h===e.id?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-gray-500"}`,children:e.name.charAt(0).toUpperCase()}),a("div",{children:[r(C,{variant:"body2",className:"font-medium",children:e.name}),a(C,{variant:"caption",color:"textSecondary",children:[le(e.id).length," permissions"]}),e.name==="Super Administrator"&&r(te,{label:"System",size:"sm",className:"ml-1"})]})]}),Ie(e)&&a("div",{className:"flex gap-1",children:[r(Se,{size:"small",onClick:o=>{o.stopPropagation(),qe(e)},className:"text-gray-400 hover:text-blue-400",children:r(ur,{className:"w-4 h-4"})}),r(Se,{size:"small",onClick:o=>{o.stopPropagation(),He(e)},className:"text-gray-400 hover:text-red-400",children:r(pr,{className:"w-4 h-4"})})]})]})},e.id))})]})}),r("div",{className:"lg:col-span-2",children:r("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4",children:c?a(we,{children:[a("div",{className:"flex items-center justify-between mb-4",children:[a(C,{variant:"h6",className:"font-bold flex items-center gap-2",children:[r(Ne,{className:"w-5 h-5"}),c.name," Permissions"]}),r(te,{label:`${f.size} granted`,color:"primary",variant:"flat"})]}),"                                                        ",r("div",{className:"max-h-96 overflow-y-auto space-y-3",children:Object.entries(Be).map(([e,o])=>{const i=o.permissions,d=i.filter(g=>L(c.id,g.name)).length,m=i.length,w=d===m,p=d>0,k=m>0?Math.round(d/m*100):0;return a(Cr,{sx:{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(168, 85, 247, 0.15))":"rgba(255, 255, 255, 0.05)",border:p?"1px solid rgba(102, 126, 234, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px !important","&:before":{display:"none"},"&.Mui-expanded":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(168, 85, 247, 0.25))":"rgba(255, 255, 255, 0.08)",borderColor:p?"rgba(102, 126, 234, 0.5)":"rgba(255, 255, 255, 0.2)"},"&:hover":{background:p?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(168, 85, 247, 0.2))":"rgba(255, 255, 255, 0.08)"}},children:[r(jr,{expandIcon:r(Ge,{className:"w-5 h-5 text-gray-400"}),sx:{borderRadius:"16px","&.Mui-expanded":{borderRadius:"16px 16px 0 0"},minHeight:"64px","& .MuiAccordionSummary-content":{margin:"12px 0",alignItems:"center"}},children:a("div",{className:"flex items-center justify-between w-full mr-4",children:[a("div",{className:"flex items-center gap-3",children:[a("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm ${w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":p?"bg-gradient-to-r from-orange-500 to-amber-500 text-white":"bg-gray-500/20 text-gray-400"}`,children:[k,"%"]}),"                                                                        ",a("div",{children:[r(C,{variant:"subtitle1",className:"font-semibold text-white",children:o.name}),r(C,{variant:"caption",color:"textSecondary",className:"block",children:o.description}),r("div",{className:"flex items-center gap-2 mt-1",children:a(C,{variant:"caption",color:"textSecondary",children:[d," of ",m," permissions granted"]})})]})]}),a("div",{className:"flex items-center gap-2",children:[a("div",{className:"text-right mr-2",children:[r(C,{variant:"caption",color:"textSecondary",className:"block",children:"Module Toggle"}),r("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w?"bg-green-500/20 text-green-400 border border-green-500/30":p?"bg-orange-500/20 text-orange-400 border border-orange-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:w?"Full Access":p?"Partial":"No Access"})]}),"                                                                                    ",r(tr,{checked:w,onChange:g=>{g.stopPropagation(),Ue(e)},disabled:S||(c==null?void 0:c.name)==="Super Administrator"&&!b,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#10b981","&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#10b981"},"& .MuiSwitch-track":{backgroundColor:p?"#f59e0b":"#6b7280"}}})]})]})}),"                                                                        ",r(kr,{sx:{pt:0,pb:3,px:3},children:r("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:i.map(g=>{const J=L(c.id,g.name),se=S||(c==null?void 0:c.name)==="Super Administrator"&&!b;return r("div",{className:`p-3 border rounded-xl transition-all duration-200 ${se?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-white/5"} ${J?"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,onClick:X=>{X.preventDefault(),X.stopPropagation(),se||ye(g.name)},children:r(nr,{control:r(br,{checked:J,onChange:X=>{X.preventDefault(),X.stopPropagation(),se||ye(g.name)},disabled:se,sx:{color:J?"#10b981":"rgba(255, 255, 255, 0.5)","&.Mui-checked":{color:"#10b981"},"&:hover":{backgroundColor:"rgba(16, 185, 129, 0.08)"}}}),label:a("div",{children:[r(C,{variant:"body2",className:`font-medium ${J?"text-green-400":"text-white"}`,children:g.display_name||g.name}),r(C,{variant:"caption",className:`${J?"text-green-300/70":"text-gray-400"}`,children:g.name})]}),className:"m-0 w-full pointer-events-none"})},g.id)})})})]},e)})})]}):a("div",{className:"flex flex-col items-center justify-center h-48 text-center",children:[r(ce,{className:"w-16 h-16 text-gray-400 mb-4"}),r(C,{variant:"h6",color:"textSecondary",children:"Select a role to manage permissions"}),r(C,{variant:"body2",color:"textSecondary",children:"Choose a role from the left panel to view and edit its permissions                                                        "}),"                                                    "]})})})]})})]})]})})]})})})]})};Br.layout=s=>r(ir,{children:s});export{Br as default};
