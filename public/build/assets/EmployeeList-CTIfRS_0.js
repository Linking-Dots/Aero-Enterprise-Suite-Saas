import{r as s,b as r,j as e,s as H,h as F,a as L,Q as He,F as Ue,e as Oe,c as We}from"./app-Bf03_iUP.js";import{ap as J,aq as X,ar as U,as as Z,c as de,at as ce,au as me,av as he,aw as fe,d as ze,n as k,u as Qe,a as Le,h as ie,b as Ve,G as Ye,e as qe,T as D,i as Ke,ai as Je,ax as Xe,o as Ze,m as R,B as et,A as tt}from"./App-B8yQqlR8.js";import{P as at}from"./PageHeader-C8tPdf3i.js";import{S as rt}from"./StatsCards-DWiTYLAM.js";import{F as ee,a as Ie}from"./PencilIcon-BWQp-Vy9.js";import{F as lt}from"./TrashIcon-w2paRgyg.js";import{t as nt,a as st,b as it,c as ot,d as dt,e as ct}from"./chunk-F3UDT23P-COogn4qm.js";import{p as Me}from"./chunk-O5I3QTYU-xES2Zt8X.js";import{u as Ge}from"./chunk-R6AK6OQ4-DNrKuc_F.js";import{F as mt}from"./CheckCircleIcon-Dw2IVKG9.js";import{F as ht}from"./TrophyIcon-PKfqgRYB.js";import{F as Be}from"./UserPlusIcon-DotiiAxJ.js";import{F as ft}from"./TableCellsIcon-CymUz0OM.js";import{b as pt,F as gt}from"./AdjustmentsHorizontalIcon-BFYs3dV3.js";import{C as bt}from"./CircularProgress-DJkS65QC.js";import{s as oe,l as T}from"./chunk-2GIFKCNQ-CocKCi1u.js";import"./app-CA3O2NZp.js";import"./chunk-D5XJWRAV-DReVokZ2.js";import"./chunk-MZRCPRP2-DBrPm_3w.js";import"./LiveAnnouncer-BHN36TTO.js";import"./useHasTabbableChild-14wDzunC.js";import"./chunk-7F3ZLNJ6-BH4VRWdz.js";import"./index-CokAva9Y.js";import"./chunk-2PG5BJX6-h4GTMymb.js";function ut({title:x,titleId:m,...h},f){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:f,"aria-labelledby":m},h),x?s.createElement("title",{id:m},x):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const wt=s.forwardRef(ut),xt=({allUsers:x,departments:m,designations:h,attendanceTypes:f,setUsers:te,isMobile:d,isTablet:B,pagination:i,onPageChange:j,onRowsPerPageChange:ae,totalUsers:re=0,loading:$=!1,updateEmployeeOptimized:u,deleteEmployeeOptimized:le})=>{const[w,n]=s.useState(""),[N,A]=s.useState(!1),[ne,O]=s.useState(null),[pe,_]=s.useState({}),v=async(a,c)=>{n(`${a}-department`);try{if((await L.post(route("user.updateDepartment",{id:a}),{department:c})).status===200){const b=m.find(S=>S.id===parseInt(c))||null;u==null||u(a,{department_id:c,department:b,designation_id:null,designation:null}),k.success("Department updated successfully")}}catch(p){console.error("Error updating department:",p),k.error("Failed to update department")}finally{n("")}},o=async(a,c)=>{n(`${a}-designation`);try{if((await L.post(route("user.updateDesignation",{id:a}),{designation_id:c})).status===200){const b=h.find(S=>S.id===parseInt(c))||null;u==null||u(a,{designation_id:c,designation:b}),k.success("Designation updated successfully")}}catch{k.error("Failed to update designation")}finally{n("")}},W=async(a,c)=>{var p;n(`${a}-attendance_type`);try{if((await L.post(route("user.updateAttendanceType",{id:a}),{attendance_type_id:c})).status===200){const S=((p=f.find(V=>V.id===parseInt(c)))==null?void 0:p.name)||"";u&&u(a,{attendance_type_id:c,attendance_type:S}),k.success("Attendance type updated successfully")}}catch(b){console.error("Error updating attendance type:",b),k.error("Failed to update attendance type")}finally{n("")}},Q=async a=>{n(`${a}-delete`);try{if(!confirm("Are you sure you want to delete this employee?")){n("");return}(await L.delete(route("user.delete",{id:a}))).status===200&&(le&&le(a),k.success("Employee deleted successfully"))}catch(c){console.error("Error deleting employee:",c),k.error("Failed to delete employee")}finally{n("")}},E=s.useMemo(()=>{const a=[{name:"#",uid:"sl"},{name:"EMPLOYEE",uid:"employee"},{name:"DEPARTMENT",uid:"department"},{name:"DESIGNATION",uid:"designation"},{name:"ACTIONS",uid:"actions"}];return d||a.splice(2,0,{name:"CONTACT",uid:"contact"}),!d&&!B&&a.splice(a.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type"}),a},[d,B]),se=(a,c,p)=>{var Y,q,I;const b=a[c],z=(i!=null&&i.currentPage&&(i!=null&&i.perPage)?Number((i.currentPage-1)*i.perPage):0)+(typeof p=="number"?p:0)+1;switch(c){case"sl":return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:z})})});case"employee":return r("div",{children:[e(Ge,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:d?"sm":"md",fallback:e(ze,{className:"w-4 h-4"})},name:a==null?void 0:a.name,description:d?null:`ID: ${(a==null?void 0:a.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),d&&r("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10",children:[r("div",{className:"flex items-center gap-1",children:[e(wt,{className:"w-3 h-3"}),(a==null?void 0:a.employee_id)||"N/A"]}),r("div",{className:"flex items-center gap-1",children:[e(he,{className:"w-3 h-3"}),a==null?void 0:a.email]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-1",children:[e(fe,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(he,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(fe,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"department":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(Z,{children:[e(J,{children:e(F,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",isLoading:w===`${a.id}-department`,spinner:e(H,{size:"sm"}),startContent:e(me,{className:"w-4 h-4"}),endContent:e(ee,{className:"w-4 h-4 rotate-90"}),isDisabled:w===`${a.id}-department`,children:((Y=a.department)==null?void 0:Y.name)||"Select Department"})}),e(X,{"aria-label":"Department options",children:m==null?void 0:m.map(g=>e(U,{onPress:()=>v(a.id,g.id),children:g.name},g.id.toString()))})]})});case"designation":const M=(q=a.department)==null?void 0:q.id,K=(h==null?void 0:h.filter(g=>g.department_id===parseInt(M)))||[];return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(Z,{children:[e(J,{children:e(F,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",isLoading:w===`${a.id}-designation`,spinner:e(H,{size:"sm"}),startContent:e(ce,{className:"w-4 h-4"}),endContent:e(ee,{className:"w-4 h-4 rotate-90"}),isDisabled:!M||w===`${a.id}-designation`,children:((I=a.designation)==null?void 0:I.title)||"Select Designation"})}),e(X,{"aria-label":"Designation options",children:K.map(g=>e(U,{onPress:()=>o(a.id,g.id),children:g.title},g.id.toString()))})]})});case"attendance_type":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(Z,{children:[e(J,{children:e(F,{variant:"bordered",size:"sm",className:"justify-between bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 min-w-[150px]",isLoading:w===`${a.id}-attendance_type`,spinner:e(H,{size:"sm"}),startContent:e(de,{className:"w-4 h-4"}),endContent:e(ee,{className:"w-4 h-4 rotate-90"}),isDisabled:w===`${a.id}-attendance_type`,children:a.attendance_type||"Select Type"})}),e(X,{"aria-label":"Attendance Type options",children:f==null?void 0:f.map(g=>e(U,{onPress:()=>W(a.id,g.id),children:g.name},g.id.toString()))})]})});case"actions":return e("div",{className:"relative flex justify-center items-center",children:r(Z,{children:[e(J,{children:e(F,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground",children:e(ee,{className:"w-5 h-5"})})}),r(X,{"aria-label":"Employee Actions",children:[e(U,{startContent:e(Ie,{className:"w-4 h-4"}),onPress:()=>window.location.href=route("profile",{user:a.id}),children:"Edit Profile"},"edit"),e(U,{className:"text-danger",color:"danger",loading:w===`${a.id}-delete`,startContent:w===`${a.id}-delete`?e(H,{size:"sm"}):e(lt,{className:"w-4 h-4"}),onPress:()=>Q(a.id),disabled:w===`${a.id}-delete`,children:"Delete"},"delete")]})]})});default:return b}};return r("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg",style:{maxHeight:"calc(100vh - 200px)"},children:[e("div",{className:"overflow-auto flex-grow",children:r(nt,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:d,children:[e(st,{columns:E,children:a=>e(it,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.uid==="sl"?60:void 0,children:a.name},a.uid)}),e(ot,{items:x||[],emptyContent:"No employees found",loadingContent:e(H,{}),isLoading:$,children:(a,c)=>{const p=x?x.findIndex(b=>b.id===a.id):c;return e(dt,{children:b=>e(ct,{children:se(a,b,p)})},a.id)}})]})}),!i||$?null:r("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[r("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(i.currentPage-1)*i.perPage+1," to ",Math.min(i.currentPage*i.perPage,i.total)," of ",i.total," employees"]}),e(Me,{total:Math.ceil(i.total/i.perPage),initialPage:i.currentPage,page:i.currentPage,onChange:j,size:d?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]})]})},vt=({title:x,departments:m,designations:h,attendanceTypes:f})=>{var I,M,K,g,be,ue,we,xe,ve,ye,Ne,_e,Ce,Pe,ke,Se,De,Fe,$e;const te=Qe(),d=Le(te.breakpoints.down("sm")),B=Le(te.breakpoints.down("md")),[i,j]=s.useState([]),[ae,re]=s.useState(!0),[$,u]=s.useState(0),[le,w]=s.useState(1),[n,N]=s.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[A,ne]=s.useState("table"),[O,pe]=s.useState(!1),[_,v]=s.useState({currentPage:1,perPage:10,total:0}),[o,W]=s.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),Q=s.useCallback(async()=>{re(!0);try{const{data:t}=await L.get(route("employees.paginate"),{params:{page:_.currentPage,perPage:_.perPage,search:n.search,department:n.department,designation:n.designation,attendanceType:n.attendanceType}});j(t.employees.data),u(t.employees.total),w(t.employees.last_page),v(l=>({...l,total:t.employees.total})),t.stats&&W(t.stats)}catch(t){console.error("Error fetching employees:",t),k.error("Failed to load employees data")}finally{re(!1)}},[_.currentPage,_.perPage,n]),E=s.useCallback(async()=>{try{const{data:t}=await L.get(route("employees.stats"));t.stats&&W(t.stats)}catch(t){console.error("Error fetching employee stats:",t)}},[]);s.useEffect(()=>{Q(),E()},[Q,E]);const se=s.useCallback(t=>{N(l=>({...l,search:t})),v(l=>({...l,currentPage:1}))},[]),ge=s.useCallback(t=>{N(l=>({...l,department:t,designation:t!=="all"?"all":l.designation})),v(l=>({...l,currentPage:1}))},[]),a=s.useCallback(t=>{N(l=>({...l,designation:t})),v(l=>({...l,currentPage:1}))},[]),c=s.useCallback(t=>{N(l=>({...l,attendanceType:t})),v(l=>({...l,currentPage:1}))},[]),p=s.useCallback(t=>{v(l=>({...l,currentPage:t}))},[]),b=s.useCallback(t=>{v(l=>({...l,perPage:t,currentPage:1}))},[]),S=s.useCallback((t,l)=>{j(C=>C.map(P=>P.id===t?{...P,...l}:P))},[]),V=s.useCallback(t=>{j(l=>l.filter(C=>C.id!==t)),u(l=>l-1),v(l=>({...l,total:l.total-1})),E()},[E]),z=s.useMemo(()=>n.department==="all"?h:h.filter(t=>t.department_id===parseInt(n.department)),[h,n.department]),Y=s.useMemo(()=>{var t,l,C,P,G,y,Ae,Re,je,Ee,Te;return[{title:"Total Employees",value:((t=o.overview)==null?void 0:t.total_employees)||0,icon:e(ie,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=o.overview)==null?void 0:l.active_employees)||0,icon:e(mt,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((P=(C=o.workforce_health)==null?void 0:C.status_ratio)==null?void 0:P.active_percentage)||0}% Active`},{title:"Departments",value:((G=o.overview)==null?void 0:G.total_departments)||0,icon:e(me,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((y=o.overview)==null?void 0:y.total_designations)||0,icon:e(ce,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Ae=o.workforce_health)==null?void 0:Ae.retention_rate)||0}%`,icon:e(ht,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((je=(Re=o.hiring_trends)==null?void 0:Re.recent_hires)==null?void 0:je.last_30_days)||0,icon:e(Be,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ee=o.hiring_trends)==null?void 0:Ee.monthly_growth_rate)||0}%`,icon:e(Ve,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Te=o.overview)==null?void 0:Te.total_attendance_types)||0,icon:e(de,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[o]),q=({user:t,index:l})=>{const C=m==null?void 0:m.find(y=>y.id===t.department_id),P=h==null?void 0:h.find(y=>y.id===t.designation_id),G=f==null?void 0:f.find(y=>y.id===t.attendance_type_id);return e(We,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>window.location.href=route("profile",{user:t.id}),children:r(Oe,{className:"p-4 flex flex-col h-full",children:[r("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex-shrink-0",children:e(Ge,{avatarProps:{radius:"lg",src:t==null?void 0:t.profile_image,size:"md",fallback:e(ze,{className:"w-4 h-4"})},name:t==null?void 0:t.name,description:`ID: ${(t==null?void 0:t.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left text-sm",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}})}),e("div",{className:"flex-1 min-w-0 flex justify-end",children:e(F,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:y=>{y.stopPropagation(),window.location.href=route("profile",{user:t.id})},children:e(Ie,{className:"w-4 h-4"})})})]}),e("div",{className:"flex-1 flex flex-col gap-3",children:r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(he,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs truncate",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(fe,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:t==null?void 0:t.phone})]})]})}),r("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[C&&e(R,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(me,{className:"w-3 h-3"}),children:C.name}),P&&e(R,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(ce,{className:"w-3 h-3"}),children:P.title}),G&&e(R,{size:"sm",variant:"bordered",className:"text-xs",startContent:e(de,{className:"w-3 h-3"}),children:G.name})]})]})})};return r(Ue,{children:[e(He,{title:x}),e(et,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Ye,{in:!0,timeout:800,children:e(qe,{children:e(at,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e(ie,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:d?"Add":"Add Employee",icon:e(Be,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:r("div",{className:"p-4 sm:p-6",children:[e(rt,{stats:Y,className:"mb-6"}),r("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(D,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Department Distribution"}),e("div",{className:"space-y-3",children:(M=(I=o.distribution)==null?void 0:I.by_department)==null?void 0:M.slice(0,5).map((t,l)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},l))})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(D,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Hiring Trends"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((g=(K=o.hiring_trends)==null?void 0:K.recent_hires)==null?void 0:g.last_30_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((ue=(be=o.hiring_trends)==null?void 0:be.recent_hires)==null?void 0:ue.last_90_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"This Year"}),e("span",{className:"text-sm font-medium text-foreground",children:((xe=(we=o.hiring_trends)==null?void 0:we.recent_hires)==null?void 0:xe.last_year)||0})]}),e("div",{className:"pt-2 border-t border-white/10",children:r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),r("span",{className:`text-sm font-medium ${(((ve=o.hiring_trends)==null?void 0:ve.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((ye=o.hiring_trends)==null?void 0:ye.monthly_growth_rate)||0,"%"]})]})})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(D,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Workforce Health"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Retention Rate"}),r("span",{className:"text-sm font-medium text-green-400",children:[((Ne=o.workforce_health)==null?void 0:Ne.retention_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),r("span",{className:"text-sm font-medium text-orange-400",children:[((_e=o.workforce_health)==null?void 0:_e.turnover_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Active Employees"}),r("span",{className:"text-sm font-medium text-blue-400",children:[((Pe=(Ce=o.workforce_health)==null?void 0:Ce.status_ratio)==null?void 0:Pe.active_percentage)||0,"%"]})]})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(D,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Attendance Types"}),e("div",{className:"space-y-3",children:(Se=(ke=o.distribution)==null?void 0:ke.by_attendance_type)==null?void 0:Se.map((t,l)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},l))})]})]}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(Ke,{label:"Search Employees",variant:"bordered",placeholder:"Search by name, email, or employee ID...",value:n.search,onValueChange:se,startContent:e(Je,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:d?"sm":"md"})}),r("div",{className:"flex gap-2 items-end",children:[r(pt,{variant:"bordered",className:"bg-white/5",children:[r(F,{isIconOnly:d,color:A==="table"?"primary":"default",onPress:()=>ne("table"),className:A==="table"?"bg-blue-500/20":"",children:[e(ft,{className:"w-4 h-4"}),!d&&e("span",{className:"ml-1",children:"Table"})]}),r(F,{isIconOnly:d,color:A==="grid"?"primary":"default",onPress:()=>ne("grid"),className:A==="grid"?"bg-blue-500/20":"",children:[e(Xe,{className:"w-4 h-4"}),!d&&e("span",{className:"ml-1",children:"Grid"})]})]}),r(F,{isIconOnly:d,variant:"bordered",onPress:()=>pe(!O),className:O?"bg-purple-500/20":"bg-white/5",children:[e(gt,{className:"w-4 h-4"}),!d&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),O&&e(Ze,{in:!0,timeout:300,children:r("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r(oe,{label:"Department",variant:"bordered",selectedKeys:n.department!=="all"?[n.department]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";ge(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(T,{value:"all",children:"All Departments"},"all"),m==null?void 0:m.map(t=>e(T,{value:t.id.toString(),children:t.name},t.id.toString()))]}),r(oe,{label:"Designation",variant:"bordered",selectedKeys:n.designation!=="all"?[n.designation]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";a(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(T,{value:"all",children:"All Designations"},"all"),z==null?void 0:z.map(t=>e(T,{value:t.id.toString(),children:t.title},t.id.toString()))]}),!d&&r(oe,{label:"Attendance Type",variant:"bordered",selectedKeys:n.attendanceType!=="all"?[n.attendanceType]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";c(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(T,{value:"all",children:"All Attendance Types"},"all"),f==null?void 0:f.map(t=>e(T,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(n.search||n.department!=="all"||n.designation!=="all"||n.attendanceType!=="all")&&r("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[n.search&&r(R,{variant:"flat",color:"primary",size:"sm",onClose:()=>N(t=>({...t,search:""})),children:["Search: ",n.search]}),n.department!=="all"&&r(R,{variant:"flat",color:"secondary",size:"sm",onClose:()=>N(t=>({...t,department:"all"})),children:["Department: ",(De=m==null?void 0:m.find(t=>t.id===parseInt(n.department)))==null?void 0:De.name]}),n.designation!=="all"&&r(R,{variant:"flat",color:"warning",size:"sm",onClose:()=>N(t=>({...t,designation:"all"})),children:["Designation: ",(Fe=h==null?void 0:h.find(t=>t.id===parseInt(n.designation)))==null?void 0:Fe.title]}),n.attendanceType!=="all"&&r(R,{variant:"flat",color:"success",size:"sm",onClose:()=>N(t=>({...t,attendanceType:"all"})),children:["Attendance: ",($e=f==null?void 0:f.find(t=>t.id===parseInt(n.attendanceType)))==null?void 0:$e.name]})]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r(D,{variant:"h6",className:"font-semibold text-foreground",children:[A==="table"?"Employee Table":"Employee Grid",r("span",{className:"text-sm text-default-500 ml-2",children:["(",$," ",$===1?"employee":"employees",")"]})]})}),ae?r("div",{className:"text-center py-8",children:[e(bt,{size:40}),e(D,{className:"mt-4",color:"textSecondary",children:"Loading employees data..."})]}):A==="table"?e(xt,{allUsers:i,departments:m,designations:h,attendanceTypes:f,setUsers:j,isMobile:d,isTablet:B,pagination:_,onPageChange:p,onRowsPerPageChange:b,totalUsers:$,loading:ae,updateEmployeeOptimized:S,deleteEmployeeOptimized:V}):r("div",{className:"p-4",children:[i.length>0?e("div",{className:`grid gap-4 ${d?"grid-cols-1":B?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:i.map((t,l)=>e(q,{user:t,index:l},t.id))}):r("div",{className:"text-center py-8",children:[e(ie,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(D,{variant:"body1",color:"textSecondary",children:"No employees found"}),e(D,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),i.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Me,{total:Math.ceil($/_.perPage),initialPage:_.currentPage,page:_.currentPage,onChange:p,size:d?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};vt.layout=x=>e(tt,{children:x});export{vt as default};
