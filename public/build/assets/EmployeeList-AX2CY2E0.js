import{a as e,j as r,b as a,F as t,Y as n}from"./app-C1oUzUEh.js";import{g as i,j as l,r as d,w as o,z as s,A as p,D as c,E as h,H as g,T as u,F as x,J as m,S as b,M as y,c as f,K as w,L as C,v as k,e as S,N as v,B as A,f as j,a as D}from"./vendor-CRc6Zzqq.js";import{a as E,B as F,G as N,A as P}from"./App-Drx2VRDq.js";import{A as M}from"./Add-Bj5HSV4t.js";const z=i(l.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),I=i(l.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),T=({allUsers:n,departments:i,designations:l})=>{const[S,v]=d.useState(n),A=o(),[j,D]=d.useState({});async function N(a,n,i){const l=new Promise((async(e,r)=>{try{const t=i.target.value,l=await fetch(route("profile.update"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:n,[a]:t})}),d=await l.json();l.ok?(v((e=>e.map((e=>{if(e.id===n){const r={...e};return"department"===a&&e.department!==t&&(r.designation=null),r[a]=t,r}return e})))),e([...d.messages])):r(d.messages)}catch(t){r(["An unexpected error occurred."])}}));F.promise(l,{pending:{render:()=>r("div",{style:{display:"flex",alignItems:"center"},children:[e(k,{}),r("span",{style:{marginLeft:"8px"},children:["Updating employee ",a,"..."]})]}),icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}},success:{render:({data:r})=>e(t,{children:r.map(((r,a)=>e("div",{children:r},a)))}),icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}},error:{render:({data:r})=>e(t,{children:r.map(((r,a)=>e("div",{children:r},a)))}),icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}}})}const P=e=>{D((r=>({...r,[e]:null})))};return e(C,{style:{maxHeight:"70vh",overflowY:"auto"},children:r(w,{"aria-label":"employee table",children:[e(s,{children:r(p,{children:[e(c,{sx:{whiteSpace:"nowrap"},children:"Employee ID"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Name"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Email"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Mobile"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Join Date"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Department"}),e(c,{sx:{whiteSpace:"nowrap"},children:"Role"}),e(c,{sx:{whiteSpace:"nowrap"},align:"right",children:"Action"})]})}),e(h,{children:S.map((n=>{var d;return r(p,{children:[e(c,{sx:{whiteSpace:"nowrap"},children:n.employee_id||"N/A"}),r(c,{sx:{display:"flex",alignItems:"center",whiteSpace:"nowrap"},children:[e(g,{src:`assets/images/users/${n.user_name}.jpg`,alt:n.first_name}),r(u,{sx:{marginLeft:"10px"},children:[e(a,{style:{textDecoration:"none",color:A.palette.text.primary,fontWeight:"bold"},href:route("profile",{user:n.id}),children:n.name||"N/A"}),e("br",{}),(null==(d=l.find((e=>e.id===n.designation)))?void 0:d.title)||"N/A"]})]}),e(c,{sx:{whiteSpace:"nowrap"},children:n.phone||"N/A"}),e(c,{sx:{whiteSpace:"nowrap"},children:n.email||"N/A"}),e(c,{sx:{whiteSpace:"nowrap"},children:n.date_of_joining||"N/A"}),e(c,{sx:{whiteSpace:"nowrap"},children:r(x,{size:"small",fullWidth:!0,children:[e(m,{id:"department",children:"Department"}),r(b,{labelId:"department",id:`department-select-${n.id}`,value:n.department||"na",onChange:e=>N("department",n.id,e),label:"Department",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(y,{value:"na",disabled:!0,children:"Select Department"}),i.map((r=>e(y,{value:r.id,children:r.name},r.id)))]})]})}),e(c,{sx:{whiteSpace:"nowrap"},children:r(x,{size:"small",fullWidth:!0,children:[e(m,{id:"designation",children:"Designation"}),r(b,{labelId:"designation",id:`designation-select-${n.id}`,value:n.designation||"na",onChange:e=>N("designation",n.id,e),disabled:!n.department,label:"Designation",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(y,{value:"na",disabled:!0,children:"Select Designation"}),l.filter((e=>e.department_id===n.department)).map((r=>e(y,{value:r.id,children:r.title},r.id)))]})]})}),r(c,{sx:{whiteSpace:"nowrap"},align:"right",children:[e(f,{component:a,href:route("profile",{user:n.id}),onClick:()=>{P(n.id)},children:e(E,{})}),e(f,{component:a,href:route("profile",{user:n.id}),onClick:()=>{P(n.id)},children:e(I,{})}),r(f,{component:a,href:route("profile",{user:n.id}),onClick:()=>{(async a=>{const n=new Promise((async(e,r)=>{try{const t=await fetch(route("profile.delete"),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({user_id:a})}),n=await t.json();t.ok?(v((e=>e.filter((e=>e.id!==a)))),e([n.message])):r([n.message])}catch(t){r(["An error occurred while deleting user. Please try again."])}}));F.promise(n,{pending:{render:()=>r("div",{style:{display:"flex",alignItems:"center"},children:[e(k,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting user..."})]}),icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}},success:{render:({data:r})=>e(t,{children:r.map(((r,a)=>e("div",{children:r},a)))}),icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}},error:{render:({data:r})=>e(t,{children:r.map(((r,a)=>e("div",{children:r},a)))}),icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:A.glassCard.backgroundColor,border:A.glassCard.border,color:A.palette.text.primary}}})})(n.id)},children:[e(z,{})," "]})]})]},n.id)}))})]})})},_=({title:a,allUsers:t,departments:i,designations:l})=>r(P,{children:[e(n,{title:a}),e(A,{sx:{display:"flex",justifyContent:"center",p:2},children:e(S,{in:!0,children:r(N,{children:[e(v,{title:"Employees",sx:{padding:"24px"},action:e(A,{display:"flex",gap:2,children:e(j,{title:"Add Employee",variant:"outlined",color:"success",startIcon:e(M,{}),children:"Add Employee"})})}),e(D,{children:e(T,{allUsers:t,departments:i,designations:l})})]})})})]});export{_ as default};
