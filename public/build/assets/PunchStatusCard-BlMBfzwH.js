import{r as u,i as f,J as Le,a as pe,b as i,j as n,R as Me}from"./app-CveJbRXQ.js";import{G as Ae}from"./GlassDialog-iJ24XI2m.js";import{x as We,y as Fe,n as Oe,_ as we,o as B,ac as ve,p as he,s as fe,a3 as _,q as Ie,m as $,u as Be,Q as G,c as je,B as m,d as l,L as Y,e as F,af as be,S as Ne,T as ue,I as ye,M as De,aO as Ee}from"./App-DTho_2ZU.js";import{C as He}from"./CardContent-B1QfEKwA.js";import{A as Se}from"./Avatar-Czo7x4iV.js";import{C as Ue}from"./CircularProgress-CvaeIAO4.js";import{B as Ce}from"./Button-orGW05c1.js";import{S as Ve}from"./Security-CsVl4alW.js";import{A as $e}from"./Alert-DniOu63q.js";import{L as Ge,a as Ye}from"./List-CF9yaYZf.js";import{L as Ze}from"./ListItem-nXDwEnWl.js";import{b as Je}from"./listItemTextClasses-D5ZtogZY.js";import{L as qe}from"./ListItemText-D2ldc9Zy.js";import{D as Qe}from"./Divider-7Jnrv9Vi.js";import{C as Ke}from"./CheckCircle-X9Zkazaw.js";import{b as Xe,c as et}from"./DialogContent-C62C4AXW.js";import{A as tt}from"./AccessTime-ViruqU9_.js";import{a as s}from"./colorManipulator-BEBYJa86.js";import"./app-8mzQ3Kcd.js";import"./useSlot-BepY5gcX.js";import"./dividerClasses-ARlLskvy.js";const Te=e=>{const a=u.useRef({});return u.useEffect(()=>{a.current=e}),a.current};function rt(e){const{badgeContent:a,invisible:t=!1,max:c=99,showZero:x=!1}=e,S=Te({badgeContent:a,max:c});let y=t;t===!1&&a===0&&!x&&(y=!0);const{badgeContent:p,max:z=c}=y?S:e,P=p&&Number(p)>z?`${z}+`:p;return{badgeContent:p,invisible:y,max:z,displayValue:P}}function nt(e){return Fe("MuiBadge",e)}const R=We("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ot=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],me=10,ge=4,at=e=>{const{color:a,anchorOrigin:t,invisible:c,overlap:x,variant:S,classes:y={}}=e,p={root:["root"],badge:["badge",S,c&&"invisible",`anchorOrigin${_(t.vertical)}${_(t.horizontal)}`,`anchorOrigin${_(t.vertical)}${_(t.horizontal)}${_(x)}`,`overlap${_(x)}`,a!=="default"&&`color${_(a)}`]};return Ie(p,nt,y)},it=fe("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),st=fe("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.badge,a[t.variant],a[`anchorOrigin${_(t.anchorOrigin.vertical)}${_(t.anchorOrigin.horizontal)}${_(t.overlap)}`],t.color!=="default"&&a[`color${_(t.color)}`],t.invisible&&a.invisible]}})(({theme:e})=>{var a;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:me*2,lineHeight:1,padding:"0 6px",height:me*2,borderRadius:me,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((a=e.vars)!=null?a:e).palette).filter(t=>{var c,x;return((c=e.vars)!=null?c:e).palette[t].main&&((x=e.vars)!=null?x:e).palette[t].contrastText}).map(t=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:ge,height:ge*2,minWidth:ge*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),ct=u.forwardRef(function(a,t){var c,x,S,y,p,z;const P=Oe({props:a,name:"MuiBadge"}),{anchorOrigin:Z={vertical:"top",horizontal:"right"},className:te,component:L,components:C={},componentsProps:J={},children:re,overlap:M="rectangular",color:j="default",invisible:ne=!1,max:q=99,badgeContent:Q,slots:k,slotProps:w,showZero:W=!1,variant:N="standard"}=P,K=we(P,ot),{badgeContent:D,invisible:oe,max:ae,displayValue:ie}=rt({max:q,invisible:ne,badgeContent:Q,showZero:W}),se=Te({anchorOrigin:Z,color:j,overlap:M,variant:N,badgeContent:Q}),X=oe||D==null&&N!=="dot",{color:ce=j,overlap:E=M,anchorOrigin:le=Z,variant:ee=N}=X?se:P,H=ee!=="dot"?ie:void 0,U=B({},P,{badgeContent:D,invisible:X,max:ae,displayValue:H,showZero:W,anchorOrigin:le,color:ce,overlap:E,variant:ee}),V=at(U),r=(c=(x=k==null?void 0:k.root)!=null?x:C.Root)!=null?c:it,o=(S=(y=k==null?void 0:k.badge)!=null?y:C.Badge)!=null?S:st,d=(p=w==null?void 0:w.root)!=null?p:J.root,v=(z=w==null?void 0:w.badge)!=null?z:J.badge,b=ve({elementType:r,externalSlotProps:d,externalForwardedProps:K,additionalProps:{ref:t,as:L},ownerState:U,className:he(d==null?void 0:d.className,V.root,te)}),O=ve({elementType:o,externalSlotProps:v,ownerState:U,className:he(V.badge,v==null?void 0:v.className)});return f.jsxs(r,B({},b,{children:[re,f.jsx(o,B({},O,{children:H}))]}))}),lt=["className"],dt=e=>{const{alignItems:a,classes:t}=e;return Ie({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},Je,t)},pt=fe("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.alignItems==="flex-start"&&a.alignItemsFlexStart]}})(({theme:e,ownerState:a})=>B({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},a.alignItems==="flex-start"&&{marginTop:8})),ut=u.forwardRef(function(a,t){const c=Oe({props:a,name:"MuiListItemIcon"}),{className:x}=c,S=we(c,lt),y=u.useContext(Ge),p=B({},c,{alignItems:y.alignItems}),z=dt(p);return f.jsx(pt,B({className:he(z.root,x),ownerState:p,ref:t},S))}),mt=$(f.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),gt=$(f.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),ht=$(f.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),ke=$(f.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed"),ft=$(f.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language"),_e=$(f.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),xt=$([f.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),f.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),vt=$(f.jsx("path",{d:"M12.01 21.49 23.64 7c-.45-.34-4.93-4-11.64-4C5.28 3 .81 6.66.36 7l11.63 14.49.01.01z"}),"SignalWifi4Bar"),ze=$(f.jsx("path",{d:"M6 6h12v12H6z"}),"Stop"),bt=$(f.jsx("path",{d:"M15 1H9v2h6zm-4 13h2V8h-2zm8.03-6.61 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"TimerOutlined"),yt=$(f.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zM7 10h5v5H7z"}),"Today"),St=$(f.jsx("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline"),Ht=()=>{var V;const e=Be(),{auth:a}=Le().props,t=a.user,[c,x]=u.useState(null),[S,y]=u.useState(!1),[p,z]=u.useState([]),[P,Z]=u.useState("00:00:00"),[te,L]=u.useState("00:00:00"),[C,J]=u.useState(null),[re,M]=u.useState(!1),[j,ne]=u.useState(new Date),[q,Q]=u.useState({punches:!1,rules:!1,validation:!1}),[k,w]=u.useState({location:!1,network:!0,device:!0}),[W,N]=u.useState({ip:"Unknown",accuracy:"N/A",timestamp:null});u.useEffect(()=>{const r=setInterval(()=>{const o=new Date;ne(o),c==="punched_in"&&p.length>0&&K(o)},1e3);return()=>clearInterval(r)},[c,p]),u.useEffect(()=>{D(),oe(),ie()},[]);const K=r=>{let o=0;p.forEach((g,xe)=>{if(g.punchin_time){let A;if(typeof g.punchin_time=="string"&&g.punchin_time.includes(":")&&!g.punchin_time.includes("T")){const h=new Date,[I,T,de]=g.punchin_time.split(":");A=new Date(h.getFullYear(),h.getMonth(),h.getDate(),parseInt(I),parseInt(T),parseInt(de||0))}else A=new Date(g.punchin_time);if(isNaN(A.getTime())){console.warn("Invalid punch in time:",g.punchin_time);return}if(g.punchout_time){let h;if(typeof g.punchout_time=="string"&&g.punchout_time.includes(":")&&!g.punchout_time.includes("T")){const T=new Date,[de,Re,Pe]=g.punchout_time.split(":");h=new Date(T.getFullYear(),T.getMonth(),T.getDate(),parseInt(de),parseInt(Re),parseInt(Pe||0))}else h=new Date(g.punchout_time);if(isNaN(h.getTime())){console.warn("Invalid punch out time:",g.punchout_time);return}const I=Math.floor((h-A)/1e3);I>0&&(o+=I)}else{const h=Math.floor((r-A)/1e3);h>0&&(o+=h)}}}),(isNaN(o)||o<0)&&(o=0);const d=Math.floor(o/3600),v=Math.floor(o%3600/60),b=o%60,O=`${d.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`;L(O)},D=async()=>{try{const o=(await pe.get(route("attendance.current-user-punch"))).data;if(z(o.punches||[]),Z(o.total_production_time||"00:00:00"),J(o.isUserOnLeave),o.punches&&o.punches.length>0){const v=o.punches[o.punches.length-1].punchout_time?"punched_out":"punched_in";if(x(v),v==="punched_in")setTimeout(()=>{K(new Date)},100);else if(o.total_production_time&&o.total_production_time!=="00:00:00")L(o.total_production_time);else{let b=0;o.punches.forEach(h=>{if(h.punchin_time&&h.punchout_time)try{const I=new Date(h.punchin_time),T=new Date(h.punchout_time);!isNaN(I.getTime())&&!isNaN(T.getTime())&&(b+=Math.floor((T-I)/1e3))}catch(I){console.warn("Error calculating session time:",I)}});const O=Math.floor(b/3600),g=Math.floor(b%3600/60),xe=b%60,A=`${O.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${xe.toString().padStart(2,"0")}`;L(A)}}else x("not_punched"),L("00:00:00")}catch(r){console.error("Error fetching current status:",r),G.error("Failed to fetch attendance status"),L("00:00:00")}},oe=()=>{if(!navigator.geolocation){w(r=>({...r,location:!1}));return}navigator.geolocation.getCurrentPosition(()=>{w(r=>({...r,location:!0}))},r=>{console.error("Error checking location connection:",r),w(o=>({...o,location:!1}))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},ae=()=>{if(!navigator.geolocation)throw new mt("Geolocation is not supported by this browser");return new Promise((r,o)=>{navigator.geolocation.getCurrentPosition(d=>{const v={latitude:d.coords.latitude,longitude:d.coords.longitude,accuracy:d.coords.accuracy};r(v)},d=>{console.error("Error getting location data:",d),o(d)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})},ie=()=>{w(r=>({...r,network:navigator.onLine,device:!0}))},se=()=>{const r=document.createElement("canvas"),o=r.getContext("2d");return o.textBaseline="top",o.font="14px Arial",o.fillText("Device fingerprint",2,2),{userAgent:navigator.userAgent,screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,canvasFingerprint:r.toDataURL(),timestamp:Date.now()}},X=async()=>{if(C){G.warning("You are on leave today. Cannot punch in/out.");return}y(!0);try{const r=await ae(),o=se();let d="Unknown";try{d=(await pe.get(route("getClientIp"))).data.ip}catch(O){console.warn("Could not fetch IP address:",O)}N({ip:d,accuracy:r!=null&&r.accuracy?`${Math.round(r.accuracy)}m`:"N/A",timestamp:new Date().toLocaleString()});const v={lat:r==null?void 0:r.latitude,lng:r==null?void 0:r.longitude,accuracy:r==null?void 0:r.accuracy,ip:d,wifi_ssid:"Unknown",device_fingerprint:JSON.stringify(o),user_agent:navigator.userAgent,timestamp:new Date().toISOString()},b=await pe.post(route("attendance.punch"),v);b.data.status==="success"?(G.success(b.data.message,{style:{backdropFilter:"blur(16px) saturate(200%)",background:s(e.palette.success.main,.1),border:`1px solid ${s(e.palette.success.main,.2)}`,color:e.palette.text.primary}}),M(!0),await D()):G.error(b.data.message)}catch(r){console.error("Error during punch operation:",r),G.error(r.response.data.message,{style:{backdropFilter:"blur(16px) saturate(200%)",background:s(e.palette.success.main,.1),border:`1px solid ${s(e.palette.success.main,.2)}`,color:e.palette.text.primary}})}finally{y(!1)}},ce=r=>{Q(o=>({...o,[r]:!o[r]}))},E=()=>{if(C)return"warning";switch(c){case"punched_in":return"success";case"punched_out":return"info";default:return"default"}},le=()=>{if(C)return"On Leave";switch(c){case"punched_in":return"Checked In";case"punched_out":return"Checked Out";default:return"Ready to Check In"}},ee=()=>C?"On Leave":c==="punched_in"?"Check Out":"Check In",H=r=>{if(!r)return"--:--";try{let o;if(typeof r=="string"&&r.includes(":")&&!r.includes("T")){const d=new Date,[v,b,O]=r.split(":");o=new Date(d.getFullYear(),d.getMonth(),d.getDate(),v,b,O||0)}else o=new Date(r);return isNaN(o.getTime())?r:o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(o){return console.warn("Error formatting time:",r,o),r}},U=r=>{if(!r)return"Location not available";try{if(typeof r=="object"&&r.lat&&r.lng)return r.address&&r.address.trim()?r.address.substring(0,30):`${r.lat.toFixed(4)}, ${r.lng.toFixed(4)}`;if(typeof r=="string")try{const o=JSON.parse(r);if(o.lat&&o.lng)return o.address&&o.address.trim()?o.address.substring(0,30):`${o.lat.toFixed(4)}, ${o.lng.toFixed(4)}`}catch{return r.substring(0,30)}return"Location not available"}catch(o){return console.warn("Error formatting location:",r,o),"Location not available"}};return i(m,{sx:{mx:"auto",p:2,display:"flex",flexDirection:"column"},children:[i(je,{children:[i(He,{sx:{p:2,textAlign:"center",position:"relative"},children:[i(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i(m,{sx:{display:"flex",alignItems:"center",flex:1},children:[n(ct,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:n(m,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:E()==="success"?"success.main":E()==="warning"?"warning.main":"grey.400",border:`2px solid ${e.palette.background.paper}`}}),children:n(Se,{sx:{width:48,height:48,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,fontSize:"1.2rem"},children:t!=null&&t.profile_image?n("img",{src:t.profile_image,alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(V=t==null?void 0:t.name)==null?void 0:V.charAt(0).toUpperCase()})}),i(m,{sx:{ml:2,textAlign:"left"},children:[n(l,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem",lineHeight:1.2},children:t==null?void 0:t.name}),i(l,{variant:"caption",color:"text.secondary",children:["ID: ",(t==null?void 0:t.employee_id)||(t==null?void 0:t.id)]})]})]}),i(m,{sx:{textAlign:"right"},children:[n(l,{variant:"h5",sx:{fontWeight:300,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",lineHeight:1},children:j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),n(l,{variant:"caption",color:"text.secondary",children:j.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})})]})]}),n(Y,{label:le(),color:E(),sx:{mb:2,fontSize:"0.8rem",py:1.5,px:2,height:32,borderRadius:2,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px"},icon:c==="punched_in"?n(_e,{sx:{fontSize:16}}):n(ze,{sx:{fontSize:16}})}),i(F,{container:!0,spacing:1,sx:{mb:2},children:[n(F,{item:!0,xs:6,children:i(be,{variant:"outlined",sx:{p:1.5,textAlign:"center",background:s(e.palette.primary.main,.05),border:`1px solid ${s(e.palette.primary.main,.1)}`,borderRadius:2},children:[n(bt,{color:"primary",sx:{fontSize:20,mb:.5}}),n(l,{variant:"h6",color:"primary",sx:{fontWeight:700,fontSize:"1rem",fontFamily:"monospace",letterSpacing:"0.5px"},children:te}),n(l,{variant:"caption",color:"text.secondary",children:"Hours Today"})]})}),n(F,{item:!0,xs:6,children:i(be,{variant:"outlined",sx:{p:1.5,textAlign:"center",background:s(e.palette.secondary.main,.05),border:`1px solid ${s(e.palette.secondary.main,.1)}`,borderRadius:2},children:[n(St,{color:"secondary",sx:{fontSize:20,mb:.5}}),n(l,{variant:"h6",color:"secondary",sx:{fontWeight:700,fontSize:"1rem"},children:p.length}),n(l,{variant:"caption",color:"text.secondary",children:"Sessions"})]})})]}),n(Ce,{variant:"contained",size:"large",fullWidth:!0,onClick:X,disabled:S||C,sx:{mb:2,height:48,borderRadius:3,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,color:"white",fontWeight:600,fontSize:"1rem",textTransform:"none",boxShadow:`0 6px 20px ${s(e.palette.primary.main,.3)}`,backdropFilter:"blur(16px) saturate(200%)",border:`1px solid ${s(e.palette.primary.main,.2)}`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.secondary.dark})`,transform:"translateY(-1px)",boxShadow:`0 8px 25px ${s(e.palette.primary.main,.4)}`},"&:disabled":{background:s(e.palette.action.disabled,.1),color:e.palette.action.disabled,backdropFilter:"blur(16px) saturate(200%)"}},startIcon:S?n(Ue,{size:18,color:"inherit"}):c==="punched_in"?n(ze,{}):n(_e,{}),children:S?"Processing...":ee()}),i(Ne,{direction:"row",spacing:.5,justifyContent:"center",children:[n(ue,{title:`GPS: ${k.location?"Connected":"Disconnected"}`,children:n(Y,{size:"small",icon:n(ke,{sx:{fontSize:14}}),label:"GPS",color:k.location?"success":"default",variant:k.location?"filled":"outlined",sx:{fontSize:"0.7rem",height:24}})}),n(ue,{title:`Network: ${k.network?"Online":"Offline"}`,children:n(Y,{size:"small",icon:n(vt,{sx:{fontSize:14}}),label:"Net",color:k.network?"success":"default",variant:k.network?"filled":"outlined",sx:{fontSize:"0.7rem",height:24}})}),n(ue,{title:"Device Security",children:n(Y,{size:"small",icon:n(Ve,{sx:{fontSize:14}}),label:"Secure",color:"success",variant:"filled",sx:{fontSize:"0.7rem",height:24}})})]})]}),C&&i($e,{severity:"warning",sx:{mx:2,mb:2,borderRadius:2,background:s(e.palette.warning.main,.1),border:`1px solid ${s(e.palette.warning.main,.2)}`,backdropFilter:"blur(16px) saturate(200%)",fontSize:"0.8rem"},children:[i(l,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["On ",C.leave_type," Leave"]}),i(l,{variant:"caption",children:[new Date(C.from_date).toLocaleDateString()," - ",new Date(C.to_date).toLocaleDateString()]})]}),i(m,{sx:{borderTop:`1px solid ${s(e.palette.divider,.1)}`},children:[i(m,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer","&:hover":{background:s(e.palette.primary.main,.02)}},onClick:()=>ce("punches"),children:[i(m,{sx:{display:"flex",alignItems:"center"},children:[n(yt,{color:"primary",sx:{mr:1,fontSize:20}}),n(l,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"0.9rem"},children:"Today's Activity"})]}),n(ye,{size:"small",children:q.punches?n(gt,{}):n(ht,{})})]}),n(De,{in:q.punches,children:n(m,{sx:{px:2,pb:2},children:p.length>0?n(Ye,{sx:{p:0},children:p.map((r,o)=>i(Me.Fragment,{children:[i(Ze,{sx:{px:0,py:1},children:[n(ut,{sx:{minWidth:36},children:n(Se,{sx:{width:24,height:24,bgcolor:"primary.main"},children:n(xt,{sx:{fontSize:14}})})}),n(qe,{primary:i(m,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[i(l,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["In: ",H(r.punchin_time||r.punch_in_time||r.time_in)]}),(r.punchout_time||r.punch_out_time||r.time_out)&&i(l,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["Out: ",H(r.punchout_time||r.punch_out_time||r.time_out)]}),r.duration&&n(Y,{label:r.duration,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.6rem",height:20}})]}),secondary:i(l,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem"},children:["📍 ",U(r.punchin_location||r.location),"..."]})})]}),o<p.length-1&&n(Qe,{})]},o))}):n($e,{severity:"info",sx:{background:s(e.palette.info.main,.05),border:`1px solid ${s(e.palette.info.main,.1)}`,backdropFilter:"blur(16px) saturate(200%)",fontSize:"0.8rem"},children:n(l,{variant:"body2",sx:{fontSize:"0.8rem"},children:"No activity recorded today"})})})})]})]}),i(Ae,{open:re,onClose:()=>M(!1),maxWidth:"sm",fullWidth:!0,children:[i(m,{sx:{p:2,textAlign:"center",position:"relative",color:"white",background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`},children:[n(ye,{onClick:()=>M(!1),sx:{position:"absolute",top:6,right:6,color:"rgba(255,255,255,0.8)","&:hover":{color:"#fff",backgroundColor:s("#fff",.1)},p:.5},children:n(Ee,{fontSize:"small"})}),n(Ke,{sx:{fontSize:36,mb:.5,opacity:.9}}),n(l,{variant:"subtitle1",fontWeight:700,children:"Attendance Recorded"}),n(l,{variant:"caption",sx:{opacity:.85},children:"Attendance successfully captured"})]}),i(Xe,{sx:{p:2},children:[i(F,{container:!0,spacing:1.5,children:[n(F,{item:!0,xs:6,children:i(m,{sx:{p:1.5,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${s(e.palette.info.main,.1)}, ${s(e.palette.info.main,.05)})`,border:`1px solid ${s(e.palette.info.main,.2)}`,backdropFilter:"blur(8px)"},children:[n(m,{sx:{width:32,height:32,mb:1,mx:"auto",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${e.palette.info.main}, ${e.palette.info.dark})`},children:n(ft,{sx:{color:"white",fontSize:18}})}),n(l,{variant:"subtitle2",fontWeight:600,color:"info.main",children:W.ip}),n(l,{variant:"caption",color:"text.secondary",children:"IP Address"})]})}),n(F,{item:!0,xs:6,children:i(m,{sx:{p:1.5,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${s(e.palette.success.main,.1)}, ${s(e.palette.success.main,.05)})`,border:`1px solid ${s(e.palette.success.main,.2)}`,backdropFilter:"blur(8px)"},children:[n(m,{sx:{width:32,height:32,mb:1,mx:"auto",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${e.palette.success.main}, ${e.palette.success.dark})`},children:n(ke,{sx:{color:"white",fontSize:18}})}),n(l,{variant:"subtitle2",fontWeight:600,color:"success.main",children:W.accuracy}),n(l,{variant:"caption",color:"text.secondary",children:"GPS Accuracy"})]})})]}),i(m,{sx:{mt:2,py:1,px:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",background:`linear-gradient(135deg, ${s(e.palette.success.main,.1)}, ${s(e.palette.success.main,.05)})`,border:`1px solid ${s(e.palette.divider,.2)}`},children:[n(tt,{sx:{mr:1,fontSize:16},color:"primary"}),i(l,{variant:"caption",fontWeight:600,color:"text.secondary",children:["Recorded at: ",W.timestamp]})]})]}),n(et,{sx:{px:2,pb:2},children:n(Ce,{onClick:()=>M(!1),variant:"contained",fullWidth:!0,sx:{height:42,borderRadius:2,fontWeight:600,textTransform:"none",fontSize:"0.875rem",background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.secondary.dark})`}},children:"Continue"})})]})]})};export{Ht as default};
