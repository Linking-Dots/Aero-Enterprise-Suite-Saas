import{r as u,i as f,J as Me,a as ue,b as i,j as n,R as Ae}from"./app-z4s5sYKZ.js";import{G as We}from"./GlassDialog-BPHbPfG8.js";import{x as Fe,y as je,n as we,_ as Ie,o as B,a1 as be,p as fe,s as xe,Q as _,q as Te,m as $,u as Be,j as V,c as Ne,B as m,T as c,U as G,d as j,a4 as ye,ac as De,ad as me,I as Se,a9 as Ee,aP as He}from"./App-lYuiCeFz.js";import{C as Ue}from"./CardContent-Dr_xO4Ae.js";import{A as Ce}from"./Avatar-ChToq-_v.js";import{C as Ve}from"./CircularProgress-DIt3rVlg.js";import{B as $e}from"./Button-flahXtBE.js";import{S as Ge}from"./Security-CBtfzWdi.js";import{A as ke}from"./Alert-D0BtFiYR.js";import{L as Ye,a as Ze}from"./List-WeVe4rDG.js";import{L as Je}from"./ListItem-Dkby3_iO.js";import{b as qe}from"./listItemTextClasses-DKVS5CgH.js";import{L as Qe}from"./ListItemText-CSNMubTF.js";import{D as Ke}from"./Divider-Do2VemLE.js";import{C as Xe}from"./CheckCircle-XqH8BYcl.js";import{b as et,c as tt}from"./DialogContent-D88NsPJ_.js";import{A as rt}from"./AccessTime-Duhy-Qex.js";import{a as s}from"./colorManipulator-fGOXFJsc.js";import"./app-DNvvDii_.js";import"./useSlot-C2BSLxE1.js";import"./dividerClasses-CYiRuqzU.js";const Re=e=>{const a=u.useRef({});return u.useEffect(()=>{a.current=e}),a.current};function nt(e){const{badgeContent:a,invisible:t=!1,max:l=99,showZero:x=!1}=e,y=Re({badgeContent:a,max:l});let b=t;t===!1&&a===0&&!x&&(b=!0);const{badgeContent:p,max:z=l}=b?y:e,P=p&&Number(p)>z?`${z}+`:p;return{badgeContent:p,invisible:b,max:z,displayValue:P}}function ot(e){return je("MuiBadge",e)}const R=Fe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),at=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],ge=10,he=4,it=e=>{const{color:a,anchorOrigin:t,invisible:l,overlap:x,variant:y,classes:b={}}=e,p={root:["root"],badge:["badge",y,l&&"invisible",`anchorOrigin${_(t.vertical)}${_(t.horizontal)}`,`anchorOrigin${_(t.vertical)}${_(t.horizontal)}${_(x)}`,`overlap${_(x)}`,a!=="default"&&`color${_(a)}`]};return Te(p,ot,b)},st=xe("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),lt=xe("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.badge,a[t.variant],a[`anchorOrigin${_(t.anchorOrigin.vertical)}${_(t.anchorOrigin.horizontal)}${_(t.overlap)}`],t.color!=="default"&&a[`color${_(t.color)}`],t.invisible&&a.invisible]}})(({theme:e})=>{var a;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:ge*2,lineHeight:1,padding:"0 6px",height:ge*2,borderRadius:ge,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((a=e.vars)!=null?a:e).palette).filter(t=>{var l,x;return((l=e.vars)!=null?l:e).palette[t].main&&((x=e.vars)!=null?x:e).palette[t].contrastText}).map(t=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:he,height:he*2,minWidth:he*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${R.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),ct=u.forwardRef(function(a,t){var l,x,y,b,p,z;const P=we({props:a,name:"MuiBadge"}),{anchorOrigin:Y={vertical:"top",horizontal:"right"},className:re,component:L,components:S={},componentsProps:Z={},children:ne,overlap:M="rectangular",color:N="default",invisible:oe=!1,max:J=99,badgeContent:q,slots:k,slotProps:O,showZero:W=!1,variant:D="standard"}=P,Q=Ie(P,at),{badgeContent:E,invisible:ae,max:ie,displayValue:se}=nt({max:J,invisible:oe,badgeContent:q,showZero:W}),le=Re({anchorOrigin:Y,color:N,overlap:M,variant:D,badgeContent:q}),K=ae||E==null&&D!=="dot",{color:ce=N,overlap:H=M,anchorOrigin:de=Y,variant:X=D}=K?le:P,ee=X!=="dot"?se:void 0,F=B({},P,{badgeContent:E,invisible:K,max:ie,displayValue:ee,showZero:W,anchorOrigin:de,color:ce,overlap:H,variant:X}),te=it(F),U=(l=(x=k==null?void 0:k.root)!=null?x:S.Root)!=null?l:st,r=(y=(b=k==null?void 0:k.badge)!=null?b:S.Badge)!=null?y:lt,o=(p=O==null?void 0:O.root)!=null?p:Z.root,d=(z=O==null?void 0:O.badge)!=null?z:Z.badge,C=be({elementType:U,externalSlotProps:o,externalForwardedProps:Q,additionalProps:{ref:t,as:L},ownerState:F,className:fe(o==null?void 0:o.className,te.root,re)}),v=be({elementType:r,externalSlotProps:d,ownerState:F,className:fe(te.badge,d==null?void 0:d.className)});return f.jsxs(U,B({},C,{children:[ne,f.jsx(r,B({},v,{children:ee}))]}))}),dt=["className"],pt=e=>{const{alignItems:a,classes:t}=e;return Te({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},qe,t)},ut=xe("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.alignItems==="flex-start"&&a.alignItemsFlexStart]}})(({theme:e,ownerState:a})=>B({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},a.alignItems==="flex-start"&&{marginTop:8})),mt=u.forwardRef(function(a,t){const l=we({props:a,name:"MuiListItemIcon"}),{className:x}=l,y=Ie(l,dt),b=u.useContext(Ye),p=B({},l,{alignItems:b.alignItems}),z=pt(p);return f.jsx(ut,B({className:fe(z.root,x),ownerState:p,ref:t},y))}),gt=$(f.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),ht=$(f.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),ft=$(f.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),_e=$(f.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"GpsFixed"),xt=$(f.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language"),ze=$(f.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),vt=$([f.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),f.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),bt=$(f.jsx("path",{d:"M12.01 21.49 23.64 7c-.45-.34-4.93-4-11.64-4C5.28 3 .81 6.66.36 7l11.63 14.49.01.01z"}),"SignalWifi4Bar"),Oe=$(f.jsx("path",{d:"M6 6h12v12H6z"}),"Stop"),yt=$(f.jsx("path",{d:"M15 1H9v2h6zm-4 13h2V8h-2zm8.03-6.61 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"TimerOutlined"),St=$(f.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V8h14zM7 10h5v5H7z"}),"Today"),Ct=$(f.jsx("path",{fillRule:"evenodd",d:"M14 6V4h-4v2zM4 8v11h16V8zm16-2c1.11 0 2 .89 2 2v11c0 1.11-.89 2-2 2H4c-1.11 0-2-.89-2-2l.01-11c0-1.11.88-2 1.99-2h4V4c0-1.11.89-2 2-2h4c1.11 0 2 .89 2 2v2z"}),"WorkOutline"),Ut=()=>{var U;const e=Be(),{auth:a}=Me().props,t=a.user,[l,x]=u.useState(null),[y,b]=u.useState(!1),[p,z]=u.useState([]),[P,Y]=u.useState("00:00:00"),[re,L]=u.useState("00:00:00"),[S,Z]=u.useState(null),[ne,M]=u.useState(!1),[N,oe]=u.useState(new Date),[J,q]=u.useState({punches:!1,rules:!1,validation:!1}),[k,O]=u.useState({location:!1,network:!0,device:!0}),[W,D]=u.useState({ip:"Unknown",accuracy:"N/A",timestamp:null});u.useEffect(()=>{const r=setInterval(()=>{const o=new Date;oe(o),l==="punched_in"&&p.length>0&&Q(o)},1e3);return()=>clearInterval(r)},[l,p]),u.useEffect(()=>{E(),ae(),se()},[]);const Q=r=>{let o=0;p.forEach((g,ve)=>{if(g.punchin_time){let A;if(typeof g.punchin_time=="string"&&g.punchin_time.includes(":")&&!g.punchin_time.includes("T")){const h=new Date,[w,T,pe]=g.punchin_time.split(":");A=new Date(h.getFullYear(),h.getMonth(),h.getDate(),parseInt(w),parseInt(T),parseInt(pe||0))}else A=new Date(g.punchin_time);if(isNaN(A.getTime())){console.warn("Invalid punch in time:",g.punchin_time);return}if(g.punchout_time){let h;if(typeof g.punchout_time=="string"&&g.punchout_time.includes(":")&&!g.punchout_time.includes("T")){const T=new Date,[pe,Pe,Le]=g.punchout_time.split(":");h=new Date(T.getFullYear(),T.getMonth(),T.getDate(),parseInt(pe),parseInt(Pe),parseInt(Le||0))}else h=new Date(g.punchout_time);if(isNaN(h.getTime())){console.warn("Invalid punch out time:",g.punchout_time);return}const w=Math.floor((h-A)/1e3);w>0&&(o+=w)}else{const h=Math.floor((r-A)/1e3);h>0&&(o+=h)}}}),(isNaN(o)||o<0)&&(o=0);const d=Math.floor(o/3600),C=Math.floor(o%3600/60),v=o%60,I=`${d.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`;L(I)},E=async()=>{try{const o=(await ue.get(route("attendance.current-user-punch"))).data;if(z(o.punches||[]),Y(o.total_production_time||"00:00:00"),Z(o.isUserOnLeave),o.punches&&o.punches.length>0){const C=o.punches[o.punches.length-1].punchout_time?"punched_out":"punched_in";if(x(C),C==="punched_in")setTimeout(()=>{Q(new Date)},100);else if(o.total_production_time&&o.total_production_time!=="00:00:00")L(o.total_production_time);else{let v=0;o.punches.forEach(h=>{if(h.punchin_time&&h.punchout_time)try{const w=new Date(h.punchin_time),T=new Date(h.punchout_time);!isNaN(w.getTime())&&!isNaN(T.getTime())&&(v+=Math.floor((T-w)/1e3))}catch(w){console.warn("Error calculating session time:",w)}});const I=Math.floor(v/3600),g=Math.floor(v%3600/60),ve=v%60,A=`${I.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`;L(A)}}else x("not_punched"),L("00:00:00")}catch(r){console.error("Error fetching current status:",r),V.error("Failed to fetch attendance status"),L("00:00:00")}},ae=()=>{if(!navigator.geolocation){O(r=>({...r,location:!1}));return}navigator.geolocation.getCurrentPosition(()=>{O(r=>({...r,location:!0}))},r=>{console.error("Error checking location connection:",r),O(o=>({...o,location:!1}))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},ie=()=>{if(!navigator.geolocation)throw new gt("Geolocation is not supported by this browser");return new Promise((r,o)=>{navigator.geolocation.getCurrentPosition(d=>{const C={latitude:d.coords.latitude,longitude:d.coords.longitude,accuracy:d.coords.accuracy};r(C)},d=>{console.error("Error getting location data:",d),o(d)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})},se=()=>{O(r=>({...r,network:navigator.onLine,device:!0}))},le=()=>{const r=document.createElement("canvas"),o=r.getContext("2d");return o.textBaseline="top",o.font="14px Arial",o.fillText("Device fingerprint",2,2),{userAgent:navigator.userAgent,screen:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,canvasFingerprint:r.toDataURL(),timestamp:Date.now()}},K=async()=>{if(S){V.warning("You are on leave today. Cannot punch in/out.");return}b(!0);try{const r=await ie(),o=le();let d="Unknown";try{d=(await ue.get(route("getClientIp"))).data.ip}catch(I){console.warn("Could not fetch IP address:",I)}D({ip:d,accuracy:r!=null&&r.accuracy?`${Math.round(r.accuracy)}m`:"N/A",timestamp:new Date().toLocaleString()});const C={lat:r==null?void 0:r.latitude,lng:r==null?void 0:r.longitude,accuracy:r==null?void 0:r.accuracy,ip:d,wifi_ssid:"Unknown",device_fingerprint:JSON.stringify(o),user_agent:navigator.userAgent,timestamp:new Date().toISOString()},v=await ue.post(route("attendance.punch"),C);v.data.status==="success"?(V.success(v.data.message,{style:{backdropFilter:"blur(16px) saturate(200%)",background:s(e.palette.success.main,.1),border:`1px solid ${s(e.palette.success.main,.2)}`,color:e.palette.text.primary}}),M(!0),await E()):V.error(v.data.message)}catch(r){console.error("Error during punch operation:",r),V.error(r.response.data.message,{style:{backdropFilter:"blur(16px) saturate(200%)",background:s(e.palette.success.main,.1),border:`1px solid ${s(e.palette.success.main,.2)}`,color:e.palette.text.primary}})}finally{b(!1)}},ce=r=>{q(o=>({...o,[r]:!o[r]}))},H=()=>{if(S)return"warning";switch(l){case"punched_in":return"success";case"punched_out":return"info";default:return"default"}},de=()=>{if(S)return"On Leave";switch(l){case"punched_in":return"Checked In";case"punched_out":return"Checked Out";default:return"Ready to Check In"}},X=()=>S?"On Leave":l==="punched_in"?"Check Out":"Check In",ee=r=>{if(!r)return null;try{let o;if(typeof r=="string"&&r.includes(":")&&!r.includes("T")){const d=new Date,[C,v,I]=r.split(":");o=new Date(d.getFullYear(),d.getMonth(),d.getDate(),parseInt(C),parseInt(v),parseInt(I||0))}else o=new Date(r);return isNaN(o.getTime())?(console.warn("Invalid date:",r),null):o}catch(o){return console.warn("Error formatting time:",o),null}},F=r=>{const o=ee(r);return o?o.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}):"--:--"},te=r=>{if(!r)return"Location not available";try{if(typeof r=="object"&&r.lat&&r.lng)return r.address&&r.address.trim()?r.address.substring(0,30):`${r.lat.toFixed(4)}, ${r.lng.toFixed(4)}`;if(typeof r=="string")try{const o=JSON.parse(r);if(o.lat&&o.lng)return o.address&&o.address.trim()?o.address.substring(0,30):`${o.lat.toFixed(4)}, ${o.lng.toFixed(4)}`}catch{return r.substring(0,30)}return"Location not available"}catch(o){return console.warn("Error formatting location:",r,o),"Location not available"}};return i(m,{sx:{mx:"auto",p:2,display:"flex",flexDirection:"column"},children:[i(Ne,{children:[i(Ue,{sx:{p:2,textAlign:"center",position:"relative"},children:[i(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[i(m,{sx:{display:"flex",alignItems:"center",flex:1},children:[n(ct,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:n(m,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:H()==="success"?"success.main":H()==="warning"?"warning.main":"grey.400",border:`2px solid ${e.palette.background.paper}`}}),children:n(Ce,{sx:{width:48,height:48,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,fontSize:"1.2rem"},children:t!=null&&t.profile_image?n("img",{src:t.profile_image,alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(U=t==null?void 0:t.name)==null?void 0:U.charAt(0).toUpperCase()})}),i(m,{sx:{ml:2,textAlign:"left"},children:[n(c,{variant:"h6",sx:{fontWeight:600,fontSize:"1rem",lineHeight:1.2},children:t==null?void 0:t.name}),i(c,{variant:"caption",color:"text.secondary",children:["ID: ",(t==null?void 0:t.employee_id)||(t==null?void 0:t.id)]})]})]}),i(m,{sx:{textAlign:"right"},children:[n(c,{variant:"h5",sx:{fontWeight:300,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",lineHeight:1},children:N.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),n(c,{variant:"caption",color:"text.secondary",children:N.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})})]})]}),n(G,{label:de(),color:H(),sx:{mb:2,fontSize:"0.8rem",py:1.5,px:2,height:32,borderRadius:2,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px"},icon:l==="punched_in"?n(ze,{sx:{fontSize:16}}):n(Oe,{sx:{fontSize:16}})}),i(j,{container:!0,spacing:1,sx:{mb:2},children:[n(j,{item:!0,xs:6,children:i(ye,{variant:"outlined",sx:{p:1.5,textAlign:"center",background:s(e.palette.primary.main,.05),border:`1px solid ${s(e.palette.primary.main,.1)}`,borderRadius:2},children:[n(yt,{color:"primary",sx:{fontSize:20,mb:.5}}),n(c,{variant:"h6",color:"primary",sx:{fontWeight:700,fontSize:"1rem",fontFamily:"monospace",letterSpacing:"0.5px"},children:re}),n(c,{variant:"caption",color:"text.secondary",children:"Hours Today"})]})}),n(j,{item:!0,xs:6,children:i(ye,{variant:"outlined",sx:{p:1.5,textAlign:"center",background:s(e.palette.secondary.main,.05),border:`1px solid ${s(e.palette.secondary.main,.1)}`,borderRadius:2},children:[n(Ct,{color:"secondary",sx:{fontSize:20,mb:.5}}),n(c,{variant:"h6",color:"secondary",sx:{fontWeight:700,fontSize:"1rem"},children:p.length}),n(c,{variant:"caption",color:"text.secondary",children:"Sessions"})]})})]}),n($e,{variant:"contained",size:"large",fullWidth:!0,onClick:K,disabled:y||S,sx:{mb:2,height:48,borderRadius:3,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,color:"white",fontWeight:600,fontSize:"1rem",textTransform:"none",boxShadow:`0 6px 20px ${s(e.palette.primary.main,.3)}`,backdropFilter:"blur(16px) saturate(200%)",border:`1px solid ${s(e.palette.primary.main,.2)}`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.secondary.dark})`,transform:"translateY(-1px)",boxShadow:`0 8px 25px ${s(e.palette.primary.main,.4)}`},"&:disabled":{background:s(e.palette.action.disabled,.1),color:e.palette.action.disabled,backdropFilter:"blur(16px) saturate(200%)"}},startIcon:y?n(Ve,{size:18,color:"inherit"}):l==="punched_in"?n(Oe,{}):n(ze,{}),children:y?"Processing...":X()}),i(De,{direction:"row",spacing:.5,justifyContent:"center",children:[n(me,{title:`GPS: ${k.location?"Connected":"Disconnected"}`,children:n(G,{size:"small",icon:n(_e,{sx:{fontSize:14}}),label:"GPS",color:k.location?"success":"default",variant:k.location?"filled":"outlined",sx:{fontSize:"0.7rem",height:24}})}),n(me,{title:`Network: ${k.network?"Online":"Offline"}`,children:n(G,{size:"small",icon:n(bt,{sx:{fontSize:14}}),label:"Net",color:k.network?"success":"default",variant:k.network?"filled":"outlined",sx:{fontSize:"0.7rem",height:24}})}),n(me,{title:"Device Security",children:n(G,{size:"small",icon:n(Ge,{sx:{fontSize:14}}),label:"Secure",color:"success",variant:"filled",sx:{fontSize:"0.7rem",height:24}})})]})]}),S&&i(ke,{severity:"warning",sx:{mx:2,mb:2,borderRadius:2,background:s(e.palette.warning.main,.1),border:`1px solid ${s(e.palette.warning.main,.2)}`,backdropFilter:"blur(16px) saturate(200%)",fontSize:"0.8rem"},children:[i(c,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["On ",S.leave_type," Leave"]}),i(c,{variant:"caption",children:[new Date(S.from_date).toLocaleDateString()," - ",new Date(S.to_date).toLocaleDateString()]})]}),i(m,{sx:{borderTop:`1px solid ${s(e.palette.divider,.1)}`},children:[i(m,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer","&:hover":{background:s(e.palette.primary.main,.02)}},onClick:()=>ce("punches"),children:[i(m,{sx:{display:"flex",alignItems:"center"},children:[n(St,{color:"primary",sx:{mr:1,fontSize:20}}),n(c,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"0.9rem"},children:"Today's Activity"})]}),n(Se,{size:"small",children:J.punches?n(ht,{}):n(ft,{})})]}),n(Ee,{in:J.punches,children:n(m,{sx:{px:2,pb:2},children:p.length>0?n(Ze,{sx:{p:0},children:p.map((r,o)=>i(Ae.Fragment,{children:[i(Je,{sx:{px:0,py:1},children:[n(mt,{sx:{minWidth:36},children:n(Ce,{sx:{width:24,height:24,bgcolor:"primary.main"},children:n(vt,{sx:{fontSize:14}})})}),n(Qe,{primary:i(m,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[i(c,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["In: ",F(r.punchin_time||r.punch_in_time||r.time_in)]}),(r.punchout_time||r.punch_out_time||r.time_out)&&i(c,{variant:"body2",sx:{fontWeight:600,fontSize:"0.8rem"},children:["Out: ",F(r.punchout_time||r.punch_out_time||r.time_out)]}),r.duration&&n(G,{label:r.duration,size:"small",color:"primary",variant:"outlined",sx:{fontSize:"0.6rem",height:20}})]}),secondary:i(c,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem"},children:["📍 ",te(r.punchin_location||r.location),"..."]})})]}),o<p.length-1&&n(Ke,{})]},o))}):n(ke,{severity:"info",sx:{background:s(e.palette.info.main,.05),border:`1px solid ${s(e.palette.info.main,.1)}`,backdropFilter:"blur(16px) saturate(200%)",fontSize:"0.8rem"},children:n(c,{variant:"body2",sx:{fontSize:"0.8rem"},children:"No activity recorded today"})})})})]})]}),i(We,{open:ne,onClose:()=>M(!1),maxWidth:"sm",fullWidth:!0,children:[i(m,{sx:{p:2,textAlign:"center",position:"relative",color:"white",background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`},children:[n(Se,{onClick:()=>M(!1),sx:{position:"absolute",top:6,right:6,color:"rgba(255,255,255,0.8)","&:hover":{color:"#fff",backgroundColor:s("#fff",.1)},p:.5},children:n(He,{fontSize:"small"})}),n(Xe,{sx:{fontSize:36,mb:.5,opacity:.9}}),n(c,{variant:"subtitle1",fontWeight:700,children:"Attendance Recorded"}),n(c,{variant:"caption",sx:{opacity:.85},children:"Attendance successfully captured"})]}),i(et,{sx:{p:2},children:[i(j,{container:!0,spacing:1.5,children:[n(j,{item:!0,xs:6,children:i(m,{sx:{p:1.5,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${s(e.palette.info.main,.1)}, ${s(e.palette.info.main,.05)})`,border:`1px solid ${s(e.palette.info.main,.2)}`,backdropFilter:"blur(8px)"},children:[n(m,{sx:{width:32,height:32,mb:1,mx:"auto",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${e.palette.info.main}, ${e.palette.info.dark})`},children:n(xt,{sx:{color:"white",fontSize:18}})}),n(c,{variant:"subtitle2",fontWeight:600,color:"info.main",children:W.ip}),n(c,{variant:"caption",color:"text.secondary",children:"IP Address"})]})}),n(j,{item:!0,xs:6,children:i(m,{sx:{p:1.5,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${s(e.palette.success.main,.1)}, ${s(e.palette.success.main,.05)})`,border:`1px solid ${s(e.palette.success.main,.2)}`,backdropFilter:"blur(8px)"},children:[n(m,{sx:{width:32,height:32,mb:1,mx:"auto",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${e.palette.success.main}, ${e.palette.success.dark})`},children:n(_e,{sx:{color:"white",fontSize:18}})}),n(c,{variant:"subtitle2",fontWeight:600,color:"success.main",children:W.accuracy}),n(c,{variant:"caption",color:"text.secondary",children:"GPS Accuracy"})]})})]}),i(m,{sx:{mt:2,py:1,px:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",background:`linear-gradient(135deg, ${s(e.palette.success.main,.1)}, ${s(e.palette.success.main,.05)})`,border:`1px solid ${s(e.palette.divider,.2)}`},children:[n(rt,{sx:{mr:1,fontSize:16},color:"primary"}),i(c,{variant:"caption",fontWeight:600,color:"text.secondary",children:["Recorded at: ",W.timestamp]})]})]}),n(tt,{sx:{px:2,pb:2},children:n($e,{onClick:()=>M(!1),variant:"contained",fullWidth:!0,sx:{height:42,borderRadius:2,fontWeight:600,textTransform:"none",fontSize:"0.875rem",background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.secondary.dark})`}},children:"Continue"})})]})]})};export{Ut as default};
