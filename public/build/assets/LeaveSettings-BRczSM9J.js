import{r as T,J as D,j as l,a as e,Q as j,F as m}from"./app-DDhVNfvV.js";import{G as H,i as c,j as I,R as E,B as w,A as Q}from"./App-CULBC9Jb.js";import{u as U,G as $}from"./GlassCard-B8deHOrc.js";import{C as J}from"./CardHeader-BPTzkM70.js";import{C as N}from"./CardContent-783YhD2K.js";import{T as x,I as A}from"./TextField-DHyBbceL.js";import{S as B,M as v}from"./Select-G4UAMmZq.js";import{B as F}from"./Button-PH-Yt16S.js";import{T as q}from"./TableContainer-C5tOqb50.js";import{T as z,a as K,b as L,c as d,d as O}from"./TableRow-DZEiQC5y.js";import{T as M,B as V}from"./logo-DoLGM3I0.js";import{C as _}from"./CircularProgress-ukpRde3Q.js";import"./app-CYwLuuRk.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./EnvelopeIcon-jGHS91X9.js";import"./UserGroupIcon-CFQYzcyB.js";import"./UserIcon-BZDmR83e.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./ClockIcon-UBQM4q2z.js";import"./QuestionMarkCircleIcon-ClI4UiU9.js";import"./BuildingOfficeIcon-BXNAJj1w.js";import"./KeyIcon-CAZJdP6I.js";import"./CheckCircleIcon-BkPxWqsz.js";import"./ExclamationTriangleIcon-3tpAB86s.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-6MDMHKHV-DNEscIMF.js";import"./useFormReset-Dv_1w4_q.js";import"./useLabel-C1JBDqVQ.js";import"./useLabels-Blg_QI1U.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./XMarkIcon-CRGrHH6E.js";import"./chunk-J7I6W5JF-Dj4B-Czi.js";import"./create-visual-element-DIA5r6xh.js";import"./Popover-DGnHN2Gx.js";const X=({title:f})=>{const C={type:"",days:"",eligibility:"",carry_forward:"",earned_leave:"",special_conditions:""},[y,k]=T.useState(D().props.leaveTypes),[n,g]=T.useState(C),[P,S]=T.useState(!1),r=U(),b=a=>{const{name:i,value:t}=a.target;g({...n,[i]:t})},R=async()=>{const a=new Promise(async(i,t)=>{var s,p;try{const o=await axios.post("/add-leave-type",n);o.status===201?(k([...y,{...n,id:o.data.id}]),g(C),i(["Leave type added successfully."])):t(["Failed to add leave type. Please try again."])}catch(o){console.error(o),t([((p=(s=o.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to add leave type. Please try again."])}});w.promise(a,{pending:{render(){return l("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Adding leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:i}){return e(m,{children:i.map((t,s)=>e("div",{children:t},s))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:i}){return e(m,{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},W=async a=>{const i=y.find(t=>t.id===a);g(i),S(!0)},G=()=>{const a=new Promise(async(i,t)=>{var s,p;try{const o=await axios.put(`/update-leave-type/${n.id}`,n);if(o.status===200){const u=y.map(h=>h.id===n.id?{...n,id:o.data.id}:h);k(u),g(C),S(!1),i(["Leave type updated successfully."])}else t(["Failed to update leave type. Please try again."])}catch(o){console.error(o),t([((p=(s=o.response)==null?void 0:s.data)==null?void 0:p.message)||"Failed to update leave type. Please try again."])}});w.promise(a,{pending:{render(){return l("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Updating leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:i}){return e(m,{children:i.map((t,s)=>e("div",{children:t},s))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:i}){return e(m,{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})},Y=async a=>{const i=new Promise(async(t,s)=>{var p,o;try{const u=await axios.delete(`/delete-leave-type/${a}`);u.status===200?(k(y.filter(h=>h.id!==a)),t([u.data.message||"Leave type deleted successfully."])):s(["Failed to delete leave type. Please try again."])}catch(u){console.error(u),s([((o=(p=u.response)==null?void 0:p.data)==null?void 0:o.message)||"Failed to delete leave type. Please try again."])}});w.promise(i,{pending:{render(){return l("div",{style:{display:"flex",alignItems:"center"},children:[e(_,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting leave type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},success:{render({data:t}){return e(m,{children:t.map((s,p)=>e("div",{children:s},p))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}},error:{render({data:t}){return e(m,{children:t})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,color:r.palette.text.primary}}})};return l(m,{children:[e(j,{title:f}),e(V,{sx:{display:"flex",justifyContent:"center",p:2},children:e(H,{in:!0,children:l($,{children:[e(J,{title:"Leave Settings",sx:{padding:"24px"}}),e(N,{children:l(c,{container:!0,spacing:1,alignItems:"center",children:[e(c,{item:!0,xs:6,sm:3,md:3,children:e(x,{fullWidth:!0,label:"Leave Type",name:"type",value:n.type,onChange:b})}),e(c,{item:!0,xs:6,sm:3,md:3,children:e(x,{fullWidth:!0,label:"Number of Days",name:"days",type:"number",value:n.days,onChange:b})}),e(c,{item:!0,xs:6,sm:3,md:3,children:l(I,{fullWidth:!0,children:[e(A,{id:"carry-forward-label",children:"Carry Forward"}),l(B,{variant:"outlined",labelId:"carry-forward-label",label:"Carry Forward",name:"carry_forward",value:n.carry_forward,onChange:b,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(v,{value:!0,children:"Yes"}),e(v,{value:!1,children:"No"})]})]})}),e(c,{item:!0,xs:6,sm:3,md:3,children:l(I,{fullWidth:!0,children:[e(A,{id:"earned-leave-label",children:"Earned Leave"}),l(B,{variant:"outlined",labelId:"earned-leave-label",label:"Earned Leave",name:"earned_leave",value:n.earned_leave,onChange:b,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:r.glassCard.background,border:r.glassCard.border,borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e(v,{value:!0,children:"Yes"}),e(v,{value:!1,children:"No"})]})]})}),e(c,{item:!0,xs:12,sm:6,md:6,children:e(x,{fullWidth:!0,label:"Eligibility Criteria",name:"eligibility",value:n.eligibility,onChange:b})}),e(c,{item:!0,xs:12,sm:6,md:6,children:e(x,{fullWidth:!0,label:"Special Conditions",name:"special_conditions",value:n.special_conditions,onChange:b})}),e(c,{item:!0,xs:12,sm:12,md:12,sx:{display:"flex",justifyContent:"center"},children:e(F,{sx:{height:"100%"},variant:"outlined",color:"primary",onClick:P?G:R,children:P?"Update Leave Type":"Add Leave Type"})})]})}),e(N,{children:e(q,{style:{maxHeight:"84vh",overflowY:"auto"},children:l(z,{children:[e(K,{children:l(L,{children:[e(d,{children:"Type"}),e(d,{children:"Days"}),e(d,{children:"Eligibility"}),e(d,{children:"Carry Forward"}),e(d,{children:"Earned Leave"}),e(d,{children:"Special Conditions"}),e(d,{children:"Actions"})]})}),e(O,{children:y.length>0?y.map(a=>l(L,{children:[e(d,{children:a.type}),e(d,{children:a.days}),e(d,{children:a.eligibility}),e(d,{children:l(M,{children:[e(E,{checked:!0,sx:{color:a.carry_forward?"green":"red","&.Mui-checked":{color:a.carry_forward?"green":"red"}},disabled:!0}),a.carry_forward?"Yes":"No"]})}),e(d,{children:l(M,{children:[e(E,{checked:!0,sx:{color:a.earned_leave?"green":"red","&.Mui-checked":{color:a.earned_leave?"green":"red"}},disabled:!0}),a.earned_leave?"Yes":"No"]})}),e(d,{children:a.special_conditions?a.special_conditions:"N/A"}),l(d,{children:[e(F,{variant:"outlined",color:"primary",onClick:()=>W(a.id),sx:{marginRight:1},children:"Edit"}),e(F,{variant:"outlined",color:"secondary",onClick:()=>Y(a.id),children:"Delete"})]})]},a.id)):e(L,{children:e(d,{colSpan:7,align:"center",children:"No leave types available."})})})]})})})]})})})]})};X.layout=f=>e(Q,{children:f});export{X as default};
