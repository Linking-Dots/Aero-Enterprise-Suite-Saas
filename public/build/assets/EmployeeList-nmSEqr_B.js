import{r as n,j as r,a as e,M as Le,h as U,S as ge,b as K,Q as Qe,F as Ve,g as Ye,f as qe}from"./app-DDhVNfvV.js";import{n as le,o as se,p as Z,q as ne,t as be,B as O,u as ze,b as pe,G as Ke,d as Je,v as Xe,h as Ze,A as Oe}from"./App-CULBC9Jb.js";import{u as Me,G as et,F as tt}from"./GlassCard-B8deHOrc.js";import{P as rt}from"./PageHeader-qfMvUU9K.js";import{S as at}from"./StatsCards-CaEaffu4.js";import{F as ie}from"./EllipsisVerticalIcon-0SYcdA89.js";import{F as Ge}from"./PencilIcon-BtapQh-d.js";import{F as lt}from"./TrashIcon-rGR8b_v2.js";import{F as ue}from"./ClockIcon-UBQM4q2z.js";import{F as xe}from"./BuildingOfficeIcon-BXNAJj1w.js";import{F as we}from"./EnvelopeIcon-jGHS91X9.js";import{a as ye}from"./QuestionMarkCircleIcon-ClI4UiU9.js";import{F as He}from"./UserIcon-BZDmR83e.js";import{C as ee}from"./CircularProgress-ukpRde3Q.js";import{t as st,a as nt,b as it,c as ot,d as dt,e as ct}from"./chunk-F3UDT23P-Bon0qFEG.js";import{p as Ue}from"./chunk-O5I3QTYU-BlPqa12Y.js";import{u as We}from"./chunk-R6AK6OQ4-DKmNo5vD.js";import{F as mt}from"./CheckCircleIcon-BkPxWqsz.js";import{F as ht,a as Be}from"./UserPlusIcon-BpzyyKkk.js";import{F as pt}from"./ChartBarIcon-CzsPYg0y.js";import{T as H,B as ft}from"./logo-DoLGM3I0.js";import{F as gt}from"./TableCellsIcon-Dy_hxx65.js";import{i as bt}from"./chunk-6MDMHKHV-DNEscIMF.js";import{b as ut}from"./chunk-57V4RE7B-SGFU28YJ.js";import{s as fe,l as q}from"./chunk-2GIFKCNQ-B1Kwyu4F.js";import{c as Q}from"./chunk-J7I6W5JF-Dj4B-Czi.js";import"./app-CYwLuuRk.js";import"./DocumentTextIcon-QwzC9WoH.js";import"./UserGroupIcon-CFQYzcyB.js";import"./CreditCardIcon-nnu7lg95.js";import"./ShieldCheckIcon-B8pnYfIx.js";import"./KeyIcon-CAZJdP6I.js";import"./ExclamationTriangleIcon-3tpAB86s.js";import"./InformationCircleIcon-D0VUrEF1.js";import"./StarIcon-CB497gpk.js";import"./GlobeAltIcon-BeSAdHAC.js";import"./LockClosedIcon-CNT0kaEE.js";import"./chunk-LGMZDQT5-CF5HrKbt.js";import"./number-DfkVkf0F.js";import"./index-I7bPq2YP.js";import"./chunk-A6PX3NG3-DZLS-1Gt.js";import"./useLabels-Blg_QI1U.js";import"./XMarkIcon-CRGrHH6E.js";import"./useFormReset-Dv_1w4_q.js";import"./create-visual-element-DIA5r6xh.js";import"./chunk-D5XJWRAV-BEd1Mod5.js";import"./chunk-MZRCPRP2-4Sm2aTj8.js";import"./useHasTabbableChild-BMncZCCk.js";import"./chunk-7F3ZLNJ6-CHfbZssJ.js";import"./index-CokAva9Y.js";import"./useLabel-C1JBDqVQ.js";import"./chunk-M3MASYO7-DaLySJZS.js";import"./useListState-D8r1zUCw.js";function xt({title:E,titleId:b,...u},x){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":b},u),E?n.createElement("title",{id:b},E):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const wt=n.forwardRef(xt),yt=({allUsers:E,departments:b,designations:u,attendanceTypes:x,setUsers:oe,isMobile:p,isTablet:J,pagination:c,onPageChange:V,onRowsPerPageChange:de,totalUsers:ce=0,loading:M=!1,updateEmployeeOptimized:R,deleteEmployeeOptimized:me})=>{const s=Me(),[i,L]=n.useState(!1),[W,he]=n.useState(null),[te,ve]=n.useState({}),$=async(a,g)=>{var f,N,_,w,h,y,o,k,C,P,F,S;const v=new Promise(async(d,I)=>{try{if((await K.post(route("user.updateDepartment",{id:a}),{department:g})).status===200){const A=b.find(G=>G.id===parseInt(g))||null;R==null||R(a,{department_id:g,department_name:(A==null?void 0:A.name)||null,designation_id:null,designation_name:null}),d("Department updated successfully")}}catch(D){console.error("Error updating department:",D),I("Failed to update department")}});O.promise(v,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ee,{size:16}),e("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=s.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((N=s.glassCard)==null?void 0:N.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((w=(_=s.palette)==null?void 0:_.text)==null?void 0:w.primary)||"#ffffff"}},success:{render({data:d}){return e("div",{children:d})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",background:((h=s.glassCard)==null?void 0:h.background)||"rgba(15, 20, 25, 0.15)",border:((y=s.glassCard)==null?void 0:y.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((k=(o=s.palette)==null?void 0:o.text)==null?void 0:k.primary)||"#ffffff"}},error:{render({data:d}){return e("div",{children:d})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",background:((C=s.glassCard)==null?void 0:C.background)||"rgba(15, 20, 25, 0.15)",border:((P=s.glassCard)==null?void 0:P.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((S=(F=s.palette)==null?void 0:F.text)==null?void 0:S.primary)||"#ffffff"}}})},j=async(a,g)=>{var f,N,_,w,h,y,o,k,C,P,F,S;const v=new Promise(async(d,I)=>{try{if((await K.post(route("user.updateDesignation",{id:a}),{designation_id:g})).status===200){const A=u.find(G=>G.id===parseInt(g))||null;R==null||R(a,{designation_id:g,designation_name:(A==null?void 0:A.title)||null}),d("Designation updated successfully")}}catch(D){console.error("Error updating designation:",D),I("Failed to update designation")}});O.promise(v,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ee,{size:16}),e("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=s.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((N=s.glassCard)==null?void 0:N.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((w=(_=s.palette)==null?void 0:_.text)==null?void 0:w.primary)||"#ffffff"}},success:{render({data:d}){return e("div",{children:d})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",background:((h=s.glassCard)==null?void 0:h.background)||"rgba(15, 20, 25, 0.15)",border:((y=s.glassCard)==null?void 0:y.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((k=(o=s.palette)==null?void 0:o.text)==null?void 0:k.primary)||"#ffffff"}},error:{render({data:d}){return e("div",{children:d})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",background:((C=s.glassCard)==null?void 0:C.background)||"rgba(15, 20, 25, 0.15)",border:((P=s.glassCard)==null?void 0:P.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((S=(F=s.palette)==null?void 0:F.text)==null?void 0:S.primary)||"#ffffff"}}})},m=async(a,g)=>{var f,N,_,w,h,y,o,k,C,P,F,S;const v=new Promise(async(d,I)=>{try{if((await K.post(route("user.updateAttendanceType",{id:a}),{attendance_type_id:g})).status===200){const A=x.find(G=>G.id===parseInt(g))||null;R&&R(a,{attendance_type_id:g,attendance_type_name:(A==null?void 0:A.name)||null}),d("Attendance type updated successfully")}}catch(D){console.error("Error updating attendance type:",D),I("Failed to update attendance type")}});O.promise(v,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ee,{size:16}),e("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=s.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((N=s.glassCard)==null?void 0:N.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((w=(_=s.palette)==null?void 0:_.text)==null?void 0:w.primary)||"#ffffff"}},success:{render({data:d}){return e("div",{children:d})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",background:((h=s.glassCard)==null?void 0:h.background)||"rgba(15, 20, 25, 0.15)",border:((y=s.glassCard)==null?void 0:y.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((k=(o=s.palette)==null?void 0:o.text)==null?void 0:k.primary)||"#ffffff"}},error:{render({data:d}){return e("div",{children:d})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",background:((C=s.glassCard)==null?void 0:C.background)||"rgba(15, 20, 25, 0.15)",border:((P=s.glassCard)==null?void 0:P.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((S=(F=s.palette)==null?void 0:F.text)==null?void 0:S.primary)||"#ffffff"}}})},re=async a=>{var f,N,_,w,h,y,o,k,C,P,F,S;if(!confirm("Are you sure you want to delete this employee?"))return;const v=new Promise(async(d,I)=>{try{(await K.delete(route("user.delete",{id:a}))).status===200&&(me&&me(a),d("Employee deleted successfully"))}catch(D){console.error("Error deleting employee:",D),I("Failed to delete employee")}});O.promise(v,{pending:{render(){return r("div",{style:{display:"flex",alignItems:"center"},children:[e(ee,{size:16}),e("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:((f=s.glassCard)==null?void 0:f.background)||"rgba(15, 20, 25, 0.15)",border:((N=s.glassCard)==null?void 0:N.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((w=(_=s.palette)==null?void 0:_.text)==null?void 0:w.primary)||"#ffffff"}},success:{render({data:d}){return e("div",{children:d})},icon:"游릭",style:{backdropFilter:"blur(16px) saturate(200%)",background:((h=s.glassCard)==null?void 0:h.background)||"rgba(15, 20, 25, 0.15)",border:((y=s.glassCard)==null?void 0:y.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((k=(o=s.palette)==null?void 0:o.text)==null?void 0:k.primary)||"#ffffff"}},error:{render({data:d}){return e("div",{children:d})},icon:"游댮",style:{backdropFilter:"blur(16px) saturate(200%)",background:((C=s.glassCard)==null?void 0:C.background)||"rgba(15, 20, 25, 0.15)",border:((P=s.glassCard)==null?void 0:P.border)||"1px solid rgba(255, 255, 255, 0.2)",color:((S=(F=s.palette)==null?void 0:F.text)==null?void 0:S.primary)||"#ffffff"}}})},ae=n.useMemo(()=>{const a=[{name:"#",uid:"sl"},{name:"EMPLOYEE",uid:"employee"},{name:"DEPARTMENT",uid:"department"},{name:"DESIGNATION",uid:"designation"},{name:"ACTIONS",uid:"actions"}];return p||a.splice(2,0,{name:"CONTACT",uid:"contact"}),!p&&!J&&a.splice(a.length-1,0,{name:"ATTENDANCE TYPE",uid:"attendance_type"}),a},[p,J]),Y=(a,g,v)=>{const f=a[g],w=(c!=null&&c.currentPage&&(c!=null&&c.perPage)?Number((c.currentPage-1)*c.perPage):0)+(typeof v=="number"?v:0)+1;switch(g){case"sl":return e("div",{className:"flex items-center justify-center",children:e("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e("span",{className:"text-sm font-semibold text-foreground",children:w})})});case"employee":return r("div",{children:[e(We,{avatarProps:{radius:"lg",src:a==null?void 0:a.profile_image,size:p?"sm":"md",fallback:e(He,{className:"w-4 h-4"})},name:a==null?void 0:a.name,description:p?null:`ID: ${(a==null?void 0:a.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}}),p&&r("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10",children:[r("div",{className:"flex items-center gap-1",children:[e(wt,{className:"w-3 h-3"}),(a==null?void 0:a.employee_id)||"N/A"]}),r("div",{className:"flex items-center gap-1",children:[e(we,{className:"w-3 h-3"}),a==null?void 0:a.email]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-1",children:[e(ye,{className:"w-3 h-3"}),a==null?void 0:a.phone]})]})]});case"contact":return r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(we,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.email})]}),(a==null?void 0:a.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(ye,{className:"w-4 h-4 text-default-400"}),e("span",{className:"text-foreground",children:a==null?void 0:a.phone})]})]});case"department":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(ne,{children:[e(le,{children:e(U,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e(xe,{className:"w-4 h-4"}),endContent:e(ie,{className:"w-4 h-4 rotate-90"}),children:e("span",{children:a.department_name||"Select Department"})})}),e(se,{"aria-label":"Department options",children:b==null?void 0:b.map(o=>e(Z,{onPress:()=>$(a.id,o.id),children:o.name},o.id.toString()))})]})});case"designation":const h=a.department_id,y=(u==null?void 0:u.filter(o=>o.department_id===parseInt(h)))||[];return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(ne,{isDisabled:!h,children:[e(le,{children:e(U,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${h?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!h,startContent:e(be,{className:"w-4 h-4"}),endContent:h&&e(ie,{className:"w-4 h-4 rotate-90"}),children:e("span",{children:h?a.designation_name||"Select Designation":"Select Department First"})})}),e(se,{"aria-label":"Designation options",children:y.map(o=>e(Z,{onPress:()=>j(a.id,o.id),children:o.title},o.id.toString()))})]})});case"attendance_type":return e("div",{className:"flex flex-col gap-2 min-w-[150px]",children:r(ne,{children:[e(le,{children:e(U,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e(ue,{className:"w-4 h-4"}),endContent:e(ie,{className:"w-4 h-4 rotate-90"}),children:e("span",{children:a.attendance_type_name||"Select Type"})})}),e(se,{"aria-label":"Attendance Type options",children:x==null?void 0:x.map(o=>e(Z,{onPress:()=>m(a.id,o.id),children:o.name},o.id.toString()))})]})});case"actions":return e("div",{className:"relative flex justify-center items-center",children:r(ne,{children:[e(le,{children:e(U,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e(ie,{className:"w-5 h-5"})})}),r(se,{"aria-label":"Employee Actions",children:[e(Z,{startContent:e(Ge,{className:"w-4 h-4"}),onPress:()=>ge.visit(route("profile",{user:a.id})),children:"Edit Profile"},"edit"),e(Z,{className:"text-danger",color:"danger",startContent:e(lt,{className:"w-4 h-4"}),onPress:()=>re(a.id),children:"Delete"},"delete")]})]})});default:return f}};return r("div",{className:"w-full overflow-hidden flex flex-col border border-white/10 rounded-lg relative",style:{maxHeight:"calc(100vh - 200px)"},children:[M&&e("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 rounded-lg",children:r("div",{className:"flex flex-col items-center gap-4 p-6 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:[e(Le,{size:"lg",color:"primary"}),e("span",{className:"text-sm text-foreground",children:"Loading employees..."})]})}),e("div",{className:"overflow-auto flex-grow",children:r(st,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"bg-white/5 backdrop-blur-md text-default-500 border-b border-white/10 font-medium text-xs sticky top-0 z-10",td:"border-b border-white/5 py-3",table:"border-collapse",thead:"bg-white/5",tr:"hover:bg-white/5"},isHeaderSticky:!0,isCompact:p,children:[e(nt,{columns:ae,children:a=>e(it,{align:a.uid==="actions"||a.uid==="sl"?"center":"start",width:a.uid==="sl"?60:void 0,children:a.name},a.uid)}),e(ot,{items:E||[],emptyContent:"No employees found",loadingContent:e(Le,{}),isLoading:M,children:(a,g)=>{const v=E?E.findIndex(f=>f.id===a.id):g;return e(dt,{className:"transition-all duration-300 hover:bg-white/5",children:f=>e(ct,{className:"transition-all duration-300",children:e("div",{className:"transition-all duration-200",children:Y(a,f,v)})})},a.id)}})]})}),!c||M?null:r("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2 border-t border-white/10 bg-white/5 backdrop-blur-md",children:[r("span",{className:"text-xs text-default-400 mb-3 sm:mb-0",children:["Showing ",(c.currentPage-1)*c.perPage+1," to ",Math.min(c.currentPage*c.perPage,c.total)," of ",c.total," employees"]}),e(Ue,{total:Math.ceil(c.total/c.perPage),initialPage:c.currentPage,page:c.currentPage,onChange:V,size:p?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})]})]})},vt=({title:E,departments:b,designations:u,attendanceTypes:x})=>{var k,C,P,F,S,d,I,D,A,G,_e,ke,Ce,Pe,Fe,Se,De,Ae,Re;const oe=Me(),p=ze(oe.breakpoints.down("sm")),J=ze(oe.breakpoints.down("md")),[c,V]=n.useState([]),[de,ce]=n.useState(!0),[M,R]=n.useState(0),[me,s]=n.useState(1),[i,L]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[W,he]=n.useState("table"),[te,ve]=n.useState(!1),[$,j]=n.useState({currentPage:1,perPage:10,total:0}),[m,re]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),ae=n.useCallback(async()=>{ce(!0);try{const{data:t}=await K.get(route("employees.paginate"),{params:{page:$.currentPage,perPage:$.perPage,search:i.search,department:i.department,designation:i.designation,attendanceType:i.attendanceType}});console.log(t),V(t.employees.data),R(t.employees.total),s(t.employees.last_page),j(l=>({...l,total:t.employees.total})),t.stats&&re(t.stats)}catch(t){console.error("Error fetching employees:",t),O.error("Failed to load employees data")}finally{ce(!1)}},[$.currentPage,$.perPage,i]),Y=n.useCallback(async()=>{try{const{data:t}=await K.get(route("employees.stats"));t.stats&&re(t.stats)}catch(t){console.error("Error fetching employee stats:",t)}},[]);n.useEffect(()=>{ae(),Y()},[ae,Y]);const Ne=n.useCallback(t=>{L(l=>({...l,search:t})),j(l=>({...l,currentPage:1}))},[]),a=n.useCallback(t=>{L(l=>({...l,department:t,designation:t!=="all"?"all":l.designation})),j(l=>({...l,currentPage:1}))},[]),g=n.useCallback(t=>{L(l=>({...l,designation:t})),j(l=>({...l,currentPage:1}))},[]),v=n.useCallback(t=>{L(l=>({...l,attendanceType:t})),j(l=>({...l,currentPage:1}))},[]),f=n.useCallback(t=>{j(l=>({...l,currentPage:t}))},[]),N=n.useCallback(t=>{j(l=>({...l,perPage:t,currentPage:1}))},[]),_=n.useCallback((t,l)=>{V(z=>z.map(B=>B.id===t?{...B,...l}:B))},[]),w=n.useCallback(t=>{V(l=>l.filter(z=>z.id!==t)),R(l=>l-1),j(l=>({...l,total:l.total-1})),Y()},[Y]),h=n.useMemo(()=>i.department==="all"?u:u.filter(t=>t.department_id===parseInt(i.department)),[u,i.department]),y=n.useMemo(()=>{var t,l,z,B,X,T,Ee,$e,je,Ie,Te;return[{title:"Total Employees",value:((t=m.overview)==null?void 0:t.total_employees)||0,icon:e(pe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:((l=m.overview)==null?void 0:l.active_employees)||0,icon:e(mt,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${((B=(z=m.workforce_health)==null?void 0:z.status_ratio)==null?void 0:B.active_percentage)||0}% Active`},{title:"Departments",value:((X=m.overview)==null?void 0:X.total_departments)||0,icon:e(xe,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:((T=m.overview)==null?void 0:T.total_designations)||0,icon:e(be,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${((Ee=m.workforce_health)==null?void 0:Ee.retention_rate)||0}%`,icon:e(ht,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:((je=($e=m.hiring_trends)==null?void 0:$e.recent_hires)==null?void 0:je.last_30_days)||0,icon:e(Be,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${((Ie=m.hiring_trends)==null?void 0:Ie.monthly_growth_rate)||0}%`,icon:e(pt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:((Te=m.overview)==null?void 0:Te.total_attendance_types)||0,icon:e(ue,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}]},[m]),o=({user:t,index:l})=>{const z=b==null?void 0:b.find(T=>T.id===t.department_id),B=u==null?void 0:u.find(T=>T.id===t.designation_id),X=x==null?void 0:x.find(T=>T.id===t.attendance_type_id);return e(qe,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>ge.visit(route("profile",{user:t.id})),children:r(Ye,{className:"p-4 flex flex-col h-full",children:[r("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e("div",{className:"flex-shrink-0",children:e(We,{avatarProps:{radius:"lg",src:t==null?void 0:t.profile_image,size:"md",fallback:e(He,{className:"w-4 h-4"})},name:t==null?void 0:t.name,description:`ID: ${(t==null?void 0:t.employee_id)||"N/A"}`,classNames:{name:"font-semibold text-foreground text-left text-sm",description:"text-default-500 text-left text-xs",wrapper:"justify-start"}})}),e("div",{className:"flex-1 min-w-0 flex justify-end",children:e(U,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:T=>{T.stopPropagation(),ge.visit(route("profile",{user:t.id}))},children:e(Ge,{className:"w-4 h-4"})})})]}),e("div",{className:"flex-1 flex flex-col gap-3",children:r("div",{className:"flex flex-col gap-2",children:[r("div",{className:"flex items-center gap-2 text-sm",children:[e(we,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs truncate",children:t==null?void 0:t.email})]}),(t==null?void 0:t.phone)&&r("div",{className:"flex items-center gap-2 text-sm",children:[e(ye,{className:"w-4 h-4 text-default-400 flex-shrink-0"}),e("span",{className:"text-default-600 text-xs",children:t==null?void 0:t.phone})]})]})}),r("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[z&&e(Q,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e(xe,{className:"w-3 h-3"}),children:z.name}),B&&e(Q,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e(be,{className:"w-3 h-3"}),children:B.title}),X&&e(Q,{size:"sm",variant:"bordered",className:"text-xs",startContent:e(ue,{className:"w-3 h-3"}),children:X.name})]})]})})};return r(Ve,{children:[e(Qe,{title:E}),e(ft,{sx:{display:"flex",justifyContent:"center",p:2},children:e(Ke,{in:!0,timeout:800,children:e(et,{children:e(rt,{title:"Employee Directory",subtitle:"Manage employee information, departments, and designations",icon:e(pe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:p?"Add":"Add Employee",icon:e(Be,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] text-white font-medium hover:opacity-90"}],children:r("div",{className:"p-4 sm:p-6",children:[e(at,{stats:y,className:"mb-6"}),r("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(H,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Department Distribution"}),e("div",{className:"space-y-3",children:(C=(k=m.distribution)==null?void 0:k.by_department)==null?void 0:C.slice(0,5).map((t,l)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},l))})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(H,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Hiring Trends"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 30 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((F=(P=m.hiring_trends)==null?void 0:P.recent_hires)==null?void 0:F.last_30_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Last 90 Days"}),e("span",{className:"text-sm font-medium text-foreground",children:((d=(S=m.hiring_trends)==null?void 0:S.recent_hires)==null?void 0:d.last_90_days)||0})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"This Year"}),e("span",{className:"text-sm font-medium text-foreground",children:((D=(I=m.hiring_trends)==null?void 0:I.recent_hires)==null?void 0:D.last_year)||0})]}),e("div",{className:"pt-2 border-t border-white/10",children:r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),r("span",{className:`text-sm font-medium ${(((A=m.hiring_trends)==null?void 0:A.monthly_growth_rate)||0)>=0?"text-green-400":"text-red-400"}`,children:[((G=m.hiring_trends)==null?void 0:G.monthly_growth_rate)||0,"%"]})]})})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(H,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Workforce Health"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Retention Rate"}),r("span",{className:"text-sm font-medium text-green-400",children:[((_e=m.workforce_health)==null?void 0:_e.retention_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),r("span",{className:"text-sm font-medium text-orange-400",children:[((ke=m.workforce_health)==null?void 0:ke.turnover_rate)||0,"%"]})]}),r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:"Active Employees"}),r("span",{className:"text-sm font-medium text-blue-400",children:[((Pe=(Ce=m.workforce_health)==null?void 0:Ce.status_ratio)==null?void 0:Pe.active_percentage)||0,"%"]})]})]})]}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e(H,{variant:"h6",className:"font-semibold text-foreground mb-4",children:"Attendance Types"}),e("div",{className:"space-y-3",children:(Se=(Fe=m.distribution)==null?void 0:Fe.by_attendance_type)==null?void 0:Se.map((t,l)=>r("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-default-600",children:t.name}),r("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${t.percentage}%`}})}),e("span",{className:"text-xs text-default-500 w-8",children:t.count})]})]},l))})]})]}),r("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e("div",{className:"flex-1",children:e(bt,{label:"Search Employees",variant:"bordered",placeholder:"Search by name, email, or employee ID...",value:i.search,onValueChange:Ne,startContent:e(Je,{className:"w-4 h-4"}),classNames:{input:"bg-transparent",inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},size:p?"sm":"md"})}),r("div",{className:"flex gap-2 items-end",children:[r(ut,{variant:"bordered",className:"bg-white/5",children:[r(U,{isIconOnly:p,color:W==="table"?"primary":"default",onPress:()=>he("table"),className:W==="table"?"bg-blue-500/20":"",children:[e(gt,{className:"w-4 h-4"}),!p&&e("span",{className:"ml-1",children:"Table"})]}),r(U,{isIconOnly:p,color:W==="grid"?"primary":"default",onPress:()=>he("grid"),className:W==="grid"?"bg-blue-500/20":"",children:[e(Xe,{className:"w-4 h-4"}),!p&&e("span",{className:"ml-1",children:"Grid"})]})]}),r(U,{isIconOnly:p,variant:"bordered",onPress:()=>ve(!te),className:te?"bg-purple-500/20":"bg-white/5",children:[e(Ze,{className:"w-4 h-4"}),!p&&e("span",{className:"ml-1",children:"Filters"})]})]})]}),te&&e(tt,{in:!0,timeout:300,children:r("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[r("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r(fe,{label:"Department",variant:"bordered",selectedKeys:i.department!=="all"?[i.department]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";a(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(q,{value:"all",children:"All Departments"},"all"),b==null?void 0:b.map(t=>e(q,{value:t.id.toString(),children:t.name},t.id.toString()))]}),r(fe,{label:"Designation",variant:"bordered",selectedKeys:i.designation!=="all"?[i.designation]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";g(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(q,{value:"all",children:"All Designations"},"all"),h==null?void 0:h.map(t=>e(q,{value:t.id.toString(),children:t.title},t.id.toString()))]}),!p&&r(fe,{label:"Attendance Type",variant:"bordered",selectedKeys:i.attendanceType!=="all"?[i.attendanceType]:[],onSelectionChange:t=>{const l=Array.from(t)[0]||"all";v(l)},classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"},children:[e(q,{value:"all",children:"All Attendance Types"},"all"),x==null?void 0:x.map(t=>e(q,{value:t.id.toString(),children:t.name},t.id.toString()))]})]}),(i.search||i.department!=="all"||i.designation!=="all"||i.attendanceType!=="all")&&r("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[i.search&&r(Q,{variant:"flat",color:"primary",size:"sm",onClose:()=>L(t=>({...t,search:""})),children:["Search: ",i.search]}),i.department!=="all"&&r(Q,{variant:"flat",color:"secondary",size:"sm",onClose:()=>L(t=>({...t,department:"all"})),children:["Department: ",(De=b==null?void 0:b.find(t=>t.id===parseInt(i.department)))==null?void 0:De.name]}),i.designation!=="all"&&r(Q,{variant:"flat",color:"warning",size:"sm",onClose:()=>L(t=>({...t,designation:"all"})),children:["Designation: ",(Ae=u==null?void 0:u.find(t=>t.id===parseInt(i.designation)))==null?void 0:Ae.title]}),i.attendanceType!=="all"&&r(Q,{variant:"flat",color:"success",size:"sm",onClose:()=>L(t=>({...t,attendanceType:"all"})),children:["Attendance: ",(Re=x==null?void 0:x.find(t=>t.id===parseInt(i.attendanceType)))==null?void 0:Re.name]})]})]})}),r("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e("div",{className:"p-4 border-b border-white/10",children:r(H,{variant:"h6",className:"font-semibold text-foreground",children:[W==="table"?"Employee Table":"Employee Grid",r("span",{className:"text-sm text-default-500 ml-2",children:["(",M," ",M===1?"employee":"employees",")"]})]})}),de?r("div",{className:"text-center py-8",children:[e(ee,{size:40}),e(H,{className:"mt-4",color:"textSecondary",children:"Loading employees data..."})]}):W==="table"?e(yt,{allUsers:c,departments:b,designations:u,attendanceTypes:x,setUsers:V,isMobile:p,isTablet:J,pagination:$,onPageChange:f,onRowsPerPageChange:N,totalUsers:M,loading:de,updateEmployeeOptimized:_,deleteEmployeeOptimized:w}):r("div",{className:"p-4",children:[c.length>0?e("div",{className:`grid gap-4 ${p?"grid-cols-1":J?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:c.map((t,l)=>e(o,{user:t,index:l},t.id))}):r("div",{className:"text-center py-8",children:[e(pe,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e(H,{variant:"body1",color:"textSecondary",children:"No employees found"}),e(H,{variant:"caption",color:"textSecondary",children:"Try adjusting your search or filters"})]}),c.length>0&&e("div",{className:"flex justify-center mt-6 border-t border-white/10 pt-4",children:e(Ue,{total:Math.ceil(M/$.perPage),initialPage:$.currentPage,page:$.currentPage,onChange:f,size:p?"sm":"md",variant:"bordered",showControls:!0,classNames:{item:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15",cursor:"bg-white/20 backdrop-blur-md border-white/20"}})})]})]})]})})})})})]})};vt.layout=E=>e(Oe,{children:E});export{vt as default};
