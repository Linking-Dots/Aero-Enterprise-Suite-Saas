import{V as F,a as e,j as d,F as C,M as q}from"./app-D1RranZH.js";import{r as n,u as w,T as A,X as P,c as $,G as D,b as S,Z as L,$ as M,t as E,a0 as U,f as T,h as V,D as j,a as O,B as R}from"./vendor-CvAEURx2.js";import{g as X,B as G,G as Y,A as Z}from"./App-BY9fmDHJ.js";import{d as z}from"./Delete-BoLIRG4o.js";import{a as J,b as Q,c as K,d as ee,e as te,t as re}from"./chunk-YRZGWF2W-BPTsNMok.js";import{t as B}from"./chunk-LY4WDGUU-BAekcXuZ.js";import{d as ae,G as W}from"./GlassDialog-Bmt8WgnJ.js";import{L as oe}from"./LoadingButton-DVsE6rD2.js";import{A as le}from"./Add-DNU0I4v8.js";import"./chunk-CKQ4RPMV-Bgkc5eAa.js";import"./chunk-YBBOLEEC-B5csjMFD.js";import"./chunk-7F3ZLNJ6-CEWSASaK.js";const se=({holidaysData:c,handleClickOpen:u,setCurrentHoliday:g,openModal:l,setHolidaysData:t})=>{F().props,n.useState(null),w();const a=(r,s)=>{const o=r[s];switch(s){case"title":return o;case"from_date":return new Date(o).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});case"to_date":return new Date(o).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"});case"actions":return d("div",{className:"relative flex items-center gap-2",children:[e(B,{content:"Edit Holiday",children:e("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>{g(r),l("edit_holiday")},children:e(X,{})})}),e(B,{content:"Delete Holiday",color:"danger",children:e("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>u(r.id,"delete_holiday"),children:e(z,{})})})]});default:return o}},h=[{name:"Title",uid:"title"},{name:"From Date",uid:"from_date"},{name:"To Date",uid:"to_date"},{name:"Actions",uid:"actions"}];return e("div",{style:{maxHeight:"84vh",overflowY:"auto"},children:c.length===0?e(A,{variant:"h6",align:"center",sx:{mt:2},children:"No holidays"}):d(re,{isStriped:!0,selectionMode:"multiple",selectionBehavior:"toggle",isHeaderSticky:!0,removeWrapper:!0,"aria-label":"Holiday Table",children:[e(J,{columns:h,children:r=>e(Q,{align:r.uid==="actions"?"center":"start",children:r.name},r.uid)}),e(K,{items:c,children:r=>e(ee,{children:s=>e(te,{style:{whiteSpace:"nowrap"},children:a(r,s)})},r.id)})]})})},H=({open:c,closeModal:u,holidaysData:g,setHolidaysData:l,currentHoliday:t})=>{F().props;const a=w(),[h,r]=n.useState((t==null?void 0:t.title)||""),[s,o]=n.useState((t==null?void 0:t.from_date)||""),[f,p]=n.useState((t==null?void 0:t.to_date)||""),[m,k]=n.useState({}),[I,_]=n.useState(!1);return d(W,{open:c,onClose:u,fullWidth:!0,maxWidth:"sm",children:[d(P,{sx:{display:"flex",alignItems:"center"},children:[e(A,{variant:"h6",children:"Add Holiday"}),e($,{onClick:u,sx:{position:"absolute",top:8,right:16},children:e(ae,{})})]}),d("form",{onSubmit:async y=>{y.preventDefault(),_(!0);const N=new Promise(async(x,b)=>{try{const i={title:h,fromDate:s,toDate:f};t&&(i.id=t.id);const v=await axios.post(route("holiday-add"),i);v.status===200&&(l(v.data.holidays),x([v.data.message||"Holiday added successfully"]),u())}catch(i){_(!1),i.response?(i.response.status===422?(k(i.response.data.errors||{}),b(i.response.statusText||"Failed to add holiday")):b("An unexpected error occurred. Please try again later."),console.error(i.response)):i.request?(b("No response received from the server. Please check your internet connection."),console.error(i.request)):(b("An error occurred while setting up the request."),console.error("Error",i.message))}finally{_(!1)}});G.promise(N,{pending:{render(){return d("div",{style:{display:"flex",alignItems:"center"},children:[e(E,{}),e("span",{style:{marginLeft:"8px"},children:"Adding holiday..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:a.glassCard.backgroundColor,border:a.glassCard.border,color:a.palette.text.primary}},success:{render({data:x}){return e(C,{children:x.map((b,i)=>e("div",{children:b},i))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:a.glassCard.backgroundColor,border:a.glassCard.border,color:a.palette.text.primary}},error:{render({data:x}){return e(C,{children:x})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:a.glassCard.backgroundColor,border:a.glassCard.border,color:a.palette.text.primary}}})},children:[e(L,{children:d(D,{container:!0,spacing:2,children:[e(D,{item:!0,xs:12,md:6,children:e(S,{label:"Title",type:"text",fullWidth:!0,value:h,onChange:y=>r(y.target.value),InputLabelProps:{shrink:!0},error:!!m.title,helperText:m.title})}),e(D,{item:!0,xs:12,md:6,children:e(S,{label:"From",type:"date",fullWidth:!0,value:s,onChange:y=>o(y.target.value),InputLabelProps:{shrink:!0},error:!!m.fromDate,helperText:m.fromDate})}),e(D,{item:!0,xs:12,md:6,children:e(S,{label:"To",type:"date",fullWidth:!0,value:f,onChange:y=>p(y.target.value),InputLabelProps:{shrink:!0},error:!!m.toDate,helperText:m.toDate})})]})}),e(M,{sx:{padding:"16px",justifyContent:"center"},children:e(oe,{type:"submit",variant:"outlined",color:"primary",loading:I,disabled:I,sx:{borderRadius:"50px"},children:"Submit"})})]})]})},ie=({open:c,handleClose:u,holidayIdToDelete:g,setHolidaysData:l})=>{const t=w();return d(W,{open:c,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e(P,{id:"alert-dialog-title",children:"Confirm Deletion"}),e(L,{children:e(U,{id:"alert-dialog-description",children:"Are you sure you want to delete this holiday? This action cannot be undone."})}),d(M,{children:[e(T,{onClick:u,color:"primary",children:"Cancel"}),e(T,{onClick:()=>{const h=new Promise(async(r,s)=>{try{const o=await axios.delete(route("holiday-delete",{id:g,route:route().current()}));o.status===200&&(l(o.data.holidays),r("Holiday deleted successfully"))}catch(o){console.error("Error deleting task:",o),s(o.response.data.error||"Failed to delete holiday")}finally{u()}});G.promise(h,{pending:{render(){return d("div",{style:{display:"flex",alignItems:"center"},children:[e(E,{}),e("span",{style:{marginLeft:"8px"},children:"Deleting holiday..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:t.glassCard.backgroundColor,border:t.glassCard.border,color:t.palette.text.primary}},success:{render({data:r}){return e(C,{children:r})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:t.glassCard.backgroundColor,border:t.glassCard.border,color:t.palette.text.primary}},error:{render({data:r}){return e(C,{children:r})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",backgroundColor:t.glassCard.backgroundColor,border:t.glassCard.border,color:t.palette.text.primary}}})},color:"error",autoFocus:!0,children:"Delete"})]})]})},ne=({title:c})=>{const{auth:u,holidays:g}=F().props,[l,t]=n.useState({type:null,holidayId:null,currentHoliday:null}),[a,h]=n.useState(g),r=n.useCallback((p,m=null,k=null)=>{t({type:p,holidayId:m,currentHoliday:k})},[]),s=n.useCallback(()=>{t({type:null,holidayId:null,currentHoliday:null})},[]),o=n.useCallback(p=>{h(p)},[]),f=n.useMemo(()=>({open:!!l.type,closeModal:s,setHolidaysData:o,holidaysData:a,currentHoliday:l.currentHoliday}),[l.type,s,o,a,l.currentHoliday]);return d(C,{children:[e(q,{title:c}),l.type==="add_holiday"&&e(H,{...f}),l.type==="edit_holiday"&&e(H,{...f}),l.type==="delete_holiday"&&e(ie,{open:!0,holidayId:l.holidayId,setHolidaysData:o,closeModal:s,holidaysData:a}),e(R,{sx:{p:2},children:d(Y,{children:[e(V,{title:e(A,{variant:"h6",component:"div",children:"Holidays"}),action:e(T,{variant:"contained",startIcon:e(le,{}),onClick:()=>r("add_holiday"),children:"Add Holiday"})}),e(j,{}),e(O,{children:e(se,{holidays:a,onEdit:p=>r("edit_holiday",null,p),onDelete:p=>r("delete_holiday",p)})})]})})]})};ne.layout=c=>e(Z,{children:c});export{ne as default};
