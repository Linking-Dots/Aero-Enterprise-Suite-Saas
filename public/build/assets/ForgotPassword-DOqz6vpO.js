import{j as o,a as e,M as b,U as C,F as f,h as j}from"./app-BDL2Y3Ac.js";import{A as _,j as S,u as E,r as u,G as m,a as M,B as a,d as N,T}from"./vendor-DhsbrqqY.js";import{r as q,G as I,l as O,c as w,A as W}from"./App-BAl9-fyJ.js";import{d as k,a as g}from"./Password-4sTsHRRc.js";import{i as p}from"./chunk-HJTJQZF3-KpnUfdqE.js";import"./chunk-2BFF5KFD-CY6UALKj.js";import"./chunk-SLABUSGS-CPDwsMNJ.js";import"./chunk-M3MASYO7-COGiOE1Q.js";var x={},A=_;Object.defineProperty(x,"__esModule",{value:!0});var P=x.default=void 0,D=A(q()),F=S;P=x.default=(0,D.default)((0,F.jsx)("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"VpnKey");function $(){E();const[r,d]=u.useState({email:"",otp:"",newPassword:"",confirmPassword:""}),[h,c]=u.useState(!1),[n,i]=u.useState({}),[l,v]=u.useState(1),y=s=>{s.preventDefault(),c(!0),l===1?axios.post(route("password.email"),{email:r.email}).then(t=>{i({}),v(2)}).catch(t=>{console.error(t),console.error("Password reset OTP request failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)}):l===2?axios.post(route("password.verify"),{email:r.email,otp:r.otp}).then(t=>{i({}),v(3)}).catch(t=>{console.error(t),console.error("OTP verification failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)}):l===3&&axios.post(route("password.reset"),{email:r.email,newPassword:r.newPassword,newPassword_confirmation:r.confirmPassword}).then(t=>{j.get(route("login"))}).catch(t=>{console.error(t),console.error("Password reset failed:",t.response.data.errors),i(t.response.data.errors)}).finally(()=>{c(!1)})};return o(W,{children:[e(b,{title:"Forgot Password"}),e(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:e(m,{container:!0,spacing:2,justifyContent:"center",children:e(m,{item:!0,xs:12,md:8,lg:6,xl:5,children:e(I,{children:o(M,{children:[e(a,{textAlign:"center",children:e(C,{style:{alignItems:"center",display:"inline-flex"},href:route("dashboard"),className:"d-inline-block auth-logo",children:e("img",{src:O,alt:"Logo",className:"h-24 md:h-40 sm:h-40 xs:h-10"})})}),e(a,{mt:4,children:o("form",{onSubmit:y,children:[l===1&&o(f,{children:[e(a,{mb:3,children:e(p,{isClearable:!0,type:"email",label:"Enter your email address",variant:"underlined",id:"email",name:"email",value:r.email||"",onChange:s=>{d({...r,email:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.email,errorMessage:n.email,placeholder:"you@example.com",labelPlacement:"outside",startContent:e(k,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:h,children:"Send OTP"})})]}),l===2&&o(f,{children:[e(a,{mb:3,children:e(p,{isClearable:!0,type:"text",label:"Enter OTP sent to your email",variant:"underlined",id:"otp",name:"otp",value:r.otp||"",onChange:s=>{d({...r,otp:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.otp,errorMessage:n.otp,placeholder:"Enter the OTP",labelPlacement:"outside",startContent:e(P,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:h,children:"Verify OTP"})})]}),l===3&&o(f,{children:[e(a,{mb:4,children:e(p,{label:"New Password",id:"newPassword",name:"newPassword",variant:"underlined",startContent:e(g,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"}),type:"password",value:r.newPassword||"",onChange:s=>{d({...r,newPassword:s.target.value})},required:!0,isInvalid:!!n.newPassword,errorMessage:n.newPassword,placeholder:"Enter new password",labelPlacement:"outside"})}),e(a,{mb:4,children:e(p,{isClearable:!0,type:"password",label:"Confirm New Password",variant:"underlined",id:"confirmPassword",name:"confirmPassword",value:r.confirmPassword||"",onChange:s=>{d({...r,confirmPassword:s.target.value})},required:!0,fullWidth:!0,isInvalid:!!n.confirmPassword,errorMessage:n.confirmPassword,placeholder:"Confirm new password",labelPlacement:"outside",startContent:e(g,{className:"text-2xl text-default-400 pointer-events-none flex-shrink-0"})})}),e(a,{mt:4,children:e(w,{fullWidth:!0,variant:"bordered",color:"primary",type:"submit",isLoading:h,children:"Reset Password"})})]})]})})]})})})})}),e("footer",{children:e(N,{children:e(m,{container:!0,justifyContent:"center",children:e(m,{item:!0,xs:12,textAlign:"center",children:o(T,{variant:"body2",color:"text.secondary",children:["Â© ",new Date().getFullYear()," Emam Hosen. Crafted with ",e("i",{className:"mdi mdi-heart text-danger"})]})})})})})]})}export{$ as default};
