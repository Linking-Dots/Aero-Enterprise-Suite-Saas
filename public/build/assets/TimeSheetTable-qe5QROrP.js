import{R as Je,r as n,j as a,a as e,y as Ve,J as _e,b as X,f as Ce,F as re,h as ke,d as Se}from"./app-DDhVNfvV.js";import{G as Qe}from"./GlassCard-B8deHOrc.js";import{d as u}from"./dayjs.min-Dao2E2MD.js";import{P as Xe}from"./PageHeader-qfMvUU9K.js";import{F as I}from"./CheckCircleIcon-BkPxWqsz.js";import{B as s,T as d}from"./logo-DoLGM3I0.js";import{a as Me,d as se,F as W,k as qe,u as Ye,s as $e,i as $,G as Ze}from"./App-CULBC9Jb.js";import{F as ne}from"./UserIcon-BZDmR83e.js";import{F as j}from"./ExclamationTriangleIcon-3tpAB86s.js";import{B as et}from"./Button-PH-Yt16S.js";import{F as f}from"./ClockIcon-UBQM4q2z.js";import{i as oe}from"./chunk-6MDMHKHV-DNEscIMF.js";import{a as tt}from"./chunk-A6PX3NG3-DZLS-1Gt.js";import{C as at}from"./CardHeader-BPTzkM70.js";import{F as Pe}from"./DocumentArrowDownIcon-C7bxjW28.js";import{F as rt}from"./UserGroupIcon-CFQYzcyB.js";import{C as Le}from"./CardContent-783YhD2K.js";import{s as Fe}from"./chunk-TLYTI3QM-Dj5Yyjz6.js";import{t as Te,a as Ae,b as Re,c as Ee,d as Ue,e as C}from"./chunk-F3UDT23P-Bon0qFEG.js";import{p as je}from"./chunk-O5I3QTYU-BlPqa12Y.js";import{u as st}from"./chunk-R6AK6OQ4-DKmNo5vD.js";const nt=Je.memo(({absentUsers:P,selectedDate:o,getUserLeave:L})=>{const[k,M]=n.useState(5),[w,N]=n.useState(""),m=n.useMemo(()=>{if(!w.trim())return P;const l=w.toLowerCase();return P.filter(i=>{var z,B,H,g;const v=((z=i.name)==null?void 0:z.toLowerCase())||"",S=((B=i.employee_id)==null?void 0:B.toString().toLowerCase())||"",T=((H=i.email)==null?void 0:H.toLowerCase())||"",A=((g=i.phone)==null?void 0:g.toString().toLowerCase())||"";return v.includes(l)||S.includes(l)||T.includes(l)||A.includes(l)})},[P,w]),F=()=>{M(l=>l+5)},E=l=>{N(l.target.value),M(5)},D=l=>{switch(l==null?void 0:l.toLowerCase()){case"approved":return e(I,{className:"w-4 h-4 text-success"});case"rejected":return e(Me,{className:"w-4 h-4 text-danger"});default:return e(f,{className:"w-4 h-4 text-warning"})}},q=m.length;return P.length===0?a(s,{className:"h-full",children:[e(Xe,{title:"Perfect Attendance!",subtitle:`No employees are absent on ${u(o).format("MMMM D, YYYY")}`,icon:e(I,{className:"w-6 h-6"}),variant:"gradient",actionButtons:[{label:"0",variant:"flat",color:"success",icon:e(I,{className:"w-4 h-4"}),className:"bg-green-500/10 text-green-500 border-green-500/20"}]}),a(s,{role:"region","aria-label":"No absent employees today",className:"text-center py-12 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg h-96 flex flex-col items-center justify-center",children:[e(I,{className:"w-12 h-12 text-success mx-auto mb-4"}),e(d,{variant:"body2",color:"success",className:"mb-2 text-sm font-medium",children:"Perfect Attendance!"}),e(d,{variant:"caption",color:"textSecondary",className:"text-xs",children:"No employees are absent today."}),e(d,{variant:"caption",color:"textSecondary",className:"mt-1 block text-xs",children:"All employees are either present or on approved leave."})]})]}):a(s,{className:"h-full",children:[e(s,{className:"mb-4 flex items-center justify-between",children:e(s,{className:"mb-4",children:a(d,{variant:"h6",className:"font-semibold text-red-600 flex items-center gap-2",children:[e(Me,{className:"w-5 h-5"}),"Absent Employees (",q,")"]})})}),e(s,{className:"mb-3 m-2",children:e(oe,{type:"text",placeholder:"Search absent employees...",value:w,onChange:E,startContent:e(se,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search absent employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 h-10",input:"text-sm"}})}),w&&e(s,{className:"mb-2 ",children:a(d,{variant:"caption",color:"textSecondary",className:"text-xs",children:[m.length," of ",P.length," employees found"]})}),w&&m.length===0&&a(s,{className:"text-center py-8 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg",children:[e(se,{className:"w-8 h-8 text-default-300 mx-auto mb-2"}),a(d,{variant:"body2",color:"textSecondary",className:"text-sm",children:['No employees found matching "',w,'"']})]}),a(s,{role:"region","aria-label":"Absent employees list",className:"overflow-y-auto max-h-[520px]",children:[m.slice(0,k).map(l=>{var v,S;const i=L(l.id);return e(qe,{in:!0,timeout:"auto",children:e("div",{className:"p-3 m-2 bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/15 transition-all duration-200 rounded-lg",children:a(s,{className:"flex items-start justify-between",children:[a(s,{className:"flex items-center gap-2 flex-1",children:[e(tt,{src:l.profile_image,alt:l.name,size:"sm",fallback:e(ne,{className:"w-4 h-4"})}),a(s,{className:"flex-1 min-w-0",children:["                                            ",e(d,{variant:"body2",fontWeight:"medium",className:"truncate text-sm",children:l.name}),l.employee_id&&a(d,{variant:"caption",color:"textSecondary",className:"block text-xs",children:["ID: ",l.employee_id]}),i?a(s,{className:"flex flex-col gap-1 mt-1",children:[a(d,{variant:"caption",color:"textSecondary",className:"flex items-center gap-1 text-xs",children:[e(W,{className:"w-3 h-3"}),i.from_date===i.to_date?i.from_date:`${i.from_date} - ${i.to_date}`]}),a(d,{variant:"caption",color:"primary",className:"flex items-center gap-1 text-xs",children:[D(i.status),i.leave_type," Leave"]})]}):a(d,{variant:"caption",color:"error",className:"flex items-center gap-1 mt-1 text-xs",children:[e(j,{className:"w-3 h-3"}),"Absent without leave"]})]})]}),i&&e("div",{className:"bg-white/20 backdrop-blur-md border border-white/30 rounded-md px-1.5 py-0.5 ml-2",children:a("div",{className:"flex items-center gap-1",children:[D(i.status),e(d,{variant:"caption",className:`font-semibold text-xs ${((v=i.status)==null?void 0:v.toLowerCase())==="approved"?"text-green-600":((S=i.status)==null?void 0:S.toLowerCase())==="rejected"?"text-red-600":"text-orange-600"}`,children:i.status})]})})]})})},l.id)}),k<m.length&&e(s,{className:"text-center mt-4 pb-4",children:a(et,{variant:"outlined",onClick:F,startIcon:e(Ve,{className:"w-4 h-4"}),size:"small",color:"warning",fullWidth:!0,children:["Show More (",m.length-k," remaining)"]})})]})]})}),Lt=({handleDateChange:P,selectedDate:o,updateTimeSheet:L,externalFilterData:k,externalEmployee:M})=>{var Ne,ye,ve;const{auth:w}=_e().props,{url:N}=_e(),m=Ye("(min-width: 1025px)"),F=Ye("(min-width: 641px) and (max-width: 1024px)"),[E,D]=n.useState([]),[q,l]=n.useState([]),[i,v]=n.useState([]),[S,T]=n.useState(""),[A,z]=n.useState(0),[B,H]=n.useState(0),[g,ot]=n.useState(10),[Y,Z]=n.useState(1),[_,le]=n.useState(M||""),[O,R]=n.useState(!1),[G,lt]=n.useState(0),[ct,ce]=n.useState(null),[ie,it]=n.useState(!0),[ee,de]=n.useState(new Date),me=n.useRef(null),p=n.useRef({currentMonth:u().format("YYYY-MM"),employee:M||"",filterData:k||{currentMonth:u().format("YYYY-MM")},selectedDate:o,perPage:10,updateTimeSheet:L,refreshKey:0,currentPage:1}),[b,he]=n.useState(k||{currentMonth:u().format("YYYY-MM")}),K=n.useCallback(async()=>{try{return R(!1),await pe(o,Y,g,_,b,!0),N!=="/attendance-employee"&&await fe(o,_),de(new Date),!0}catch(t){return console.error("Error refreshing timesheet:",t),!1}finally{R(!0)}},[o,Y,g,_,b,N]),te=n.useCallback(async()=>{if(o)try{const t=route("check-timesheet-updates",{date:u(o).format("YYYY-MM-DD"),month:b.currentMonth}),c=await fetch(t);if(!c.ok){const y=await c.json().catch(()=>({}));throw new Error(`HTTP ${c.status}: ${y.message||"Failed to check for updates"}`)}const r=await c.json();r.success&&r.last_updated!==me.current&&r.last_updated&&(me.current=r.last_updated,await K(),ce(new Date)),de(new Date)}catch(t){console.error("Error checking for timesheet updates:",t)}},[o,b.currentMonth,K]),ue=n.useMemo(()=>ee?ee.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):null,[ee]),pe=async(t,c,r,y,h,J=!1)=>{var ae,Q;if(!t){R(!0),T("No date selected");return}const V=N!=="/attendance-employee"?route("admin.getPresentUsersForDate"):route("getCurrentUserAttendanceForDate");try{R(!1),T("");const x=await X.get(V,{params:{page:c,perPage:r,employee:y,date:u(t).format("YYYY-MM-DD"),currentYear:h!=null&&h.currentMonth?u(h.currentMonth).year():"",currentMonth:h!=null&&h.currentMonth?u(h.currentMonth).format("MM"):"",_t:J?Date.now():void 0}});x.status===200?(D(x.data.attendances||[]),z(x.data.total||0),H(x.data.last_page||1),Z(x.data.current_page||1),ce(new Date),T("")):T(`Unexpected response: ${x.status}`)}catch(x){console.error("Error fetching attendance data:",x),T(((Q=(ae=x.response)==null?void 0:ae.data)==null?void 0:Q.message)||"An error occurred while retrieving attendance data."),D([]),z(0)}finally{R(!0)}},fe=async(t,c)=>{if(N==="/attendance-employee"){v([]),l([]);return}if(!t){v([]),l([]);return}try{const r=await X.get(route("admin.getAbsentUsersForDate"),{params:{date:u(t).format("YYYY-MM-DD"),employee:c||"",_t:Date.now()}});r.status===200?(v(r.data.absent_users||[]),l(r.data.leaves||[])):(console.warn("Unexpected response getting absent users:",r.status),v([]),l([]))}catch(r){console.error("Error fetching absent users:",r),v([]),l([])}},Ie=t=>{le(t.target.value.toLowerCase())},ge=t=>{Z(t)};n.useCallback((t,c)=>{he(r=>({...r,[t]:c}))},[]);const De=t=>q.find(c=>String(c.user_id)===String(t)),be=(t,c)=>{if(!t)return null;try{let r;if(typeof t=="string"){const y=u(c).format("YYYY-MM-DD");if(t.match(/^\d{2}:\d{2}:\d{2}$/)){const h=`${y}T${t}`;r=new Date(h)}else if(t.includes("T")||t.includes(" "))r=new Date(t);else if(t.match(/^\d{2}:\d{2}$/)){const h=`${y}T${t}:00`;r=new Date(h)}else r=new Date(`${y}T${t}`)}else r=new Date(t);return isNaN(r.getTime())?(console.warn("Invalid time data:",t),"Invalid time"):r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(r){return console.warn("Error formatting time:",{timeString:t,date:c,error:r}),"Invalid time"}},U=((Ne=w.permissions)==null?void 0:Ne.includes("attendance.view"))||!1,ze=((ye=w.permissions)==null?void 0:ye.includes("attendance.manage"))||!1,Be=((ve=w.permissions)==null?void 0:ve.includes("attendance.export"))||ze||!1;n.useMemo(()=>i,[i]);const xe=[...!U&&N!=="/attendance"?[{name:"Date",uid:"date",icon:W,ariaLabel:"Attendance date"}]:[],...N=="/attendance-employee"?[{name:"Date",uid:"date",icon:W,ariaLabel:"Attendance date"}]:[],...U&&N!=="/attendance-employee"?[{name:"Employee",uid:"employee",icon:ne,ariaLabel:"Employee name and information"}]:[],{name:"Clock In",uid:"clockin_time",icon:f,ariaLabel:"First punch in time"},{name:"Clock Out",uid:"clockout_time",icon:f,ariaLabel:"Last punch out time"},{name:"Work Hours",uid:"production_time",icon:f,ariaLabel:"Total working hours"},{name:"Punches",uid:"punch_details",icon:f,ariaLabel:"Number of time punches recorded"}],we=(t,c)=>{var h,J,V;const r="text-xs sm:text-sm md:text-base whitespace-nowrap",y=u(t.date).isSame(u(),"day");switch(c){case"date":return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(W,{className:"w-4 h-4 text-primary flex-shrink-0"}),e(s,{className:"flex flex-col",children:e("span",{children:u(t.date).format("MMM D, YYYY")})})]})});case"employee":return e(C,{className:"whitespace-nowrap",children:e(st,{avatarProps:{radius:"lg",size:m||F?"md":"sm",src:(h=t.user)==null?void 0:h.profile_image,fallback:e(ne,{className:"w-6 h-6"})},description:(J=t.user)==null?void 0:J.phone,name:(V=t.user)==null?void 0:V.name})});case"clockin_time":return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(f,{className:"w-4 h-4 text-success"}),a(s,{className:"flex flex-col",children:[e("span",{children:t.punchin_time?be(t.punchin_time,t.date)||"Invalid time":"Not clocked in"}),t.punchin_time&&e("span",{className:"text-xs text-default-500",children:"First punch"})]})]})});case"clockout_time":return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(f,{className:"w-4 h-4 text-danger"}),a(s,{className:"flex flex-col",children:[e("span",{children:t.punchout_time?be(t.punchout_time,t.date)||"Invalid time":t.punchin_time?y?"Currently working":"Missing punch-out":"Not started"}),t.punchout_time&&e("span",{className:"text-xs text-default-500",children:"Last punch"})]})]})});case"production_time":const Q=t.total_work_minutes>0,x=t.has_incomplete_punch,Oe=t.punchin_time&&!t.punchout_time&&y;if(Q){const Ge=Math.floor(t.total_work_minutes/60),Ke=Math.floor(t.total_work_minutes%60);return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(f,{className:`w-4 h-4 ${x?"text-warning":"text-primary"}`}),a(s,{className:"flex flex-col",children:[e("span",{className:"font-medium",children:`${Ge}h ${Ke}m`}),e("span",{className:"text-xs text-default-500",children:x?"Partial data - in progress":"Total worked time"})]})]})})}else{if(Oe)return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(f,{className:"w-4 h-4 text-warning"}),a(s,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"In Progress"}),e("span",{className:"text-xs text-default-500",children:"Currently working"})]})]})});if(t.punchin_time&&!t.punchout_time&&!y)return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(j,{className:"w-4 h-4 text-danger"}),a(s,{className:"flex flex-col",children:[e("span",{className:"text-danger",children:"Incomplete punch"}),e("span",{className:"text-xs text-default-500",children:"Missing punch out"})]})]})})}return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(j,{className:"w-4 h-4 text-warning"}),a(s,{className:"flex flex-col",children:[e("span",{className:"text-warning",children:"No work time"}),e("span",{className:"text-xs text-default-500",children:"No attendance"})]})]})});case"punch_details":return e(C,{className:`${r}`,children:a(s,{className:"flex items-center gap-2",children:[e(f,{className:"w-4 h-4 text-default-400"}),a(s,{className:"flex flex-col",children:[a("span",{className:"text-xs font-medium",children:[t.punch_count||0," punch",(t.punch_count||0)!==1?"es":""]}),t.complete_punches!==t.punch_count&&a("span",{className:"text-xs text-warning",children:[t.complete_punches," complete"]}),t.complete_punches===t.punch_count&&t.punch_count>0&&e("span",{className:"text-xs text-success",children:"All complete"})]})]})});default:return e(C,{className:`${r}`,children:"N/A"})}},We=n.useCallback(async()=>{try{const t=await X.get(route("attendance.exportExcel"),{params:{date:o},responseType:"blob"}),c=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=c,r.setAttribute("download",`Daily_Timesheet_${u(o).format("YYYY_MM_DD")}.xlsx`),document.body.appendChild(r),r.click(),r.remove()}catch(t){console.error("Error downloading Excel:",t),alert("Failed to download attendance excel.")}},[o]),He=n.useCallback(async()=>{try{const t=await X.get(route("attendance.exportPdf"),{params:{date:o},responseType:"blob"}),c=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=c,r.setAttribute("download",`Daily_Timesheet_${u(o).format("YYYY_MM_DD")}.pdf`),document.body.appendChild(r),r.click(),r.remove()}catch(t){console.error("Error downloading PDF:",t),alert("Failed to download attendance pdf.")}},[o]);return n.useEffect(()=>{if(o){if((_!==p.current.employee||b!==p.current.filterData||o!==p.current.selectedDate||g!==p.current.perPage||L!==p.current.updateTimeSheet||G!==p.current.refreshKey)&&Y!==1){p.current={...p.current,employee:_,filterData:b,selectedDate:o,perPage:g,updateTimeSheet:L,refreshKey:G},Z(1);return}(async()=>{R(!1);try{await Promise.all([pe(o,Y,g,_,b),N!=="/attendance-employee"?fe(o,_):Promise.resolve()])}catch(r){console.error("Error updating attendance data:",r)}finally{R(!0)}})(),p.current={...p.current,employee:_,filterData:b,selectedDate:o,perPage:g,updateTimeSheet:L,refreshKey:G,currentPage:Y}}},[o,Y,g,_,b,L,G]),n.useEffect(()=>{k&&he(k)},[k]),n.useEffect(()=>{M!==void 0&&le(M)},[M]),n.useEffect(()=>{JSON.stringify(b)!==JSON.stringify(p.current.filterData)&&(p.current={...p.current,filterData:{...b}},K())},[b,K]),n.useEffect(()=>{if(!ie||!o)return;te();const t=setInterval(te,5e3);return()=>{clearInterval(t)}},[ie,te,o]),N==="/attendance-employee"?e(s,{role:"region","aria-label":"Attendance data table",className:"w-full",children:S?e(Ce,{className:"p-4 bg-danger-50 border-danger-200",children:a(s,{className:"flex items-center gap-3",children:[e(j,{className:"w-5 h-5 text-danger"}),e(d,{color:"error",variant:"body1",children:S})]})}):a(re,{children:[e($e,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Fe,{className:"rounded-lg",isLoaded:O,children:a(Te,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e(Ae,{columns:xe,children:t=>e(Re,{align:"start","aria-label":t.ariaLabel||t.name,children:a(s,{className:"flex items-center gap-2",children:[t.icon&&e(t.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:t.name})]})},t.uid)}),e(Ee,{items:E,emptyContent:a(s,{className:"flex flex-col items-center justify-center py-12",children:[e(f,{className:"w-16 h-16 text-default-300 mb-4"}),e(d,{variant:"h6",className:"mb-2",children:"No Attendance Records"}),e(d,{variant:"body2",color:"textSecondary",children:"No attendance records found for the selected date"})]}),children:t=>e(Ue,{children:c=>we(t,c)},t.id||t.user_id)})]})})}),A>g&&e(s,{className:"py-4 flex justify-center",children:e(je,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:Y,total:B,onChange:ge,"aria-label":"Timesheet pagination"})})]})}):e(s,{sx:{display:"flex",justifyContent:"center",p:2},component:"main",role:"main","aria-label":"Timesheet Management",children:e($,{container:!0,spacing:2,children:e($,{item:!0,xs:12,children:e(Ze,{in:!0,timeout:500,children:a(Qe,{children:[e(at,{className:"bg-gradient-to-br from-slate-50/50 to-white/30 backdrop-blur-sm border-b border-white/20",title:e("div",{className:`${m?"p-6":F?"p-4":"p-3"}`,children:a("div",{className:"flex flex-col space-y-4",children:[a("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a("div",{className:"flex items-center gap-3 lg:gap-4",children:[e("div",{className:`
                                                        ${m?"p-3":F?"p-2.5":"p-2"} 
                                                        rounded-xl bg-gradient-to-br from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] border border-[rgba(var(--theme-primary-rgb),0.3)] backdrop-blur-sm
                                                    `,children:e(f,{className:`
                                                                ${m?"w-8 h-8":F?"w-6 h-6":"w-5 h-5"}
                                                            `,style:{color:"var(--theme-primary)"}})}),a("div",{className:"min-w-0 flex-1",children:[e(d,{variant:m?"h4":F?"h5":"h6",className:`
                                                                font-bold bg-gradient-to-r from-[var(--theme-primary)] to-[var(--theme-secondary)] bg-clip-text text-transparent
                                                                ${m?"":"truncate"}
                                                            `,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"Daily Timesheet"}),e(d,{variant:m?"body2":"caption",color:"textSecondary",className:m?"":"truncate",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:new Date(o).toLocaleString("en-US",{month:m?"long":"short",day:"numeric",year:m?"numeric":void 0})})]})]}),"                                                ",a("div",{className:"flex items-center gap-4",children:[ue&&a(d,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem",display:{xs:"block",sm:"block"}},children:["Updated: ",ue]}),e("div",{className:"flex items-center gap-2",children:Be&&a(re,{children:[e(ke,{color:"success",variant:"flat",size:m?"md":"sm",startContent:e(Pe,{className:`
                                                                            ${m?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-success-rgb),0.1)] to-[rgba(var(--theme-success-rgb),0.2)] hover:from-[rgba(var(--theme-success-rgb),0.2)] hover:to-[rgba(var(--theme-success-rgb),0.3)] border border-[rgba(var(--theme-success-rgb),0.2)] backdrop-blur-sm",onPress:We,isDisabled:!O||E.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:m?"Excel":"XLS"}),e(ke,{color:"danger",variant:"flat",size:m?"md":"sm",startContent:e(Pe,{className:`
                                                                            ${m?"w-4 h-4":"w-3.5 h-3.5"}
                                                                        `}),className:"bg-gradient-to-r from-[rgba(var(--theme-danger-rgb),0.1)] to-[rgba(var(--theme-danger-rgb),0.2)] hover:from-[rgba(var(--theme-danger-rgb),0.2)] hover:to-[rgba(var(--theme-danger-rgb),0.3)] border border-[rgba(var(--theme-danger-rgb),0.2)] backdrop-blur-sm",onPress:He,isDisabled:!O||E.length===0,style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:"PDF"})]})})]})]}),m&&a("div",{className:"flex items-center gap-6 pt-2 border-t border-white/10",children:[a("div",{className:"flex items-center gap-2",children:[e(I,{className:"w-4 h-4 text-success"}),a(d,{variant:"caption",color:"textSecondary",children:["Present: ",A]})]}),U&&a("div",{className:"flex items-center gap-2",children:[e(j,{className:"w-4 h-4 text-warning"}),a(d,{variant:"caption",color:"textSecondary",children:["Absent: ",i.length]})]}),a("div",{className:"flex items-center gap-2",children:[e(rt,{className:"w-4 h-4 text-primary"}),a(d,{variant:"caption",color:"textSecondary",children:["Total: ",A+i.length]})]})]})]})}),sx:{padding:0,"& .MuiCardHeader-content":{width:"100%",overflow:"hidden"}}}),e(Se,{}),e(Le,{children:e(s,{component:"section",role:"search","aria-label":"Timesheet filters",children:e($,{container:!0,spacing:3,children:U&&a(re,{children:[e($,{item:!0,xs:12,sm:6,md:4,children:e(oe,{type:"text",label:"Search Employee",placeholder:"Enter employee name",value:_,onChange:Ie,startContent:e(se,{className:"w-4 h-4 text-default-400"}),variant:"bordered","aria-label":"Search employees",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})}),e($,{item:!0,xs:12,sm:6,md:4,children:e(oe,{label:"Select Date",type:"date",variant:"bordered",onChange:P,value:new Date(o).toISOString().slice(0,10)||"",startContent:e(W,{className:"w-4 h-4 text-default-400"}),"aria-label":"Select date for timesheet",classNames:{inputWrapper:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15"}})})]})})})}),e(Se,{}),e(Le,{children:a($,{container:!0,spacing:3,children:[e($,{item:!0,xs:12,md:U?9:12,children:S?e(Ce,{className:"p-4 bg-danger-50 border-danger-200",children:a(s,{className:"flex items-center gap-3",children:[e(j,{className:"w-5 h-5 text-danger"}),e(d,{color:"error",variant:"body1",children:S})]})}):a(s,{role:"region","aria-label":"Present employees attendance table",className:"border-r border-gray-200 pr-4",sx:{borderRightColor:"rgba(0, 0, 0, 0.1)"},children:[e(s,{className:"mb-4",children:a(d,{variant:"h6",className:"font-semibold text-blue-600 flex items-center gap-2",children:[e(I,{className:"w-5 h-5"}),"Present Employees (",A,")"]})}),e($e,{orientation:"horizontal",className:"overflow-y-hidden",children:e(Fe,{className:"rounded-lg",isLoaded:O,children:a(Te,{selectionMode:"multiple",selectionBehavior:"toggle",isCompact:!0,removeWrapper:!0,"aria-label":"Employee attendance timesheet table",isHeaderSticky:!0,classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full",thead:"z-10",tbody:"overflow-y-auto"},children:[e(Ae,{columns:xe,children:t=>e(Re,{align:"start",children:a(s,{className:"flex items-center gap-2",children:[t.icon&&e(t.icon,{className:"w-4 h-4"}),e("span",{className:"text-sm font-medium",children:t.name})]})},t.uid)}),e(Ee,{items:E,emptyContent:a(s,{className:"flex flex-col items-center justify-center py-8",children:[e(f,{className:"w-12 h-12 text-default-300 mb-4"}),e(d,{variant:"body1",color:"textSecondary",children:"No attendance records found"})]}),children:t=>e(Ue,{children:c=>we(t,c)},t.id||t.user_id)})]})})}),A>g&&e(s,{className:"py-4 flex justify-center",children:e(je,{initialPage:1,isCompact:!0,showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:Y,total:B,onChange:ge,"aria-label":"Timesheet pagination"})})]})}),U&&e($,{item:!0,xs:12,md:3,children:e(nt,{absentUsers:i,selectedDate:o,getUserLeave:De})})]})})]})})})})})};export{Lt as T};
